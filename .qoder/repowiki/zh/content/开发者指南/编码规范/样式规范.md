# 样式规范

<cite>
**本文档引用的文件**   
- [mobile.scss](file://k.yyup.com/client/aimobile/styles/mobile.scss)
- [global.scss](file://k.yyup.com/client/demo/styles/global.scss)
- [App.vue](file://k.yyup.com/client/aimobile/App.vue)
- [MobileAiAssistant.vue](file://k.yyup.com/client/aimobile/components/MobileAiAssistant.vue)
- [MobileLayout.vue](file://k.yyup.com/client/aimobile/layouts/MobileLayout.vue)
- [postcss.config.js](file://k.yyup.com/postcss.config.js)
- [analyze-icons.js](file://k.yyup.com/analyze-icons.js)
- [check-unified-icon-imports.js](file://k.yyup.com/check-unified-icon-imports.js)
- [vite.config.ts](file://k.yyup.com/client/vite.config.ts)
</cite>

## 目录
1. [SCSS使用标准](#scss使用标准)
2. [CSS类名BEM命名方法](#css类名bem命名方法)
3. [响应式设计实现方式](#响应式设计实现方式)
4. [图标使用统一规范](#图标使用统一规范)
5. [避免内联样式的指导原则](#避免内联样式的指导原则)
6. [CSS-in-JS使用限制](#css-in-js使用限制)

## SCSS使用标准

本项目采用SCSS作为主要的样式预处理器，遵循以下使用标准：

### 嵌套深度限制

项目中SCSS的嵌套深度应严格控制在3层以内，以确保生成的CSS选择器不会过于具体，避免影响样式的可维护性和性能。在`mobile.scss`文件中，可以看到组件如`.mobile-btn`和`.mobile-form`的嵌套结构都保持在合理的深度范围内。

### 变量命名约定

所有SCSS变量均采用kebab-case（短横线分隔）命名约定。项目中定义了大量的CSS自定义属性（CSS变量），如`--mobile-primary`、`--mobile-text-primary`、`--mobile-bg-primary`等，这些变量按照功能模块进行组织，便于统一管理和维护。

### 混合宏使用规范

项目中使用SCSS混合宏（mixin）来封装可重用的样式代码。例如，在`mobile.scss`中定义了响应式断点的混合宏：
- `@mixin mobile-only`：移动端断点（最大宽度767px）
- `@mixin tablet-up`：平板及以上断点（最小宽度768px）
- `@mixin desktop-up`：桌面端及以上断点（最小宽度1024px）
- `@mixin large-up`：大屏幕及以上断点（最小宽度1200px）

这些混合宏的使用确保了响应式设计的一致性和可维护性。

**Section sources**
- [mobile.scss](file://k.yyup.com/client/aimobile/styles/mobile.scss#L243-L266)

## CSS类名BEM命名方法

项目采用BEM（Block-Element-Modifier）命名方法来组织CSS类名，确保样式作用域的清晰性。

### 块（Block）

块是独立的、可复用的组件。在项目中，常见的块包括：
- `.mobile-card`：卡片组件
- `.mobile-btn`：按钮组件
- `.mobile-form`：表单组件
- `.mobile-list`：列表组件

### 元素（Element）

元素是块的组成部分，使用双下划线`__`连接。例如：
- `.mobile-card__header`：卡片头部
- `.mobile-card__content`：卡片内容
- `.mobile-btn__icon`：按钮图标
- `.mobile-form__input`：表单输入框

### 修饰符（Modifier）

修饰符用于改变块或元素的外观或行为，使用双连字符`--`连接。例如：
- `.mobile-btn--primary`：主要按钮
- `.mobile-btn--secondary`：次要按钮
- `.mobile-card--flat`：扁平化卡片
- `.mobile-card--raised`：提升式卡片

通过BEM命名方法，可以清晰地表达组件的结构关系，避免样式冲突，提高代码的可读性和可维护性。

**Section sources**
- [mobile.scss](file://k.yyup.com/client/aimobile/styles/mobile.scss#L350-L511)

## 响应式设计实现方式

项目采用移动优先策略和媒体查询断点来实现响应式设计。

### 移动优先策略

项目的设计以移动端为起点，逐步增强在平板和桌面端的体验。在`mobile.scss`中，基础样式针对移动端设计，然后通过`@mixin tablet-up`、`@mixin desktop-up`等混合宏来添加更大屏幕的样式。

### 媒体查询断点

项目定义了清晰的响应式断点：
- 移动端：最大宽度767px
- 平板：最小宽度768px
- 桌面端：最小宽度1024px
- 大屏幕：最小宽度1200px

这些断点通过SCSS混合宏封装，确保在不同组件中使用的一致性。例如，`.mobile-container`类在不同断点下有不同的最大宽度和内边距设置。

### 视口适配

项目充分考虑了移动设备的特性，使用`env(safe-area-inset-top)`、`env(safe-area-inset-bottom)`等环境变量来适配iPhone等设备的刘海屏和安全区域，确保内容不会被设备的物理特性遮挡。

**Section sources**
- [mobile.scss](file://k.yyup.com/client/aimobile/styles/mobile.scss#L243-L266)
- [mobile.scss](file://k.yyup.com/client/aimobile/styles/mobile.scss#L292-L307)

## 图标使用统一规范

项目通过脚本工具统一管理图标引用，确保图标的使用规范和一致性。

### 统一图标组件

项目中使用Element Plus的图标组件，通过`<el-icon>`标签引入图标。在`MobileAiAssistant.vue`等组件中，可以看到使用`<el-icon><ChatRound /></el-icon>`的方式引入图标，这种方式将图标作为Vue组件使用，便于管理和维护。

### 图标导入检查

项目包含`check-unified-icon-imports.js`脚本，用于检查所有Vue文件中图标组件的导入路径是否统一。该脚本会遍历`client/src`目录下的所有Vue文件，验证`UnifiedIcon`组件的导入路径是否为`@/components/icons/UnifiedIcon.vue`，确保项目中图标引用的一致性。

### 图标系统分析

项目包含`analyze-icons.js`脚本，使用Playwright无头浏览器分析页面中的图标显示情况。该脚本会：
1. 访问指定页面
2. 分析页面中的图标元素
3. 检查Element Plus图标系统的加载情况
4. 生成图标分析报告
5. 保存页面截图

这种自动化检查机制有助于及时发现和修复图标显示问题。

**Section sources**
- [MobileAiAssistant.vue](file://k.yyup.com/client/aimobile/components/MobileAiAssistant.vue#L18-L19)
- [check-unified-icon-imports.js](file://k.yyup.com/check-unified-icon-imports.js#L1-L92)
- [analyze-icons.js](file://k.yyup.com/analyze-icons.js#L1-L174)

## 避免内联样式的指导原则

项目遵循避免使用内联样式的指导原则，确保样式的可维护性。

### 样式分离

项目严格遵循样式与结构分离的原则，所有样式都定义在`<style>`标签或外部样式文件中，而不是使用`style`属性。在`App.vue`、`MobileAiAssistant.vue`等组件中，可以看到样式都集中在`<style>`标签内，通过类名应用到元素上。

### 动态样式处理

对于需要动态设置的样式，项目使用CSS变量和Vue的绑定机制。例如，在`App.vue`中，`contentStyle`计算属性根据设备特性动态设置安全区域的内边距，而不是直接使用内联样式。

### 条件样式

对于条件性样式，项目使用Vue的`class`绑定语法。例如，在`MobileAiAssistant.vue`中，使用`:class="drawerClasses"`根据组件状态动态添加类名，这种方式比内联样式更清晰、更易于维护。

### 样式作用域

项目中的组件样式都使用`scoped`属性，确保样式只作用于当前组件，避免全局污染。同时，通过BEM命名方法进一步确保样式的可预测性和可维护性。

**Section sources**
- [App.vue](file://k.yyup.com/client/aimobile/App.vue#L470-L752)
- [MobileAiAssistant.vue](file://k.yyup.com/client/aimobile/components/MobileAiAssistant.vue#L631-L800)

## CSS-in-JS使用限制

项目优先使用外部样式文件，对CSS-in-JS的使用有明确限制。

### 优先使用外部样式文件

项目中所有组件的样式都定义在`<style>`标签中，而不是使用CSS-in-JS库。这种做法符合Vue的推荐实践，有利于样式的可维护性和性能优化。

### 样式构建配置

项目使用Vite作为构建工具，在`vite.config.ts`中配置了SCSS预处理器，支持在Vue组件中使用`<style lang="scss">`。这种配置使得可以在保持样式分离的同时，享受SCSS带来的功能优势。

### PostCSS配置

项目在`postcss.config.js`中配置了PostCSS插件，包括`postcss-px-to-viewport`，用于将像素单位转换为视口单位，更好地支持响应式设计。这种配置确保了样式代码的现代化和可维护性。

### 样式优化

项目通过SCSS的嵌套、变量、混合宏等功能，实现了样式的模块化和可复用性，避免了CSS-in-JS可能带来的性能开销和复杂性。同时，通过构建工具的优化，生成的CSS文件具有良好的压缩和性能表现。

**Section sources**
- [vite.config.ts](file://k.yyup.com/client/vite.config.ts#L1-L200)
- [postcss.config.js](file://k.yyup.com/postcss.config.js#L1-L10)