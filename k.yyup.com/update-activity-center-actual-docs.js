import mysql from 'mysql2/promise';

const connection = await mysql.createConnection({
  host: 'localhost',
  user: 'root',
  password: '123456',
  database: 'lazy_ai_substitute_project'
});

// 先删除旧的活动中心文档
console.log('删除旧的活动中心AI知识库文档...');
await connection.execute(
  "DELETE FROM ai_knowledge_base WHERE category = '活动中心'"
);

const activityCenterDocs = [
  {
    category: '活动中心',
    document_name: 'activity_center_overview',
    document_description: '活动中心概览功能说明',
    document_content: `# 活动中心概览

## 页面定位
活动中心是活动管理的核心平台，您可以策划各类活动、管理报名登记、跟踪活动进展、分析活动效果。

## 标签页结构
活动中心包含5个主要标签页：
1. **概览**：统计数据、快速操作、活动概况
2. **活动管理**：活动列表、创建编辑、状态管理
3. **活动模板**：模板库、AI配图、模板管理
4. **海报管理**：海报模板、生成器、编辑器
5. **报名管理**：报名统计、数据分析、审核处理
6. **数据分析**：活动数据分析、趋势统计

## 统计卡片
### 核心指标
- **总活动数**：系统中所有活动总数及增长趋势
- **进行中活动**：当前正在进行的活动数量
- **总报名数**：所有活动的累计报名人数
- **平均评分**：活动的平均评分和趋势变化

每个统计卡片都支持点击跳转到对应的管理标签页

## 快速操作
提供常用的快速操作功能：
- 新建活动：快速创建新的活动
- 活动模板：访问活动模板库
- 数据分析：查看活动数据统计
- 报名管理：处理活动报名`
  },
  {
    category: '活动中心',
    document_name: 'activity_management_system',
    document_description: '活动管理功能详解',
    document_content: `# 活动管理系统

## 功能概述
活动管理标签页使用ActivityList组件，提供完整的活动CRUD功能。

## 活动列表功能
- **活动展示**：表格形式展示所有活动信息
- **创建活动**：支持从零创建新活动
- **编辑活动**：修改现有活动信息
- **删除活动**：删除不需要的活动
- **状态管理**：管理活动的进行状态

## 活动信息结构
### 基本信息
- 活动标题和描述
- 活动时间和地点
- 活动类型和分类
- 参与人数限制

### 状态管理
- **进行中**：活动正在进行
- **已结束**：活动已完成
- **已取消**：活动被取消
- **筹备中**：活动准备阶段

## 操作功能
- **查看详情**：查看活动完整信息
- **编辑活动**：修改活动设置
- **管理报名**：处理报名申请
- **生成报告**：导出活动数据

## 数据刷新
- 支持手动刷新活动列表
- 自动同步最新的活动状态
- 实时更新报名人数`
  },
  {
    category: '活动中心',
    document_name: 'activity_templates_management',
    document_description: '活动模板管理功能详解',
    document_content: `# 活动模板管理

## 模板库功能
活动模板库提供预设的活动模板，帮助快速创建标准化活动。

## 核心功能

### 1. 模板展示
- **网格布局**：模板以卡片形式展示
- **模板信息**：显示模板名称、描述、分类
- **使用统计**：显示模板使用次数
- **预览图片**：每个模板都有配套图片

### 2. AI配图功能
#### 一键AI配图
- **批量生成**：点击"一键AI配图"为所有模板生成配图
- **智能匹配**：AI根据模板内容自动生成合适的图片
- **生成状态**：显示"正在生成配图..."的加载状态

#### 单个模板配图
- **AI配图按钮**：每个模板卡片都有AI配图按钮
- **实时生成**：点击后立即为该模板生成配图
- **加载状态**：显示模板级别的生成状态

### 3. 模板操作
#### 使用模板
- **📋 使用模板**：基于模板创建新活动
- **数据继承**：自动继承模板的基础设置
- **快速创建**：减少活动创建时间

#### 编辑模板
- **✏️ 编辑模板**：修改模板内容和设置
- **内容更新**：更新模板描述和配置
- **保存变更**：自动保存修改内容

### 4. 模板管理
#### 新建模板
- **创建按钮**：点击"新建模板"创建自定义模板
- **模板设计**：设置模板基础信息
- **分类管理**：为模板设置合适的分类

#### 图片管理
- **图片更新**：支持更新模板配图
- **错误处理**：图片加载失败时的替代方案
- **懒加载**：优化图片加载性能

## 模板分类
### 常见分类
- 教育活动模板
- 娱乐活动模板
- 体育活动模板
- 艺术活动模板
- 社交活动模板

## 集成功能
- **KindergartenImageGenerator**：专业的幼儿园图片生成器
- **图片使用回调**：生成的图片自动应用到模板
- **模板统计**：跟踪模板使用频率`
  },
  {
    category: '活动中心',
    document_name: 'poster_management_system',
    document_description: '海报管理系统功能详解',
    document_content: `# 海报管理系统

## 系统概述
海报管理提供完整的海报设计、生成和编辑解决方案，采用三个专业子模块。

## 三大功能模块

### 1. 海报模板 (PosterTemplates)
#### 功能特点
- **模板库**：提供丰富的预设海报模板
- **分类管理**：按活动类型、风格、用途分类
- **快速选择**：一键选择模板开始设计
- **预览功能**：实时预览模板效果

#### 应用场景
- 快速制作活动海报
- 标准化设计流程
- 保持品牌一致性
- 节省设计时间

### 2. 海报生成器 (PosterGenerator)
#### 智能生成
- **AI驱动**：基于活动信息自动生成海报
- **内容识别**：智能提取活动关键信息
- **风格匹配**：根据活动类型选择合适风格
- **批量生成**：支持批量生成多个海报

#### 生成流程
1. 输入活动基本信息
2. 选择海报风格偏好
3. AI自动生成设计方案
4. 预览和调整效果
5. 导出最终海报

### 3. 海报编辑器 (PosterEditor)
#### 专业编辑
- **可视化编辑**：拖拽式设计界面
- **元素管理**：文字、图片、图形自由组合
- **样式调整**：字体、颜色、布局精细控制
- **层级管理**：元素层次和顺序管理

#### 编辑功能
- **文本编辑**：支持多种字体和样式
- **图片处理**：裁剪、滤镜、透明度调整
- **图形绘制**：基础形状和装饰元素
- **导出选项**：多种格式和分辨率选择

## 卡片式导航
海报管理采用卡片式标签页设计：
- **清晰分工**：每个标签页专注特定功能
- **流畅切换**：标签页间无缝切换
- **状态保持**：切换时保持工作状态

## 使用流程
### 快速制作流程
1. 选择海报模板
2. 使用生成器创建初稿
3. 编辑器精细调整
4. 导出使用

### 专业制作流程
1. 编辑器从零开始设计
2. 保存为自定义模板
3. 生成器批量应用
4. 建立设计规范`
  },
  {
    category: '活动中心',
    document_name: 'registration_management_analytics',
    document_description: '报名管理和数据分析功能详解',
    document_content: `# 报名管理和数据分析

## 报名管理功能

### 报名统计展示
- **数据概览**：显示报名总体情况
- **实时更新**：报名数据实时同步
- **导出功能**：支持报名数据导出
- **手动刷新**：一键刷新最新数据

### 可视化图表分析
#### 1. 报名趋势图表
- **时间轴展示**：显示报名随时间的变化趋势
- **趋势分析**：识别报名高峰和低谷期
- **预测功能**：基于历史数据预测未来趋势
- **数据钻取**：支持按时间段详细查看

#### 2. 活动类型分布图
- **分类统计**：按活动类型统计报名分布
- **占比分析**：显示各类型活动的报名占比
- **热门识别**：识别最受欢迎的活动类型
- **数据对比**：不同类型间的数据对比

### 最新报名列表
#### 列表功能
- **实时列表**：显示最新的报名记录
- **详细信息**：活动名称、参与者、报名时间
- **状态管理**：报名状态的可视化显示
- **快速操作**：查看和审核操作按钮

#### 状态类型
- **待审核**：新提交的报名申请
- **已通过**：审核通过的报名
- **已拒绝**：审核未通过的报名
- **已取消**：用户主动取消的报名

### 操作功能
#### 查看报名
- **📄 查看按钮**：查看报名详细信息
- **参与者信息**：查看报名者完整资料
- **报名表单**：查看提交的报名表单
- **历史记录**：查看操作历史

#### 审核报名
- **⭐ 审核按钮**：进入报名审核流程
- **审核标准**：按照设定标准进行审核
- **批量操作**：支持批量审核功能
- **审核备注**：添加审核意见和备注

## 数据分析功能

### 分析维度
#### 时间分析
- **日期范围选择**：自定义分析时间段
- **趋势对比**：不同时期的数据对比
- **周期性分析**：识别报名的周期性规律
- **季节性特征**：分析季节对报名的影响

#### 活动效果分析
- **参与度分析**：分析活动参与度
- **转化率统计**：从浏览到报名的转化率
- **用户行为**：分析用户的报名行为模式
- **满意度评价**：收集和分析用户反馈

### 报表功能
- **数据导出**：支持Excel、PDF格式导出
- **自定义报表**：根据需求生成定制报表
- **定期报告**：设置定期自动生成报告
- **数据可视化**：丰富的图表展示选项

## 系统集成
- **活动系统联动**：与活动管理系统无缝集成
- **用户系统对接**：与用户管理系统数据同步
- **通知系统**：自动发送报名确认和状态更新通知
- **支付系统**：对于付费活动的支付状态跟踪`
  }
];

console.log('开始添加基于实际页面内容的活动中心AI知识库文档...');

for (const doc of activityCenterDocs) {
  try {
    const [result] = await connection.execute(
      'INSERT INTO ai_knowledge_base (category, document_name, document_description, document_content, created_at, updated_at) VALUES (?, ?, ?, ?, NOW(), NOW())',
      [doc.category, doc.document_name, doc.document_description, doc.document_content]
    );
    
    console.log(`✅ 成功添加文档: ${doc.category} - ${doc.document_name} (ID: ${result.insertId})`);
  } catch (error) {
    console.error(`❌ 添加文档失败: ${doc.category} - ${doc.document_name}`, error.message);
  }
}

await connection.end();
console.log('活动中心AI知识库文档更新完成！');