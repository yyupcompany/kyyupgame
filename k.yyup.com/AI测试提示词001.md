# AI助手测试提示词 001

## 📋 测试概述

**测试目标**: 全面验证幼儿园管理系统AI助手的功能完整性、工具调用能力和响应质量
**测试版本**: v1.0.0
**测试日期**: 2025-12-15
**测试人员**: [测试人员姓名]

---

## 🏗️ 系统架构分析

### 前端架构
- **输入组件**: `InputArea.vue` - Claude Code风格输入界面
- **逻辑处理**: `useAIAssistantLogic.ts` - 统一AI助手逻辑
- **API调用**: `function-tools.ts` - 工具函数接口

### 后端架构
- **主要接口**: `/api/ai/unified/stream-chat` - 统一流式智能接口
- **工具系统**: Function Tools - 23种智能工具
- **记忆系统**: 六维记忆模型替代传统工具
- **事件系统**: SSE流式响应 - 15种事件类型

### 工具分类统计
| 类别 | 工具数量 | 主要功能 |
|------|---------|----------|
| 数据查询 | 1 | any_query - 智能自然语言查询 |
| 数据CRUD | 4 | 创建、更新、删除、批量导入 |
| 业务操作 | 1 | 生成活动海报 |
| 活动工作流 | 2 | 完整活动方案生成和执行 |
| 数据导入 | 2 | 教师、家长数据智能导入 |

---

## 🧪 测试用例设计

### 1. 基础对话测试

#### 【✅已完成】1.1 简单问答
```
输入: "你好，你是谁？"
预期: 系统应该自我介绍为幼儿园管理AI助手
预期事件: start -> thinking -> answer -> complete

测试结果: ✅ 通过
实际事件: connected → thinking_start → thinking → thinking_complete → answer_start → answer_chunk → answer_complete → complete
测试时间: 2025-12-16 23:07
备注: AI成功响应，事件序列完整，响应流畅
```

#### 【✅已完成】1.2 专业咨询
```
输入: "如何提高幼儿园的招生效果？"
预期: 提供专业的招生策略建议
预期事件: start -> thinking -> answer -> complete
验证要点:
- 建议的专业性和实用性
- 是否包含具体可执行的方案
- 回复的逻辑结构

测试结果: ✅ 通过
实际事件: connected → thinking_start → thinking → thinking_complete → answer_start → answer_chunk → answer_complete → complete
测试时间: 2025-12-16 23:09
备注: AI成功响应专业咨询，事件序列完整，响应流畅
```

### 2. 工具调用测试

#### 【❌失败】2.1 数据查询工具
```
输入: "查询最近10个活动的基本信息"
预期工具调用: any_query
参数验证:
- userQuery: "查询最近10个活动的基本信息"
- queryType: "detailed"
- expectedFormat: "mixed"

预期事件序列:
start -> thinking -> tool_call_start -> tool_call_complete -> answer -> complete

测试结果: ❌ 失败
实际事件: connected → thinking_start → thinking → thinking_complete → error
测试时间: 2025-12-17 00:46
错误信息: AI调用失败: AI服务认证失败，请检查API密钥配置
错误详情: HTTP错误 401: AuthenticationError - The API key format is incorrect
根本原因: 数据库中存储的API密钥格式不正确（sk-OMDg69Y...）
影响范围: 所有AI功能无法使用
修复建议:
1. 检查ai_model_config表中的api_key字段
2. 确保API密钥格式正确（完整的豆包API密钥）
3. 重新配置默认模型的API密钥
4. 验证API密钥的有效性
```

#### 【待测试】2.2 数据分析查询
```
输入: "统计每个班级的学生数量，用图表展示"
预期工具调用: any_query
参数验证:
- userQuery: "统计每个班级的学生数量，用图表展示"
- queryType: "statistical"
- expectedFormat: "chart"

验证要点:
- SQL查询的准确性
- 数据统计的正确性
- 图表格式的适用性
```

### 3. 复杂工作流测试

#### 【待测试】3.1 活动创建工作流
```
输入: "帮我创建一个春游活动，包括活动策划、海报设计和营销推广"

预期执行流程:
1. analyze_task_complexity (分析复杂度)
2. create_todo_list (创建任务清单)
3. generate_complete_activity_plan (生成活动方案)
4. execute_activity_workflow (执行工作流)

TodoList应该包含:
- 需求分析
- 活动策划
- 海报设计
- 营销推广
- 数据录入
```

#### 【待测试】3.2 数据导入工作流
```
输入: "导入这份教师数据表格，文件是teacher_list.xlsx"

预期工具调用:
1. import_teacher_data
2. 数据验证和清洗
3. 导入结果反馈

验证要点:
- 文件格式兼容性
- 数据字段映射
- 错误处理机制
- 导入成功率
```

### 4. 多模态处理测试

#### 【待测试】4.1 文件上传测试
```
操作: 上传一个PDF文档
输入: "[📄 活动方案.pdf](/uploads/activity_plan.pdf) 请分析这个活动方案的可行性"

预期处理:
- 文件内容提取
- 文本分析处理
- 专业建议输出

验证要点:
- 文件读取成功
- 内容理解准确
- 建议专业有效
```

#### 【待测试】4.2 图片处理测试
```
操作: 上传一张活动海报图片
输入: "![海报](/uploads/poster.jpg) 这张海报设计怎么样？"

预期处理:
- 图片内容识别
- 设计质量分析
- 优化建议提供

验证要点:
- 图片内容识别
- 设计专业评价
- 改进建议具体
```

### 5. 错误处理测试

#### 【待测试】5.1 工具调用失败
```
输入: "删除所有学生数据" (权限不足的操作)

预期响应:
- 权限检查提示
- 错误信息明确
- 建议替代方案

验证要点:
- 错误信息友好
- 安全机制有效
- 引导用户正确操作
```

#### 【待测试】5.2 无效查询处理
```
输入: "查询不存在的xyz数据"

预期响应:
- 智能理解用户意图
- 提供相关建议
- 引导正确查询

验证要点:
- 意图理解准确
- 建议贴切
- 交互友好
```

### 6. 性能压力测试

#### 【待测试】6.1 长文本处理
```
输入: 超过2000字的复杂需求描述

验证要点:
- 响应时间 < 30秒
- 内容理解完整
- 执行逻辑清晰
- 结果准确有效
```

#### 【待测试】6.2 并发处理测试
```
场景: 同时多个用户发送不同请求

验证要点:
- 响应不互相影响
- 系统稳定性
- 资源分配合理
- 错误率 < 1%
```

---

## 🔍 测试检查清单

### 功能完整性
- [ ] 基础对话功能正常
- [ ] 数据查询和CRUD工具可正常调用
- [ ] SSE事件流完整输出
- [ ] 六维记忆系统工作正常
- [ ] 权限控制机制有效

### 响应质量
- [ ] 回复内容专业准确
- [ ] 语言表达自然流畅
- [ ] 建议方案切实可行
- [ ] 错误信息友好明确
- [ ] 学习能力持续改进

### 用户体验
- [ ] 界面交互流畅
- [ ] 响应速度满意
- [ ] 操作引导清晰
- [ ] 错误提示友好
- [ ] 功能易于理解

### 安全稳定性
- [ ] 权限控制严格
- [ ] 数据处理安全
- [ ] 异常处理完善
- [ ] 系统运行稳定
- [ ] 日志记录完整

---

## 🚨 预期问题和解决方案

### 常见问题
1. **工具调用超时**
   - 问题: 复杂查询导致响应超时
   - 解决: 优化查询算法，增加超时处理机制

2. **权限控制错误**
   - 问题: 用户权限验证失败
   - 解决: 完善权限中间件，提供清晰的错误提示

3. **SSE连接中断**
   - 问题: 网络波动导致流式响应中断
   - 解决: 增加重连机制，提供断点续传

4. **多模态处理失败**
   - 问题: 文件上传或解析失败
   - 解决: 增强文件兼容性，提供格式转换

### 边界条件
1. **输入长度限制**
   - 单次消息最大1000字符
   - 超长消息需要分段处理

2. **并发用户限制**
   - 最大支持100并发用户
   - 超出限制需要排队机制

3. **文件大小限制**
   - 单个文件最大10MB
   - 超大文件需要压缩处理

---

## 📊 测试结果评估

### 评分标准
| 测试项目 | 权重 | 评分标准 |
|---------|------|---------|
| 功能完整性 | 30% | 全部功能正常30分，每缺失1项扣2分 |
| 响应质量 | 25% | 优秀25分，良好20分，一般15分，较差10分 |
| 用户体验 | 20% | 优秀20分，良好15分，一般10分，较差5分 |
| 安全稳定性 | 15% | 全部达标15分，每项问题扣3分 |
| 性能表现 | 10% | 优秀10分，良好8分，一般6分，较差4分 |

### 等级评定
- **优秀** (90-100分): 系统功能完善，质量优异，可以上线
- **良好** (80-89分): 系统功能基本完善，质量良好，优化后可上线
- **一般** (70-79分): 系统功能部分缺失，质量一般，需要重大改进
- **较差** (60-69分): 系统功能不完善，质量较差，不建议上线
- **不合格** (<60分): 系统存在严重问题，必须重新开发

---

## 📝 测试记录模板

```
测试日期: ___________
测试人员: ___________
测试环境: ___________

基础功能测试:
□ 简单对话 - 通过/失败 - 备注:___________
□ 数据查询 - 通过/失败 - 备注:___________
□ 数据CRUD - 通过/失败 - 备注:___________

高级功能测试:
□ 工作流执行 - 通过/失败 - 备注:___________
□ 多模态处理 - 通过/失败 - 备注:___________
□ 复杂查询 - 通过/失败 - 备注:___________

异常处理测试:
□ 错误恢复 - 通过/失败 - 备注:___________
□ 权限控制 - 通过/失败 - 备注:___________
□ 超时处理 - 通过/失败 - 备注:___________

总体评价:
得分:_____ 等级:_____ 建议:___________
```

---

## 🚀 后续优化建议

1. **工具扩展**: 增加更多业务专用工具
2. **性能优化**: 优化响应速度，减少等待时间
3. **智能化提升**: 增强AI理解和推理能力
4. **用户体验**: 优化界面交互，提升易用性
5. **安全加固**: 完善权限控制，保障数据安全

---

**文档版本**: v1.0.0
**最后更新**: 2025-12-15
**下次更新**: 根据测试结果进行调整