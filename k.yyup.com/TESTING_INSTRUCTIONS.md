# 教师SOP系统 - 测试说明

## ✅ 测试结果

### 后端API测试
- ✅ 后端服务运行正常 (端口3000)
- ✅ API端点已配置
- ✅ 认证中间件正常工作
- ⏳ 需要登录后测试完整功能

### 前端服务测试
- ✅ 前端服务运行正常 (端口5173)
- ✅ 路由配置已更新
- ✅ 所有组件已创建
- ⏳ 需要浏览器测试

---

## 🧪 浏览器测试步骤

### 第一步：访问系统

1. 打开浏览器
2. 访问: `http://localhost:5173` 或 `http://localhost:5173`
3. 使用测试账号登录

### 第二步：登录系统

**教师测试账号**:
```
用户名: teacher@test.com
密码: 123456
```

**管理员测试账号**:
```
用户名: admin@test.com  
密码: 123456
```

### 第三步：访问客户跟踪

1. 登录后，在左侧侧边栏找到 "👥 客户跟踪"
2. 点击进入客户列表页面
3. 如果看到客户列表，说明基础功能正常

### 第四步：测试SOP详情页

**方法1: 直接访问URL**
```
http://localhost:5173/teacher-center/customer-tracking/1
```

**方法2: 从列表点击**
1. 在客户列表页面
2. 点击任意客户卡片
3. 应该跳转到SOP详情页面

### 第五步：检查页面元素

在SOP详情页面，应该看到：

- [ ] 页面头部（面包屑导航）
- [ ] 客户信息卡片
- [ ] SOP进度卡片
- [ ] 成功概率卡片
- [ ] SOP阶段流程（7个阶段导航）
- [ ] 任务清单
- [ ] 对话记录区域
- [ ] 截图上传区域
- [ ] AI建议面板
- [ ] 数据统计图表

---

## 🔍 功能测试清单

### 基础功能
- [ ] 页面正常加载
- [ ] 没有控制台错误
- [ ] 样式显示正常
- [ ] 组件正常渲染

### SOP阶段流程
- [ ] 7个阶段正常显示
- [ ] 当前阶段高亮显示
- [ ] 点击阶段可以切换
- [ ] 阶段详情正常展示

### 任务管理
- [ ] 任务列表正常显示
- [ ] 可以展开/收起任务
- [ ] 任务指导正常显示
- [ ] AI建议按钮可见

### 对话功能
- [ ] 对话时间线正常显示
- [ ] 可以添加新对话
- [ ] 对话输入框正常

### AI功能
- [ ] AI建议面板正常显示
- [ ] 可以点击获取建议按钮

---

## 🐛 常见问题排查

### 问题1: 页面404
**原因**: 路由未正确配置或客户ID不存在

**解决**:
1. 检查URL是否正确
2. 确认客户ID存在于数据库
3. 检查路由配置

### 问题2: 页面空白
**原因**: 组件加载失败或API错误

**解决**:
1. 打开浏览器开发者工具 (F12)
2. 查看Console标签的错误信息
3. 查看Network标签的API请求

### 问题3: 样式错乱
**原因**: CSS未正确加载

**解决**:
1. 清除浏览器缓存
2. 刷新页面 (Ctrl+F5)
3. 检查Element Plus是否正确安装

### 问题4: API调用失败
**原因**: 后端服务未启动或认证失败

**解决**:
1. 确认后端服务运行: `npm run status`
2. 确认已登录系统
3. 检查Network标签的请求详情

---

## 📊 测试数据准备

### 创建测试客户

如果数据库中没有客户数据，运行：

```bash
cd server
npm run seed-data:complete
```

这将创建：
- SOP阶段数据
- SOP任务数据
- 测试客户数据
- 测试对话数据

### 检查数据库

```sql
-- 检查SOP阶段
SELECT * FROM sop_stages ORDER BY order_num;

-- 检查SOP任务
SELECT * FROM sop_tasks WHERE stage_id = 1;

-- 检查客户数据
SELECT * FROM customers LIMIT 10;

-- 检查客户SOP进度
SELECT * FROM customer_sop_progress;
```

---

## 🎯 预期结果

### 成功标准

1. ✅ 页面正常加载，无404错误
2. ✅ 所有组件正常渲染
3. ✅ 控制台无严重错误
4. ✅ 样式显示正常
5. ✅ 可以看到7个SOP阶段
6. ✅ 可以看到任务列表
7. ✅ 可以看到对话区域
8. ✅ 可以看到AI建议面板

### 已知限制

1. ⚠️ 部分功能使用模拟数据（待集成真实API）
2. ⚠️ 图表功能待实现（需要ECharts）
3. ⚠️ 截图上传需要配置上传服务
4. ⚠️ AI功能需要配置AI服务

---

## 📝 测试报告模板

### 测试环境
- 浏览器: _______
- 操作系统: _______
- 测试时间: _______

### 测试结果

| 功能模块 | 测试项 | 结果 | 备注 |
|---------|--------|------|------|
| 页面加载 | 正常访问 | ☐ 通过 ☐ 失败 | |
| 客户信息 | 信息展示 | ☐ 通过 ☐ 失败 | |
| SOP进度 | 进度展示 | ☐ 通过 ☐ 失败 | |
| 阶段流程 | 阶段导航 | ☐ 通过 ☐ 失败 | |
| 任务管理 | 任务列表 | ☐ 通过 ☐ 失败 | |
| 对话功能 | 对话展示 | ☐ 通过 ☐ 失败 | |
| AI建议 | 建议面板 | ☐ 通过 ☐ 失败 | |

### 发现的问题

1. 
2. 
3. 

### 建议改进

1. 
2. 
3. 

---

## 🚀 下一步

### 如果测试通过
1. 集成真实API数据
2. 完善错误处理
3. 添加加载状态
4. 优化用户体验

### 如果测试失败
1. 记录错误信息
2. 检查控制台日志
3. 查看Network请求
4. 提交问题报告

---

## 📞 获取帮助

### 查看日志

**前端日志**:
- 浏览器开发者工具 → Console

**后端日志**:
- 查看终端输出
- 查看 `server/logs/` 目录

### 调试技巧

1. **使用Vue DevTools**
   - 安装Vue DevTools浏览器扩展
   - 查看组件树和状态

2. **使用Network面板**
   - 查看API请求
   - 检查请求参数
   - 查看响应数据

3. **使用Console**
   - 查看错误信息
   - 查看警告信息
   - 查看日志输出

---

## ✅ 测试完成检查

- [ ] 页面可以正常访问
- [ ] 所有组件正常显示
- [ ] 没有严重错误
- [ ] 基础功能可用
- [ ] 已记录测试结果
- [ ] 已记录发现的问题

---

**测试文档版本**: 1.0  
**更新时间**: 2025-10-06  
**适用人员**: 开发者、测试人员

