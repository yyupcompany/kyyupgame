# AIåŠ©æ‰‹ç›®å½•ç»“æ„é€ŸæŸ¥è¡¨

## ğŸ“ å®Œæ•´ç›®å½•æ ‘

```
client/src/components/ai-assistant/
â”‚
â”œâ”€â”€ ğŸ“„ index.ts                                    # ç»Ÿä¸€å¯¼å‡ºå…¥å£
â”œâ”€â”€ ğŸ“„ AIAssistantRefactored.vue                   # é‡æ„åä¸»ç»„ä»¶ï¼ˆ364è¡Œï¼‰âœ…
â”œâ”€â”€ ğŸ“„ AIAssistant.vue                             # åŸå§‹ç»„ä»¶ï¼ˆ8082è¡Œï¼Œä¿ç•™å‚è€ƒï¼‰
â”‚
â”œâ”€â”€ ğŸ“ core/                                       # æ ¸å¿ƒé€»è¾‘å±‚
â”‚   â”œâ”€â”€ AIAssistantCore.vue                       # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆæ— UIï¼‰âœ…
â”‚   â””â”€â”€ README.md                                 # æ ¸å¿ƒå±‚æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ layout/                                     # å¸ƒå±€å±‚
â”‚   â”œâ”€â”€ FullscreenLayout.vue                      # å…¨å±æ¨¡å¼å¸ƒå±€ âœ…
â”‚   â”œâ”€â”€ SidebarLayout.vue                         # ä¾§è¾¹æ æ¨¡å¼å¸ƒå±€ï¼ˆå·²åºŸå¼ƒï¼‰âœ…
â”‚   â””â”€â”€ README.md                                 # å¸ƒå±€å±‚æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ chat/                                       # èŠå¤©å±‚
â”‚   â”œâ”€â”€ ChatContainer.vue                         # èŠå¤©å®¹å™¨ âœ…
â”‚   â”œâ”€â”€ MessageList.vue                           # æ¶ˆæ¯åˆ—è¡¨ âœ…
â”‚   â”œâ”€â”€ MessageItem.vue                           # å•æ¡æ¶ˆæ¯ âœ…
â”‚   â”œâ”€â”€ WelcomeMessage.vue                        # æ¬¢è¿æ¶ˆæ¯ âœ…
â”‚   â””â”€â”€ README.md                                 # èŠå¤©å±‚æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ ai-response/                                # AIå“åº”å±‚
â”‚   â”œâ”€â”€ ThinkingProcess.vue                       # æ€è€ƒè¿‡ç¨‹æ˜¾ç¤º âœ…
â”‚   â”œâ”€â”€ FunctionCallList.vue                      # å·¥å…·è°ƒç”¨åˆ—è¡¨ âœ…
â”‚   â”œâ”€â”€ FunctionCallItem.vue                      # å•ä¸ªå·¥å…·è°ƒç”¨ âœ…
â”‚   â”œâ”€â”€ AnswerDisplay.vue                         # ç­”æ¡ˆæ˜¾ç¤º âœ…
â”‚   â””â”€â”€ README.md                                 # AIå“åº”å±‚æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ input/                                      # è¾“å…¥å±‚ â³
â”‚   â”œâ”€â”€ InputArea.vue                             # è¾“å…¥åŒºåŸŸï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ VoiceMessageBar.vue                       # è¯­éŸ³æ¶ˆæ¯æ ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ QuickQueryGroups.vue                      # å¿«æ·æŸ¥è¯¢ç»„ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ FileUpload.vue                            # æ–‡ä»¶ä¸Šä¼ ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ ImageUpload.vue                           # å›¾ç‰‡ä¸Šä¼ ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚   â””â”€â”€ README.md                                 # è¾“å…¥å±‚æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ sidebar/                                    # ä¾§è¾¹æ å±‚ â³
â”‚   â”œâ”€â”€ LeftSidebar.vue                           # å·¦ä¾§æ -ä¼šè¯åˆ—è¡¨ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ RightSidebar.vue                          # å³ä¾§æ -å·¥å…·é¢æ¿ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ ConversationsSidebar.vue                  # ä¼šè¯ä¾§è¾¹æ ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ ToolsSidebar.vue                          # å·¥å…·ä¾§è¾¹æ ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â””â”€â”€ README.md                                 # ä¾§è¾¹æ å±‚æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ dialogs/                                    # å¯¹è¯æ¡†å±‚ â³
â”‚   â”œâ”€â”€ AIStatistics.vue                          # AIç»Ÿè®¡å¯¹è¯æ¡†ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ ConfigPanel.vue                           # é…ç½®é¢æ¿ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ ConversationDrawer.vue                    # ä¼šè¯æŠ½å±‰ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ ChatDialog.vue                            # èŠå¤©å¯¹è¯æ¡†ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â””â”€â”€ README.md                                 # å¯¹è¯æ¡†å±‚æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ workflow/                                   # å·¥ä½œæµå±‚ â³
â”‚   â”œâ”€â”€ WorkflowStepQueue.vue                     # å·¥ä½œæµæ­¥éª¤é˜Ÿåˆ—ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ ToolCallingStatus.vue                     # å·¥å…·è°ƒç”¨çŠ¶æ€ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ ToolCallingIndicator.vue                  # å·¥å…·è°ƒç”¨æŒ‡ç¤ºå™¨ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ ToolCallingSidebar.vue                    # å·¥å…·è°ƒç”¨ä¾§è¾¹æ ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â””â”€â”€ README.md                                 # å·¥ä½œæµå±‚æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ features/                                   # åŠŸèƒ½ç»„ä»¶å±‚ â³
â”‚   â”œâ”€â”€ MarkdownMessage.vue                       # Markdownæ¶ˆæ¯æ¸²æŸ“ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ ExpertMessageRenderer.vue                 # ä¸“å®¶æ¶ˆæ¯æ¸²æŸ“ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ DynamicComponentRenderer.vue              # åŠ¨æ€ç»„ä»¶æ¸²æŸ“ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ TokenUsageCard.vue                        # Tokenä½¿ç”¨å¡ç‰‡ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ PerformanceMonitor.vue                    # æ€§èƒ½ç›‘æ§ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ SkeletonLoader.vue                        # éª¨æ¶å±åŠ è½½ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ ThinkingIndicator.vue                     # æ€è€ƒæŒ‡ç¤ºå™¨ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ DraggableTable.vue                        # å¯æ‹–æ‹½è¡¨æ ¼ï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ PromptPreview.vue                         # æç¤ºé¢„è§ˆï¼ˆå¾…è¿ç§»ï¼‰
â”‚   â””â”€â”€ README.md                                 # åŠŸèƒ½ç»„ä»¶å±‚æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ composables/                                # ç»„åˆå¼å‡½æ•°å±‚
â”‚   â”œâ”€â”€ useAIAssistantState.ts                    # AIåŠ©æ‰‹çŠ¶æ€ç®¡ç† âœ…
â”‚   â”œâ”€â”€ useAIResponse.ts                          # AIå“åº”å¤„ç† âœ…
â”‚   â”œâ”€â”€ useMessageHandling.ts                     # æ¶ˆæ¯å¤„ç† âœ…
â”‚   â”œâ”€â”€ useToolCalling.ts                         # å·¥å…·è°ƒç”¨ç®¡ç†ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ useConversation.ts                        # ä¼šè¯ç®¡ç†ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ useVoice.ts                               # è¯­éŸ³åŠŸèƒ½ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ useTheme.ts                               # ä¸»é¢˜ç®¡ç†ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ useWorkflow.ts                            # å·¥ä½œæµç®¡ç†ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â””â”€â”€ README.md                                 # Composablesæ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ types/                                      # ç±»å‹å®šä¹‰å±‚
â”‚   â”œâ”€â”€ index.ts                                  # ç»Ÿä¸€å¯¼å‡º â³
â”‚   â”œâ”€â”€ aiAssistant.ts                            # AIåŠ©æ‰‹ç±»å‹ âœ…
â”‚   â”œâ”€â”€ message.ts                                # æ¶ˆæ¯ç±»å‹ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ conversation.ts                           # ä¼šè¯ç±»å‹ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ toolCall.ts                               # å·¥å…·è°ƒç”¨ç±»å‹ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ workflow.ts                               # å·¥ä½œæµç±»å‹ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ voice.ts                                  # è¯­éŸ³ç±»å‹ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â””â”€â”€ README.md                                 # ç±»å‹å®šä¹‰æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ utils/                                      # å·¥å…·å‡½æ•°å±‚
â”‚   â”œâ”€â”€ messageFormatting.ts                      # æ¶ˆæ¯æ ¼å¼åŒ– âœ…
â”‚   â”œâ”€â”€ validationUtils.ts                        # éªŒè¯å·¥å…· âœ…
â”‚   â”œâ”€â”€ expertMessageUtils.ts                     # ä¸“å®¶æ¶ˆæ¯å·¥å…· âœ…
â”‚   â”œâ”€â”€ eventHandlers.ts                          # äº‹ä»¶å¤„ç†ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ apiHelpers.ts                             # APIè¾…åŠ©å‡½æ•°ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ storageHelpers.ts                         # å­˜å‚¨è¾…åŠ©å‡½æ•°ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ dateHelpers.ts                            # æ—¥æœŸè¾…åŠ©å‡½æ•°ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â””â”€â”€ README.md                                 # å·¥å…·å‡½æ•°æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ styles/                                     # æ ·å¼å±‚
â”‚   â”œâ”€â”€ index.scss                                # ç»Ÿä¸€å¯¼å…¥ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ variables.scss                            # å˜é‡å®šä¹‰ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ mixins.scss                               # Mixinå®šä¹‰ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ fullscreen-layout.scss                    # å…¨å±å¸ƒå±€æ ·å¼ âœ…
â”‚   â”œâ”€â”€ chat-components.scss                      # èŠå¤©ç»„ä»¶æ ·å¼ âœ…
â”‚   â”œâ”€â”€ ai-response.scss                          # AIå“åº”æ ·å¼ âœ…
â”‚   â”œâ”€â”€ sidebar.scss                              # ä¾§è¾¹æ æ ·å¼ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ dialogs.scss                              # å¯¹è¯æ¡†æ ·å¼ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ input.scss                                # è¾“å…¥æ ·å¼ï¼ˆå¾…åˆ›å»ºï¼‰â³
â”‚   â”œâ”€â”€ desktop-assistant-styles.scss             # æ¡Œé¢åŠ©æ‰‹æ ·å¼ï¼ˆåŸæœ‰ï¼‰
â”‚   â””â”€â”€ README.md                                 # æ ·å¼æ–‡æ¡£
â”‚
â””â”€â”€ ğŸ“ constants/                                  # å¸¸é‡å®šä¹‰å±‚ â³
    â”œâ”€â”€ config.ts                                 # é…ç½®å¸¸é‡ï¼ˆå¾…åˆ›å»ºï¼‰
    â”œâ”€â”€ events.ts                                 # äº‹ä»¶å¸¸é‡ï¼ˆå¾…åˆ›å»ºï¼‰
    â”œâ”€â”€ messages.ts                               # æ¶ˆæ¯å¸¸é‡ï¼ˆå¾…åˆ›å»ºï¼‰
    â”œâ”€â”€ routes.ts                                 # è·¯ç”±å¸¸é‡ï¼ˆå¾…åˆ›å»ºï¼‰
    â”œâ”€â”€ api.ts                                    # APIå¸¸é‡ï¼ˆå¾…åˆ›å»ºï¼‰
    â””â”€â”€ README.md                                 # å¸¸é‡æ–‡æ¡£
```

---

## ğŸ“Š ç»Ÿè®¡ä¿¡æ¯

### æ–‡ä»¶ç»Ÿè®¡
- **æ€»æ–‡ä»¶æ•°**: ~80ä¸ª
- **å·²å®Œæˆ**: 20ä¸ª âœ…
- **å¾…è¿ç§»**: 40ä¸ª â³
- **å¾…åˆ›å»º**: 20ä¸ª ğŸ†•

### ä»£ç è¡Œæ•°
- **åŸå§‹æ–‡ä»¶**: 8,082è¡Œ
- **é‡æ„åä¸»æ–‡ä»¶**: 364è¡Œ
- **å‡å°‘**: 95.5%

### ç›®å½•ç»Ÿè®¡
- **æ€»ç›®å½•æ•°**: 12ä¸ª
- **å·²åˆ›å»º**: 7ä¸ª âœ…
- **å¾…åˆ›å»º**: 5ä¸ª â³

---

## ğŸ¯ å„å±‚èŒè´£

### 1. æ ¸å¿ƒå±‚ (core/)
**èŒè´£**: ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œæ— UIæ¸²æŸ“
- å¤šè½®å·¥å…·è°ƒç”¨
- çŠ¶æ€ç®¡ç†
- APIè°ƒç”¨
- äº‹ä»¶åˆ†å‘

### 2. å¸ƒå±€å±‚ (layout/)
**èŒè´£**: é¡µé¢å¸ƒå±€å’Œç»“æ„
- å…¨å±å¸ƒå±€
- ä¾§è¾¹æ å¸ƒå±€
- å“åº”å¼å¸ƒå±€

### 3. èŠå¤©å±‚ (chat/)
**èŒè´£**: èŠå¤©ç›¸å…³åŠŸèƒ½
- æ¶ˆæ¯åˆ—è¡¨
- æ¶ˆæ¯æ¸²æŸ“
- æ¬¢è¿æ¶ˆæ¯
- æ»šåŠ¨ç®¡ç†

### 4. AIå“åº”å±‚ (ai-response/)
**èŒè´£**: AIå“åº”å±•ç¤º
- æ€è€ƒè¿‡ç¨‹
- å·¥å…·è°ƒç”¨
- ç­”æ¡ˆæ˜¾ç¤º
- æµå¼è¾“å‡º

### 5. è¾“å…¥å±‚ (input/)
**èŒè´£**: ç”¨æˆ·è¾“å…¥å¤„ç†
- æ–‡æœ¬è¾“å…¥
- è¯­éŸ³è¾“å…¥
- æ–‡ä»¶ä¸Šä¼ 
- å¿«æ·æŸ¥è¯¢

### 6. ä¾§è¾¹æ å±‚ (sidebar/)
**èŒè´£**: ä¾§è¾¹æ åŠŸèƒ½
- ä¼šè¯åˆ—è¡¨
- å·¥å…·é¢æ¿
- ç»Ÿè®¡ä¿¡æ¯

### 7. å¯¹è¯æ¡†å±‚ (dialogs/)
**èŒè´£**: å¼¹çª—å’ŒæŠ½å±‰
- ç»Ÿè®¡å¯¹è¯æ¡†
- é…ç½®é¢æ¿
- ä¼šè¯æŠ½å±‰

### 8. å·¥ä½œæµå±‚ (workflow/)
**èŒè´£**: å·¥ä½œæµç®¡ç†
- æ­¥éª¤é˜Ÿåˆ—
- çŠ¶æ€æ˜¾ç¤º
- è¿›åº¦è·Ÿè¸ª

### 9. åŠŸèƒ½ç»„ä»¶å±‚ (features/)
**èŒè´£**: ç‹¬ç«‹åŠŸèƒ½ç»„ä»¶
- Markdownæ¸²æŸ“
- åŠ¨æ€ç»„ä»¶
- æ€§èƒ½ç›‘æ§
- éª¨æ¶å±

### 10. Composableså±‚ (composables/)
**èŒè´£**: å¯å¤ç”¨é€»è¾‘
- çŠ¶æ€ç®¡ç†
- ä¸šåŠ¡é€»è¾‘
- å‰¯ä½œç”¨å¤„ç†

### 11. ç±»å‹å±‚ (types/)
**èŒè´£**: TypeScriptç±»å‹å®šä¹‰
- æ¥å£å®šä¹‰
- ç±»å‹å¯¼å‡º
- ç±»å‹å®ˆå«

### 12. å·¥å…·å±‚ (utils/)
**èŒè´£**: çº¯å‡½æ•°å·¥å…·
- æ ¼å¼åŒ–
- éªŒè¯
- è½¬æ¢
- è¾…åŠ©å‡½æ•°

### 13. æ ·å¼å±‚ (styles/)
**èŒè´£**: æ ·å¼ç®¡ç†
- å˜é‡å®šä¹‰
- Mixinå®šä¹‰
- ç»„ä»¶æ ·å¼
- ä¸»é¢˜æ ·å¼

### 14. å¸¸é‡å±‚ (constants/)
**èŒè´£**: å¸¸é‡å®šä¹‰
- é…ç½®å¸¸é‡
- äº‹ä»¶å¸¸é‡
- æ¶ˆæ¯å¸¸é‡
- APIå¸¸é‡

---

## ğŸ” å¿«é€ŸæŸ¥æ‰¾

### æŒ‰åŠŸèƒ½æŸ¥æ‰¾

#### æ¶ˆæ¯ç›¸å…³
- `chat/MessageList.vue` - æ¶ˆæ¯åˆ—è¡¨
- `chat/MessageItem.vue` - å•æ¡æ¶ˆæ¯
- `features/MarkdownMessage.vue` - Markdownæ¸²æŸ“
- `features/ExpertMessageRenderer.vue` - ä¸“å®¶æ¶ˆæ¯
- `utils/messageFormatting.ts` - æ¶ˆæ¯æ ¼å¼åŒ–

#### è¾“å…¥ç›¸å…³
- `input/InputArea.vue` - è¾“å…¥åŒºåŸŸ
- `input/VoiceMessageBar.vue` - è¯­éŸ³è¾“å…¥
- `input/QuickQueryGroups.vue` - å¿«æ·æŸ¥è¯¢
- `input/FileUpload.vue` - æ–‡ä»¶ä¸Šä¼ 

#### AIå“åº”ç›¸å…³
- `ai-response/ThinkingProcess.vue` - æ€è€ƒè¿‡ç¨‹
- `ai-response/FunctionCallList.vue` - å·¥å…·è°ƒç”¨åˆ—è¡¨
- `ai-response/AnswerDisplay.vue` - ç­”æ¡ˆæ˜¾ç¤º
- `composables/useAIResponse.ts` - AIå“åº”å¤„ç†

#### ä¼šè¯ç›¸å…³
- `sidebar/ConversationsSidebar.vue` - ä¼šè¯åˆ—è¡¨
- `dialogs/ConversationDrawer.vue` - ä¼šè¯æŠ½å±‰
- `composables/useConversation.ts` - ä¼šè¯ç®¡ç†

#### å·¥å…·è°ƒç”¨ç›¸å…³
- `workflow/ToolCallingStatus.vue` - å·¥å…·çŠ¶æ€
- `workflow/ToolCallingIndicator.vue` - å·¥å…·æŒ‡ç¤ºå™¨
- `sidebar/ToolsSidebar.vue` - å·¥å…·é¢æ¿
- `composables/useToolCalling.ts` - å·¥å…·è°ƒç”¨ç®¡ç†

#### æ ·å¼ç›¸å…³
- `styles/variables.scss` - å˜é‡å®šä¹‰
- `styles/mixins.scss` - Mixinå®šä¹‰
- `styles/fullscreen-layout.scss` - å…¨å±å¸ƒå±€
- `styles/chat-components.scss` - èŠå¤©ç»„ä»¶

---

## ğŸ“‹ å›¾ä¾‹è¯´æ˜

- âœ… å·²å®Œæˆ
- â³ å¾…è¿ç§»/å¾…åˆ›å»º
- ğŸ†• æ–°å¢æ–‡ä»¶
- ğŸ“„ æ–‡ä»¶
- ğŸ“ ç›®å½•

---

**åˆ›å»ºæ—¶é—´**: 2025-10-09
**æœ€åæ›´æ–°**: 2025-10-09
**ç‰ˆæœ¬**: v1.0

