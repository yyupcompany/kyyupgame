# 呼叫中心快速开始指南

**最后更新**: 2025-10-28  
**版本**: 1.0  
**状态**: ✅ 可用

---

## 🚀 5分钟快速开始

### 第1步：启动服务 (1分钟)
```bash
# 在项目根目录执行
npm run start:all

# 或分别启动
npm run start:frontend    # 前端 (5173端口)
npm run start:backend     # 后端 (3000端口)
```

### 第2步：访问页面 (1分钟)
```
前端: http://localhost:5173/centers/call-center
后端: http://localhost:3000/api-docs
```

### 第3步：配置VOS (1分钟)
```
1. 点击"VOS设置"按钮
2. 输入VOS服务器地址
3. 输入主叫号码
4. 点击"测试连接"
5. 连接成功后保存
```

### 第4步：发起通话 (1分钟)
```
1. 点击"发起通话"按钮
2. 输入电话号码
3. 选择话术模板（可选）
4. 点击"呼叫"按钮
5. 等待通话接通
```

### 第5步：查看记录 (1分钟)
```
1. 切换到"通话记录"标签页
2. 查看通话记录列表
3. 点击"播放"播放录音
4. 点击"分析"查看AI分析
```

---

## 📱 主要功能

### 📞 电话呼叫
- **发起通话**: 输入电话号码，一键发起VOS通话
- **实时状态**: 显示通话状态、时长、通话数
- **联系人选择**: 快速选择老家长、客户、员工
- **话术模板**: 选择预设话术，支持AI优化

### 📋 通话记录
- **记录列表**: 查看所有通话记录
- **播放录音**: 点击播放通话录音
- **查看转写**: 查看通话转写内容
- **导出数据**: 导出为CSV格式

### 🧠 话术分析
- **AI分析**: 自动分析通话内容
- **优化建议**: 提供话术优化建议
- **对比展示**: 原话术vs优化话术
- **建议列表**: 详细的改进建议

### ⚙️ 系统设置
- **VOS配置**: 配置VOS服务器信息
- **系统提示词**: 管理AI系统提示词
- **测试连接**: 测试VOS连接状态

---

## 🎯 常见操作

### 操作1：发起通话
```
步骤:
1. 打开呼叫中心页面
2. 点击"发起通话"按钮
3. 输入电话号码 (如: 13800138000)
4. 选择话术模板 (可选)
5. 点击"呼叫"按钮

结果: 通话已发起，显示通话状态
```

### 操作2：查看通话记录
```
步骤:
1. 切换到"通话记录"标签页
2. 查看通话记录列表
3. 点击"播放"播放录音
4. 点击"分析"查看分析结果

结果: 显示通话详情和分析结果
```

### 操作3：优化话术
```
步骤:
1. 在通话记录中点击"优化"按钮
2. 查看原话术和优化建议
3. 查看改进点列表

结果: 显示优化后的话术和建议
```

### 操作4：配置VOS
```
步骤:
1. 点击"VOS设置"按钮
2. 输入服务器地址
3. 输入主叫号码
4. 点击"测试连接"
5. 连接成功后点击"保存"

结果: VOS配置已保存
```

---

## 🔧 API端点

### 核心API
```
POST   /api/call-center/call/make              发起通话
POST   /api/call-center/call/hangup            挂断通话
GET    /api/call-center/call/:callId/status    获取通话状态
GET    /api/call-center/calls/active           获取活跃通话
GET    /api/call-center/overview               获取概览数据
```

### 通话记录API
```
GET    /api/call-center/recordings             获取记录列表
GET    /api/call-center/recordings/:id         获取记录详情
GET    /api/call-center/recordings/:id/download 下载录音
GET    /api/call-center/recordings/:id/transcript 获取转写
```

### AI分析API
```
POST   /api/call-center/ai/analyze/:callId     分析通话
POST   /api/call-center/ai/generate-script     生成话术
POST   /api/call-center/ai/speech-to-text      语音识别
POST   /api/call-center/ai/check-compliance    合规审查
```

---

## 📊 数据格式

### 发起通话请求
```json
{
  "phoneNumber": "13800138000",
  "customerId": 123,
  "systemPrompt": "您好，我是XX机构的老师"
}
```

### 发起通话响应
```json
{
  "success": true,
  "data": {
    "callId": "call_1234567890_abc123",
    "phoneNumber": "13800138000",
    "status": "connecting",
    "message": "呼叫已发起，等待接通"
  }
}
```

### 通话记录响应
```json
{
  "success": true,
  "data": {
    "list": [
      {
        "id": "rec_123",
        "contactName": "张三",
        "phoneNumber": "13800138000",
        "duration": 300,
        "status": "answered",
        "startTime": "2025-01-15T14:30:00Z"
      }
    ],
    "total": 100
  }
}
```

---

## ⚠️ 常见问题

### Q1: VOS连接失败
**A**: 检查VOS服务器地址和端口是否正确，确保网络连接正常

### Q2: 无法发起通话
**A**: 确保VOS已配置并连接成功，电话号码格式正确

### Q3: 录音无法播放
**A**: 检查浏览器是否支持音频播放，确保录音文件存在

### Q4: 分析结果为空
**A**: 确保通话已完成，AI分析需要完整的通话记录

### Q5: 页面加载缓慢
**A**: 清除浏览器缓存，检查网络连接，重新加载页面

---

## 🧪 测试数据

### 测试用户
```
用户名: test@example.com
密码: test123456
```

### 测试电话
```
13800138000
13800138001
13800138002
```

### 测试VOS配置
```
服务器: vos.example.com
端口: 443
协议: https
主叫号码: 01012345678
```

---

## 📞 获取帮助

### 文档
- API集成计划: `呼叫中心API集成计划.md`
- 集成完成报告: `呼叫中心API集成完成报告.md`
- 测试计划: `呼叫中心集成测试计划.md`
- 工作总结: `呼叫中心集成工作总结.md`

### 联系方式
- 开发团队: dev@example.com
- 技术支持: support@example.com
- 问题反馈: issues@example.com

---

## ✅ 检查清单

启动前检查:
- [ ] Node.js >= 18.0.0
- [ ] npm >= 8.0.0
- [ ] MySQL >= 8.0
- [ ] 网络连接正常
- [ ] VOS服务可用

启动后检查:
- [ ] 前端页面加载成功
- [ ] 后端API可访问
- [ ] VOS连接成功
- [ ] 可以发起通话
- [ ] 可以查看记录

---

## 🎉 开始使用

现在您已经准备好使用呼叫中心系统了！

**访问地址**: http://localhost:5173/centers/call-center

**祝您使用愉快！** 🚀


