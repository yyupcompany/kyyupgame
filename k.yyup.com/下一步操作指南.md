# ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œæŒ‡å—

## âœ… å½“å‰çŠ¶æ€

æ‰€æœ‰ç¯å¢ƒå·²å®‰è£…å®Œæˆï¼š
- âœ… Genymotion 3.9.0
- âœ… VirtualBox 7.1.8
- âœ… Java JDK 17
- âœ… Flutter 3.24.5
- âœ… Android SDK
- âœ… ç¯å¢ƒå˜é‡å·²é…ç½®

---

## ğŸ“± æ–¹æ¡ˆ1ï¼šå¯åŠ¨Genymotionå¹¶åˆ›å»ºè™šæ‹Ÿè®¾å¤‡ï¼ˆæ¨èå…ˆåšï¼‰

### æ­¥éª¤1ï¼šå¯åŠ¨Genymotion

```bash
# å¯åŠ¨Genymotion
/home/zhgue/localhost:5173/genymotion/genymotion &
```

### æ­¥éª¤2ï¼šç™»å½•è´¦å·

- å¦‚æœè¿˜æ²¡æœ‰è´¦å·ï¼Œè®¿é—®ï¼šhttps://www.genymotion.com/account/create/
- é€‰æ‹© "Personal Use" å…è´¹ç‰ˆ
- åœ¨Genymotionä¸­ç™»å½•

### æ­¥éª¤3ï¼šåˆ›å»ºè™šæ‹Ÿè®¾å¤‡

1. ç‚¹å‡»å³ä¸Šè§’ **"+"** æŒ‰é’®
2. é€‰æ‹©è®¾å¤‡æ¨¡æ¿ï¼š
   - **æ¨èè®¾å¤‡**ï¼šGoogle Pixel 5
   - **Androidç‰ˆæœ¬**ï¼šAndroid 11.0 (API 30)
   - **è®¾å¤‡åç§°**ï¼šTeacher_App_Test
3. ç‚¹å‡» **"Next"** å¼€å§‹ä¸‹è½½ï¼ˆçº¦500MB-1GBï¼‰
4. ä¸‹è½½å®Œæˆåï¼Œè®¾å¤‡ä¼šå‡ºç°åœ¨åˆ—è¡¨ä¸­
5. **åŒå‡»è®¾å¤‡**å¯åŠ¨è™šæ‹Ÿè®¾å¤‡

### æ­¥éª¤4ï¼šéªŒè¯è™šæ‹Ÿè®¾å¤‡

è™šæ‹Ÿè®¾å¤‡å¯åŠ¨åï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ä¸€ä¸ªAndroidæ‰‹æœºç•Œé¢ã€‚

---

## ğŸ”§ æ–¹æ¡ˆ2ï¼šä¿®å¤Flutterä»£ç å¹¶æ„å»ºAPK

APKæ„å»ºå¤±è´¥æ˜¯å› ä¸ºä»£ç æœ‰ç¼–è¯‘é”™è¯¯ï¼Œéœ€è¦ä¿®å¤ä»¥ä¸‹é—®é¢˜ï¼š

### ä¸»è¦é”™è¯¯ç±»å‹

1. **ç¼ºå°‘æšä¸¾ç±»å‹å®šä¹‰**
   - `ActivityStatus` æœªå®šä¹‰
   - `ActivityType` æœªå®šä¹‰

2. **ç¼ºå°‘Providerå®šä¹‰**
   - `apiServiceProvider` æœªå®šä¹‰

3. **APIæ–¹æ³•è°ƒç”¨é”™è¯¯**
   - `apiService.post()` å‚æ•°ä¸åŒ¹é…
   - ç¼ºå°‘å¤šä¸ªAPIæ–¹æ³•

4. **æ¨¡å‹å­—æ®µç¼ºå¤±**
   - `ActivityModel` ç¼ºå°‘å¤šä¸ªå­—æ®µ
   - `TaskModel` ç¼ºå°‘å­—æ®µ

### ä¿®å¤å»ºè®®

#### é€‰é¡¹Aï¼šä½¿ç”¨å·²æœ‰çš„APKï¼ˆå¦‚æœæœ‰ï¼‰

å¦‚æœæ‚¨ä¹‹å‰æ„å»ºè¿‡APKï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

```bash
# æŸ¥æ‰¾å·²æœ‰çš„APK
find /home/zhgue/localhost:5173/mobileflutter/teacher_app -name "*.apk" -type f
```

#### é€‰é¡¹Bï¼šä¿®å¤ä»£ç é”™è¯¯

éœ€è¦ä¿®å¤ä»¥ä¸‹æ–‡ä»¶ï¼š
1. `lib/data/models/activity_model.dart` - è¡¥å……ç¼ºå¤±å­—æ®µå’Œæšä¸¾
2. `lib/providers/activity_provider.dart` - ä¿®å¤Providerå¼•ç”¨
3. `lib/data/datasources/api_service.dart` - è¡¥å……ç¼ºå¤±çš„APIæ–¹æ³•
4. `lib/presentation/pages/activities/activities_page.dart` - ä¿®å¤ç±»å‹å¼•ç”¨

#### é€‰é¡¹Cï¼šæ„å»ºDebugç‰ˆæœ¬ï¼ˆæ›´å¿«ï¼‰

Debugç‰ˆæœ¬æ„å»ºæ›´å¿«ï¼Œå¯ä»¥å…ˆç”¨äºæµ‹è¯•ï¼š

```bash
cd /home/zhgue/localhost:5173/mobileflutter/teacher_app

# è®¾ç½®Flutterä¸­å›½é•œåƒ
export PUB_HOSTED_URL=https://pub.flutter-io.cn
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn

# æ„å»ºDebug APKï¼ˆä¸éœ€è¦ä»£ç ç­¾åï¼Œæ„å»ºæ›´å¿«ï¼‰
../../mobileflutter/flutter/bin/flutter build apk --debug

# APKä½ç½®
# build/app/outputs/flutter-apk/app-debug.apk
```

---

## ğŸ¯ æ¨èæµç¨‹

### ç«‹å³å¯ä»¥åšçš„ï¼š

1. **å¯åŠ¨Genymotionå¹¶åˆ›å»ºè™šæ‹Ÿè®¾å¤‡**ï¼ˆ5-10åˆ†é’Ÿï¼‰
   ```bash
   /home/zhgue/localhost:5173/genymotion/genymotion &
   ```

2. **å°è¯•æ„å»ºDebug APK**ï¼ˆå¦‚æœä»£ç é”™è¯¯ä¸å½±å“Debugæ„å»ºï¼‰
   ```bash
   cd /home/zhgue/localhost:5173/mobileflutter/teacher_app
   export PUB_HOSTED_URL=https://pub.flutter-io.cn
   export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn
   ../../mobileflutter/flutter/bin/flutter build apk --debug
   ```

3. **å®‰è£…APKåˆ°Genymotion**
   - æ–¹æ³•1ï¼šç›´æ¥æ‹–æ‹½APKæ–‡ä»¶åˆ°è™šæ‹Ÿè®¾å¤‡çª—å£
   - æ–¹æ³•2ï¼šä½¿ç”¨ADBå‘½ä»¤
     ```bash
     adb devices  # ç¡®è®¤è®¾å¤‡è¿æ¥
     adb install build/app/outputs/flutter-apk/app-debug.apk
     ```

---

## ğŸ“‹ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### å¯åŠ¨Genymotion
```bash
/home/zhgue/localhost:5173/genymotion/genymotion &
```

### æ„å»ºDebug APK
```bash
cd /home/zhgue/localhost:5173/mobileflutter/teacher_app
export PUB_HOSTED_URL=https://pub.flutter-io.cn
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn
../../mobileflutter/flutter/bin/flutter build apk --debug
```

### å®‰è£…APK
```bash
# ç¡®è®¤è®¾å¤‡è¿æ¥
adb devices

# å®‰è£…APK
adb install build/app/outputs/flutter-apk/app-debug.apk
```

### æŸ¥çœ‹åº”ç”¨æ—¥å¿—
```bash
# å®æ—¶æŸ¥çœ‹åº”ç”¨æ—¥å¿—
adb logcat | grep flutter
```

---

## â“ éœ€è¦å¸®åŠ©ï¼Ÿ

### å¦‚æœGenymotionæ— æ³•å¯åŠ¨

```bash
# æ£€æŸ¥VirtualBoxå†…æ ¸æ¨¡å—
lsmod | grep vbox

# å¦‚æœæ²¡æœ‰è¾“å‡ºï¼ŒåŠ è½½æ¨¡å—
sudo modprobe vboxdrv
sudo modprobe vboxnetflt
sudo modprobe vboxnetadp
```

### å¦‚æœéœ€è¦ä¿®å¤ä»£ç é”™è¯¯

æˆ‘å¯ä»¥å¸®æ‚¨ï¼š
1. åˆ†æå…·ä½“çš„ç¼–è¯‘é”™è¯¯
2. è¡¥å……ç¼ºå¤±çš„ç±»å‹å®šä¹‰
3. ä¿®å¤APIè°ƒç”¨é—®é¢˜
4. è¡¥å……æ¨¡å‹å­—æ®µ

è¯·å‘Šè¯‰æˆ‘æ‚¨æƒ³å…ˆåšä»€ä¹ˆï¼š
- A. å¯åŠ¨Genymotionå¹¶åˆ›å»ºè™šæ‹Ÿè®¾å¤‡
- B. å°è¯•æ„å»ºDebug APK
- C. ä¿®å¤ä»£ç é”™è¯¯åæ„å»ºRelease APK
- D. å…¶ä»–éœ€æ±‚

---

**æç¤º**ï¼šå³ä½¿APKè¿˜æ²¡æ„å»ºæˆåŠŸï¼Œæ‚¨ä¹Ÿå¯ä»¥å…ˆå¯åŠ¨Genymotionå¹¶åˆ›å»ºè™šæ‹Ÿè®¾å¤‡ï¼Œè¿™æ ·ç¯å¢ƒå°±å®Œå…¨å‡†å¤‡å¥½äº†ã€‚

