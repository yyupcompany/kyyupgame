# å¹¼å„¿å›­ç®¡ç†ç³»ç»ŸAIåŠ©æ‰‹åŠŸèƒ½è¯¦ç»†æ±‡æ€»æŠ¥å‘Š

## ğŸ“‹ æŠ¥å‘Šæ¦‚è¿°

æœ¬æŠ¥å‘Šè¯¦ç»†åˆ†æäº†å¹¼å„¿å›­ç®¡ç†ç³»ç»Ÿä¸­çš„AIåŠ©æ‰‹åŠŸèƒ½ï¼ŒåŒ…æ‹¬å‰ç«¯ç•Œé¢ã€åç«¯æ¶æ„ã€æ•°æ®åº“è®¾è®¡ã€APIæ¥å£ç­‰å„ä¸ªå±‚é¢çš„å®ç°æƒ…å†µã€‚é€šè¿‡å…¨é¢æ‰«æï¼Œç³»ç»Ÿå…·å¤‡å®Œæ•´çš„AIåŠ©æ‰‹åŠŸèƒ½ä½“ç³»ï¼Œæ”¯æŒå¤šæ¨¡æ€äº¤äº’ã€æ™ºèƒ½å·¥å…·è°ƒç”¨ã€æ•°æ®åˆ†æç­‰é«˜çº§åŠŸèƒ½ã€‚

**æ‰«ææ—¶é—´**: 2025å¹´10æœˆ7æ—¥  
**ç³»ç»Ÿç‰ˆæœ¬**: æœ€æ–°ç‰ˆæœ¬  
**æ‰«æèŒƒå›´**: å…¨æ ˆAIåŠŸèƒ½æ¨¡å—  

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

### æ ¸å¿ƒåŠŸèƒ½å®šä½
- **YY-AIæ™ºèƒ½åŠ©æ‰‹**: ä¸ºå¹¼å„¿å›­ç®¡ç†æä¾›å…¨æ–¹ä½AIæ”¯æŒçš„æ™ºèƒ½åŠ©æ‰‹
- **å¤šæ¨¡æ€äº¤äº’**: æ”¯æŒæ–‡æœ¬ã€è¯­éŸ³ã€å›¾åƒç­‰å¤šç§äº¤äº’æ–¹å¼
- **æ™ºèƒ½å·¥å…·è°ƒç”¨**: å…·å¤‡æ•°æ®åº“æŸ¥è¯¢ã€é¡µé¢æ“ä½œã€æ•°æ®åˆ†æç­‰ä¸“ä¸šå·¥å…·
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**: åŸºäºé¡µé¢æ„ŸçŸ¥çš„æ™ºèƒ½åŒ–æœåŠ¡
- **å¤šè½®å¯¹è¯**: æ”¯æŒå¤æ‚çš„å¤šè½®å·¥å…·è°ƒç”¨å’Œå¯¹è¯ç®¡ç†

### ä¸»è¦èƒ½åŠ›çŸ©é˜µ
```
ğŸ“Š æ•°æ®æŸ¥è¯¢    â†’ æ´»åŠ¨ç»Ÿè®¡ã€æ‹›ç”Ÿæ•°æ®ã€ç»©æ•ˆæŒ‡æ ‡ã€è¥é”€åˆ†æ
ğŸ‘¥ ä¿¡æ¯ç®¡ç†    â†’ æ•™å¸ˆã€å­¦ç”Ÿã€å®¶é•¿ã€å¹¼å„¿å›­ä¿¡æ¯æŸ¥è¯¢  
ğŸ–¥ï¸ é¡µé¢æ“ä½œ    â†’ æ™ºèƒ½å¯¼èˆªã€å±å¹•æˆªå›¾ã€è¡¨å•å¡«å†™
ğŸ’¬ æ™ºèƒ½å¯¹è¯    â†’ æ‹›ç”Ÿç­–ç•¥ã€ç®¡ç†å»ºè®®ã€é—®é¢˜è§£ç­”
ğŸ¯ å·¥ä½œæµè‡ªåŠ¨åŒ–â†’ æ´»åŠ¨ç­–åˆ’ã€æ•°æ®å¯¼å…¥ã€æŠ¥å‘Šç”Ÿæˆ
```

---

## ğŸ–¥ï¸ å‰ç«¯æ¶æ„åˆ†æ

### 1. æ ¸å¿ƒç»„ä»¶æ¶æ„

#### ä¸»è¦ç»„ä»¶æ–‡ä»¶
- `/client/src/components/ai-assistant/AIAssistant.vue` - ä¸»AIåŠ©æ‰‹ç»„ä»¶ (6994è¡Œ)
- `/client/src/components/ai-assistant/InputArea.vue` - è¾“å…¥åŒºåŸŸç»„ä»¶
- `/client/src/components/ai-assistant/AIStatistics.vue` - ç»Ÿè®¡å±•ç¤ºç»„ä»¶
- `/client/src/components/ai-assistant/AIToggleButton.vue` - å¼€å…³æŒ‰é’®ç»„ä»¶

#### å¸ƒå±€æ¨¡å¼
**åŒæ¨¡å¼æ”¯æŒ**:
1. **ä¾§è¾¹æ æ¨¡å¼**: å¯è°ƒæ•´å®½åº¦çš„ä¾§è¾¹é¢æ¿ (300-1000px)
2. **å…¨å±æ¨¡å¼**: ä¸‰æ å¸ƒå±€ (å·¦ä¾§æ +ä¸­å¿ƒåŒºåŸŸ+å³ä¾§æ )

**ä¸‰æ å¸ƒå±€ç»„ä»¶**:
```vue
<!-- å·¦ä¾§æ  -->
<LeftSidebar :collapsed="leftSidebarCollapsed" />
<!-- ä¸­å¿ƒä¸»åŒºåŸŸ -->  
<div class="center-main">
  <div class="center-header">...</div>
  <div class="chat-container">...</div>
</div>
<!-- å³ä¾§æ  -->
<RightSidebar :visible="rightSidebarVisible" />
```

### 2. é¡µé¢ä½“ç³»

#### AIä¸“ç”¨é¡µé¢ (30ä¸ªVueæ–‡ä»¶)
```
/client/src/pages/ai/
â”œâ”€â”€ AIAssistantPage.vue          # AIåŠ©æ‰‹ä¸»é¡µé¢
â”œâ”€â”€ AIQueryInterface.vue         # AIæŸ¥è¯¢ç•Œé¢
â”œâ”€â”€ ChatInterface.vue            # èŠå¤©ç•Œé¢
â”œâ”€â”€ ExpertConsultationPage.vue   # ä¸“å®¶å’¨è¯¢é¡µé¢
â”œâ”€â”€ ModelManagementPage.vue      # æ¨¡å‹ç®¡ç†é¡µé¢
â”œâ”€â”€ MemoryManagementPage.vue     # è®°å¿†ç®¡ç†é¡µé¢
â”œâ”€â”€ DocumentImportPage.vue       # æ–‡æ¡£å¯¼å…¥é¡µé¢
â”œâ”€â”€ analytics/                   # åˆ†ææ¨¡å— (4ä¸ªæ–‡ä»¶)
â”œâ”€â”€ automation/                  # è‡ªåŠ¨åŒ–æ¨¡å— (1ä¸ªæ–‡ä»¶)
â”œâ”€â”€ components/                  # ç»„ä»¶æ¨¡å— (5ä¸ªæ–‡ä»¶)
â”œâ”€â”€ conversation/                # å¯¹è¯æ¨¡å— (1ä¸ªæ–‡ä»¶)
â”œâ”€â”€ deep-learning/               # æ·±åº¦å­¦ä¹ æ¨¡å— (1ä¸ªæ–‡ä»¶)
â”œâ”€â”€ machine-learning/            # æœºå™¨å­¦ä¹ æ¨¡å— (1ä¸ªæ–‡ä»¶)
â”œâ”€â”€ monitoring/                  # ç›‘æ§æ¨¡å— (1ä¸ªæ–‡ä»¶)
â”œâ”€â”€ nlp/                         # NLPæ¨¡å— (1ä¸ªæ–‡ä»¶)
â”œâ”€â”€ predictive/                  # é¢„æµ‹æ¨¡å— (2ä¸ªæ–‡ä»¶)
â”œâ”€â”€ visualization/               # å¯è§†åŒ–æ¨¡å— (1ä¸ªæ–‡ä»¶)
â””â”€â”€ website-automation/          # ç½‘ç«™è‡ªåŠ¨åŒ–æ¨¡å— (4ä¸ªæ–‡ä»¶)
```

### 3. çŠ¶æ€ç®¡ç†

#### Pinia Store
- `/client/src/stores/ai-assistant.ts` - AIåŠ©æ‰‹çŠ¶æ€ç®¡ç†
- `/client/src/store/modules/ai.ts` - AIæ¨¡å—çŠ¶æ€ç®¡ç†

#### Composables
- `/client/src/composables/useAIQuery.ts` - AIæŸ¥è¯¢ç»„åˆå¼å‡½æ•°
- `/client/src/composables/useChatHistory.ts` - èŠå¤©å†å²ç®¡ç†
- `/client/src/composables/useMultiRoundToolCalling.ts` - å¤šè½®å·¥å…·è°ƒç”¨
- `/client/src/composables/usePageAwareness.ts` - é¡µé¢æ„ŸçŸ¥åŠŸèƒ½

### 4. APIæ¥å£å±‚

#### APIæ¨¡å— (10ä¸ªæ–‡ä»¶)
```
/client/src/api/
â”œâ”€â”€ ai.ts                        # ä¸»AI API
â”œâ”€â”€ ai-assistant-optimized.ts    # ä¼˜åŒ–ç‰ˆAIåŠ©æ‰‹API
â”œâ”€â”€ ai-memory.ts                 # AIè®°å¿†API
â”œâ”€â”€ ai-model-config.ts           # AIæ¨¡å‹é…ç½®API
â”œâ”€â”€ ai-model.ts                  # AIæ¨¡å‹API
â”œâ”€â”€ ai-shortcuts.ts              # AIå¿«æ·æ–¹å¼API
â”œâ”€â”€ endpoints/ai.ts              # AIç«¯ç‚¹å®šä¹‰
â”œâ”€â”€ modules/ai.ts                # AIæ¨¡å—API
â”œâ”€â”€ modules/ai-query.ts          # AIæŸ¥è¯¢API
â””â”€â”€ modules/enrollment-ai.ts     # æ‹›ç”ŸAI API
```

### 5. ç§»åŠ¨ç«¯æ”¯æŒ

#### ç§»åŠ¨ç«¯AIç»„ä»¶
```
/client/aimobile/
â”œâ”€â”€ components/MobileAiAssistant.vue
â”œâ”€â”€ pages/MobileAIChat.vue
â”œâ”€â”€ services/ai-task-planner.service.ts
â”œâ”€â”€ stores/ai-assistant.ts
â””â”€â”€ stores/mobile-ai.ts
```

---

## âš™ï¸ åç«¯æ¶æ„åˆ†æ

### 1. æ§åˆ¶å™¨å±‚ (8ä¸ªæ§åˆ¶å™¨)

#### ä¸»è¦æ§åˆ¶å™¨
```typescript
/server/src/controllers/
â”œâ”€â”€ ai.controller.ts              # ä¸»AIæ§åˆ¶å™¨ (ä¼šè¯ã€æ¨¡å‹ã€æ¶ˆæ¯ç®¡ç†)
â”œâ”€â”€ ai-analysis.controller.ts     # AIåˆ†ææ§åˆ¶å™¨
â”œâ”€â”€ ai-assistant-optimized.controller.ts # ä¼˜åŒ–ç‰ˆAIåŠ©æ‰‹æ§åˆ¶å™¨
â”œâ”€â”€ ai-health.controller.ts       # AIå¥åº·æ£€æŸ¥æ§åˆ¶å™¨
â”œâ”€â”€ ai-query.controller.ts        # AIæŸ¥è¯¢æ§åˆ¶å™¨
â”œâ”€â”€ ai-shortcuts.controller.ts    # AIå¿«æ·æ–¹å¼æ§åˆ¶å™¨
â”œâ”€â”€ ai-smart-assign.controller.ts # AIæ™ºèƒ½åˆ†é…æ§åˆ¶å™¨
â””â”€â”€ ai-stats.controller.ts        # AIç»Ÿè®¡æ§åˆ¶å™¨
```

#### æ ¸å¿ƒåŠŸèƒ½
- **æ¨¡å‹ç®¡ç†**: CRUDæ“ä½œã€çŠ¶æ€åˆ‡æ¢ã€èƒ½åŠ›æ£€æŸ¥
- **ä¼šè¯ç®¡ç†**: åˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤ä¼šè¯
- **æ¶ˆæ¯å¤„ç†**: å‘é€æ¶ˆæ¯ã€æµå¼å“åº”ã€å†å²è®°å½•
- **ç»Ÿè®¡åˆ†æ**: ä½¿ç”¨ç»Ÿè®¡ã€æ€§èƒ½ç›‘æ§ã€æˆæœ¬åˆ†æ

### 2. æœåŠ¡å±‚ (81ä¸ªæœåŠ¡æ–‡ä»¶)

#### æœåŠ¡æ¶æ„å›¾
```
/server/src/services/ai/
â”œâ”€â”€ æ ¸å¿ƒæœåŠ¡ (12ä¸ª)
â”‚   â”œâ”€â”€ ai-conversation.service.ts
â”‚   â”œâ”€â”€ ai-memory.service.ts
â”‚   â”œâ”€â”€ ai-model-config.service.ts
â”‚   â”œâ”€â”€ ai-model-billing.service.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ å·¥å…·æœåŠ¡ (40ä¸ª)
â”‚   â”œâ”€â”€ tools/core/              # æ ¸å¿ƒå·¥å…·æœåŠ¡
â”‚   â”œâ”€â”€ tools/database-query/    # æ•°æ®åº“æŸ¥è¯¢å·¥å…·
â”‚   â”œâ”€â”€ tools/web-operation/     # ç½‘é¡µæ“ä½œå·¥å…·
â”‚   â””â”€â”€ tools/workflow/          # å·¥ä½œæµå·¥å…·
â”œâ”€â”€ ä¸“ä¸šæœåŠ¡ (20ä¸ª)
â”‚   â”œâ”€â”€ expert-consultation.service.ts
â”‚   â”œâ”€â”€ analytics.service.ts
â”‚   â”œâ”€â”€ smart-assign.service.ts
â”‚   â””â”€â”€ ...
â””â”€â”€ æ¡¥æ¥æœåŠ¡ (9ä¸ª)
    â”œâ”€â”€ bridge/ai-bridge.service.ts
    â””â”€â”€ multimodal.service.ts
```

#### å·¥å…·è°ƒç”¨ä½“ç³»
**æ ¸å¿ƒå·¥å…·ç±»å‹**:
- **æ•°æ®åº“æŸ¥è¯¢å·¥å…·**: any-queryã€get-statisticsã€query-data
- **ç½‘é¡µæ“ä½œå·¥å…·**: capture-screenã€fill-form
- **å·¥ä½œæµå·¥å…·**: execute-activity-workflowã€create-todo-list
- **æ¸²æŸ“å·¥å…·**: render-componentã€ui-display
æ³¨æ„ï¼šnavigate-page å·²ç§»é™¤

### 3. è·¯ç”±å±‚ (10ä¸ªè·¯ç”±æ–‡ä»¶)

```typescript
/server/src/routes/
â”œâ”€â”€ ai.ts                        # ä¸»AIè·¯ç”±
â”œâ”€â”€ ai-analysis.routes.ts        # AIåˆ†æè·¯ç”±
â”œâ”€â”€ ai-assistant-optimized.routes.ts # ä¼˜åŒ–ç‰ˆè·¯ç”±
â”œâ”€â”€ ai-knowledge.routes.ts       # AIçŸ¥è¯†è·¯ç”±
â”œâ”€â”€ ai-memories.routes.ts        # AIè®°å¿†è·¯ç”±
â”œâ”€â”€ ai-performance.routes.ts     # AIæ€§èƒ½è·¯ç”±
â”œâ”€â”€ ai-query.routes.ts           # AIæŸ¥è¯¢è·¯ç”±
â”œâ”€â”€ ai-shortcuts.routes.ts       # AIå¿«æ·æ–¹å¼è·¯ç”±
â”œâ”€â”€ ai-smart-assign.routes.ts    # AIæ™ºèƒ½åˆ†é…è·¯ç”±
â””â”€â”€ ai-stats.routes.ts           # AIç»Ÿè®¡è·¯ç”±
```

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡åˆ†æ

### 1. æ ¸å¿ƒæ•°æ®è¡¨ (16ä¸ªAIç›¸å…³è¡¨)

#### ä¼šè¯ä¸æ¶ˆæ¯è¡¨
```sql
ai_conversations          # AIä¼šè¯è¡¨
â”œâ”€â”€ id (UUID)             # ä¼šè¯ID
â”œâ”€â”€ external_user_id      # ç”¨æˆ·ID
â”œâ”€â”€ title                 # ä¼šè¯æ ‡é¢˜
â”œâ”€â”€ summary              # ä¼šè¯æ‘˜è¦
â”œâ”€â”€ message_count        # æ¶ˆæ¯æ•°é‡
â”œâ”€â”€ last_message_at      # æœ€åæ¶ˆæ¯æ—¶é—´
â”œâ”€â”€ is_archived          # æ˜¯å¦å½’æ¡£
â””â”€â”€ é¡µé¢æ„ŸçŸ¥å­—æ®µ
    â”œâ”€â”€ last_page_path
    â”œâ”€â”€ page_context
    â””â”€â”€ used_memory_ids

ai_messages              # AIæ¶ˆæ¯è¡¨
â”œâ”€â”€ id                   # æ¶ˆæ¯ID
â”œâ”€â”€ conversation_id      # ä¼šè¯ID
â”œâ”€â”€ user_id              # ç”¨æˆ·ID
â”œâ”€â”€ role                 # è§’è‰² (user/assistant)
â”œâ”€â”€ content              # æ¶ˆæ¯å†…å®¹
â”œâ”€â”€ metadata             # å…ƒæ•°æ®
â””â”€â”€ is_deleted           # è½¯åˆ é™¤æ ‡è®°
```

#### æ¨¡å‹é…ç½®è¡¨
```sql
ai_model_config          # AIæ¨¡å‹é…ç½®è¡¨
â”œâ”€â”€ id                   # æ¨¡å‹ID
â”œâ”€â”€ name                 # æ¨¡å‹åç§°
â”œâ”€â”€ display_name         # æ˜¾ç¤ºåç§°
â”œâ”€â”€ provider             # æä¾›å•† (OpenAI/è±†åŒ…ç­‰)
â”œâ”€â”€ model_type           # æ¨¡å‹ç±»å‹
â”œâ”€â”€ endpoint_url         # APIç«¯ç‚¹
â”œâ”€â”€ api_key              # APIå¯†é’¥
â”œâ”€â”€ model_parameters     # æ¨¡å‹å‚æ•° (JSON)
â”œâ”€â”€ is_default           # æ˜¯å¦é»˜è®¤
â”œâ”€â”€ status               # çŠ¶æ€ (active/inactive/testing)
â”œâ”€â”€ capabilities         # èƒ½åŠ›åˆ—è¡¨ (JSON)
â””â”€â”€ max_tokens           # æœ€å¤§ä»¤ç‰Œæ•°

ai_model_billing         # æ¨¡å‹è®¡è´¹è¡¨
â”œâ”€â”€ model_id             # æ¨¡å‹ID
â”œâ”€â”€ billing_type         # è®¡è´¹ç±»å‹
â”œâ”€â”€ input_token_price    # è¾“å…¥ä»¤ç‰Œä»·æ ¼
â”œâ”€â”€ output_token_price   # è¾“å‡ºä»¤ç‰Œä»·æ ¼
â”œâ”€â”€ call_price           # è°ƒç”¨ä»·æ ¼
â”œâ”€â”€ discount_tiers       # æŠ˜æ‰£å±‚çº§
â””â”€â”€ billing_cycle        # è®¡è´¹å‘¨æœŸ
```

#### è®°å¿†ä¸æ™ºèƒ½è¡¨
```sql
ai_memorys               # AIè®°å¿†è¡¨
â”œâ”€â”€ id                   # è®°å¿†ID
â”œâ”€â”€ user_id              # ç”¨æˆ·ID
â”œâ”€â”€ conversation_id      # ä¼šè¯ID
â”œâ”€â”€ content              # è®°å¿†å†…å®¹
â”œâ”€â”€ memory_type          # è®°å¿†ç±»å‹
â”œâ”€â”€ importance           # é‡è¦æ€§è¯„åˆ†
â”œâ”€â”€ embedding            # å‘é‡åµŒå…¥
â””â”€â”€ created_at           # åˆ›å»ºæ—¶é—´

ai_query_cache           # æŸ¥è¯¢ç¼“å­˜è¡¨
ai_query_feedback        # æŸ¥è¯¢åé¦ˆè¡¨
ai_query_templates       # æŸ¥è¯¢æ¨¡æ¿è¡¨
ai_user_permissions      # ç”¨æˆ·æƒé™è¡¨
ai_user_relations        # ç”¨æˆ·å…³ç³»è¡¨
```

### 2. æ•°æ®åº“è¿ç§»æ–‡ä»¶

#### é‡è¦è¿ç§» (20+ä¸ªæ–‡ä»¶)
```
/server/src/migrations/
â”œâ”€â”€ 20230701000000-create-ai-tables.js           # åŸºç¡€AIè¡¨
â”œâ”€â”€ 20240708000000-add-ai-permissions.ts         # AIæƒé™
â”œâ”€â”€ 20250126000002-update-ai-model-usage-fields.js # æ¨¡å‹ä½¿ç”¨å­—æ®µ
â”œâ”€â”€ 20250127000001-create-ai-query-history.js    # æŸ¥è¯¢å†å²
â”œâ”€â”€ 20250605/                                     # 2025å¹´6æœˆè¿ç§»
â”‚   â”œâ”€â”€ create-ai-memorys.js
â”‚   â”œâ”€â”€ create-ai-messages.js
â”‚   â”œâ”€â”€ create-ai-model-billings.js
â”‚   â”œâ”€â”€ create-ai-model-configs.js
â”‚   â””â”€â”€ create-ai-model-usages.js
â””â”€â”€ 20250720000001-create-ai-query-tables.js     # æŸ¥è¯¢è¡¨
```

---

## ğŸ”Œ APIæ¥å£æ¸…å•

### 1. æ¨¡å‹ç®¡ç†API

```typescript
GET    /api/ai/models                    # è·å–æ¨¡å‹åˆ—è¡¨
POST   /api/ai/models                    # åˆ›å»ºæ¨¡å‹
GET    /api/ai/models/:id                # è·å–æ¨¡å‹è¯¦æƒ…
PUT    /api/ai/models/:id                # æ›´æ–°æ¨¡å‹
DELETE /api/ai/models/:id                # åˆ é™¤æ¨¡å‹
GET    /api/ai/models/default            # è·å–é»˜è®¤æ¨¡å‹
POST   /api/ai/models/default            # è®¾ç½®é»˜è®¤æ¨¡å‹
GET    /api/ai/models/:id/capabilities/:capability # æ£€æŸ¥æ¨¡å‹èƒ½åŠ›
GET    /api/ai/models/:id/billing        # è·å–æ¨¡å‹è®¡è´¹
POST   /api/ai/models/:id/billing        # åˆ›å»ºè®¡è´¹è§„åˆ™
```

### 2. ä¼šè¯ç®¡ç†API

```typescript
GET    /api/ai/conversations             # è·å–ä¼šè¯åˆ—è¡¨
POST   /api/ai/conversations             # åˆ›å»ºä¼šè¯
GET    /api/ai/conversations/:id         # è·å–ä¼šè¯è¯¦æƒ…
PUT    /api/ai/conversations/:id         # æ›´æ–°ä¼šè¯
DELETE /api/ai/conversations/:id         # åˆ é™¤ä¼šè¯
GET    /api/ai/conversations/:id/messages # è·å–ä¼šè¯æ¶ˆæ¯
POST   /api/ai/conversations/:id/messages # å‘é€æ¶ˆæ¯
```

### 3. AIåŠŸèƒ½API

```typescript
GET    /api/ai/stats                     # è·å–AIç»Ÿè®¡
POST   /api/ai/query                     # AIæŸ¥è¯¢
GET    /api/ai/shortcuts                 # è·å–å¿«æ·æ–¹å¼
POST   /api/ai/shortcuts                 # åˆ›å»ºå¿«æ·æ–¹å¼
GET    /api/ai/memories                  # è·å–è®°å¿†
POST   /api/ai/memories                  # åˆ›å»ºè®°å¿†
GET    /api/ai/analytics                 # AIåˆ†æ
POST   /api/ai/smart-assign              # æ™ºèƒ½åˆ†é…
```

### 4. æµå¼API

```typescript
POST   /api/ai/conversations/:id/messages # æ”¯æŒæµå¼å“åº”
```

---

## ğŸš€ åŠŸèƒ½ç‰¹æ€§åˆ—è¡¨

### 1. æ ¸å¿ƒäº¤äº’ç‰¹æ€§

#### ğŸ¯ æ™ºèƒ½å¯¹è¯
- **å¤šè½®å¯¹è¯æ”¯æŒ**: æ”¯æŒ20è½®æ·±åº¦å¯¹è¯
- **ä¸Šä¸‹æ–‡è®°å¿†**: åŸºäºå‘é‡åµŒå…¥çš„è¯­ä¹‰è®°å¿†
- **è§’è‰²åˆ‡æ¢**: æ”¯æŒä¸“å®¶ã€åŠ©æ‰‹ã€åˆ†æå‘˜ç­‰è§’è‰²
- **æµå¼å“åº”**: å®æ—¶æµå¼è¾“å‡ºï¼Œæå‡ç”¨æˆ·ä½“éªŒ

#### ğŸ› ï¸ å·¥å…·è°ƒç”¨
- **æ•°æ®åº“æŸ¥è¯¢**: æ”¯æŒä»»æ„SQLæŸ¥è¯¢å’Œæ•°æ®ç»Ÿè®¡
- **é¡µé¢æ“ä½œ**: æ™ºèƒ½å¯¼èˆªã€è¡¨å•å¡«å†™ã€æˆªå›¾åˆ†æ
- **å·¥ä½œæµè‡ªåŠ¨åŒ–**: æ´»åŠ¨ç­–åˆ’ã€æ•°æ®å¯¼å…¥ã€æŠ¥å‘Šç”Ÿæˆ
- **ç»„ä»¶æ¸²æŸ“**: åŠ¨æ€æ¸²æŸ“å›¾è¡¨ã€è¡¨æ ¼ã€å¾…åŠäº‹é¡¹

#### ğŸ¨ ç”¨æˆ·ç•Œé¢
- **åŒæ¨¡å¼å¸ƒå±€**: ä¾§è¾¹æ  + å…¨å±æ¨¡å¼
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- **ä¸»é¢˜å®šåˆ¶**: æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢
- **å¿«æ·æ“ä½œ**: é¢„è®¾å¿«æ·æ–¹å¼å’Œæ¨¡æ¿

### 2. é«˜çº§åŠŸèƒ½ç‰¹æ€§

#### ğŸ§  æ™ºèƒ½åˆ†æ
- **æ•°æ®å¯è§†åŒ–**: è‡ªåŠ¨ç”Ÿæˆå›¾è¡¨å’ŒæŠ¥å‘Š
- **è¶‹åŠ¿é¢„æµ‹**: åŸºäºå†å²æ•°æ®çš„è¶‹åŠ¿åˆ†æ
- **å¼‚å¸¸æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ«æ•°æ®å¼‚å¸¸
- **æ™ºèƒ½æ¨è**: åŸºäºç”¨æˆ·è¡Œä¸ºçš„ä¸ªæ€§åŒ–æ¨è

#### ğŸ”„ å·¥ä½œæµè‡ªåŠ¨åŒ–
- **æ´»åŠ¨ç­–åˆ’**: è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„æ´»åŠ¨æ–¹æ¡ˆ
- **æ•°æ®å¯¼å…¥**: æ™ºèƒ½è¯†åˆ«å’Œå¯¼å…¥å„ç±»æ•°æ®
- **æŠ¥å‘Šç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆå„ç±»ç®¡ç†æŠ¥å‘Š
- **ä»»åŠ¡ç®¡ç†**: æ™ºèƒ½åˆ›å»ºå’Œè·Ÿè¸ªå¾…åŠäº‹é¡¹

#### ğŸ“± ç§»åŠ¨ç«¯æ”¯æŒ
- **ç§»åŠ¨ç«¯ä¼˜åŒ–**: ä¸“é—¨çš„ç§»åŠ¨ç«¯AIç•Œé¢
- **è¯­éŸ³äº¤äº’**: è¯­éŸ³è¾“å…¥å’Œè¯­éŸ³è¾“å‡º
- **ç¦»çº¿ç¼“å­˜**: æ”¯æŒç¦»çº¿æ¶ˆæ¯ç¼“å­˜
- **æ¨é€é€šçŸ¥**: é‡è¦æ¶ˆæ¯å®æ—¶æ¨é€

### 3. ç®¡ç†åŠŸèƒ½ç‰¹æ€§

#### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **ä½¿ç”¨é…é¢**: ç”¨æˆ·AIä½¿ç”¨æ¬¡æ•°å’Œæˆæœ¬æ§åˆ¶
- **è¡Œä¸ºå®¡è®¡**: å®Œæ•´çš„ç”¨æˆ·æ“ä½œæ—¥å¿—
- **ä¸ªæ€§åŒ–è®¾ç½®**: ç”¨æˆ·åå¥½å’Œæ¨¡å‹é€‰æ‹©

#### ğŸ“Š ç»Ÿè®¡ç›‘æ§
- **ä½¿ç”¨ç»Ÿè®¡**: è¯¦ç»†çš„AIä½¿ç”¨æ•°æ®åˆ†æ
- **æ€§èƒ½ç›‘æ§**: å®æ—¶æ€§èƒ½æŒ‡æ ‡ç›‘æ§
- **æˆæœ¬åˆ†æ**: AIä½¿ç”¨æˆæœ¬ç»Ÿè®¡å’Œé¢„æµ‹
- **è´¨é‡è¯„ä¼°**: AIå›ç­”è´¨é‡è¯„åˆ†å’Œåé¦ˆ

---

## ğŸ’» æŠ€æœ¯æ ˆæ€»ç»“

### å‰ç«¯æŠ€æœ¯æ ˆ
```typescript
æ¡†æ¶: Vue 3 + TypeScript
æ„å»º: Vite
çŠ¶æ€ç®¡ç†: Pinia
è·¯ç”±: Vue Router
UIç»„ä»¶: Element Plus
æ ·å¼: SCSS + CSS3
HTTPå®¢æˆ·ç«¯: Axios
æµ‹è¯•: Vitest + Playwright
```

### åç«¯æŠ€æœ¯æ ˆ
```typescript
è¿è¡Œæ—¶: Node.js
æ¡†æ¶: Express
è¯­è¨€: TypeScript
ORM: Sequelize
æ•°æ®åº“: MySQL
è®¤è¯: JWT
æ–‡æ¡£: Swagger
æµ‹è¯•: Jest
```

### AIæŠ€æœ¯æ ˆ
```typescript
æ¨¡å‹æ”¯æŒ: OpenAI GPTã€è±†åŒ…ã€Claudeç­‰
å‘é‡åŒ–: åµŒå…¥å‘é‡å­˜å‚¨
å¤šæ¨¡æ€: æ–‡æœ¬ã€å›¾åƒã€è¯­éŸ³å¤„ç†
å·¥å…·è°ƒç”¨: Function Calling
æµå¼å¤„ç†: Server-Sent Events
ç¼“å­˜: Redis + å†…å­˜ç¼“å­˜
```

### å¼€å‘å·¥å…·é“¾
```typescript
ä»£ç è´¨é‡: ESLint + Prettier
ç±»å‹æ£€æŸ¥: TypeScript
APIæ–‡æ¡£: Swagger/OpenAPI
ç‰ˆæœ¬æ§åˆ¶: Git
CI/CD: GitHub Actions
å®¹å™¨åŒ–: Docker
```

---

## ğŸ“ˆ ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    subgraph "å‰ç«¯å±‚"
        A[AIAssistant.vue<br/>ä¸»ç»„ä»¶] --> B[InputArea.vue<br/>è¾“å…¥åŒºåŸŸ]
        A --> C[LeftSidebar.vue<br/>å·¦ä¾§æ ]
        A --> D[RightSidebar.vue<br/>å³ä¾§æ ]
        A --> E[AIStatistics.vue<br/>ç»Ÿè®¡å±•ç¤º]
    end
    
    subgraph "APIå±‚"
        F[ai.controller.ts<br/>ä¸»æ§åˆ¶å™¨] --> G[ai-query.controller.ts<br/>æŸ¥è¯¢æ§åˆ¶å™¨]
        F --> H[ai-stats.controller.ts<br/>ç»Ÿè®¡æ§åˆ¶å™¨]
        F --> I[ai-shortcuts.controller.ts<br/>å¿«æ·æ–¹å¼æ§åˆ¶å™¨]
    end
    
    subgraph "æœåŠ¡å±‚"
        J[ai-conversation.service.ts<br/>ä¼šè¯æœåŠ¡] --> K[ai-memory.service.ts<br/>è®°å¿†æœåŠ¡]
        J --> L[ai-model-config.service.ts<br/>æ¨¡å‹é…ç½®æœåŠ¡]
        M[tool-executor.service.ts<br/>å·¥å…·æ‰§è¡Œå™¨] --> N[database-query.tools<br/>æ•°æ®åº“å·¥å…·]
        M --> O[web-operation.tools<br/>ç½‘é¡µæ“ä½œå·¥å…·]
        M --> P[workflow.tools<br/>å·¥ä½œæµå·¥å…·]
    end
    
    subgraph "æ•°æ®å±‚"
        Q[ai_conversations<br/>ä¼šè¯è¡¨] --> R[ai_messages<br/>æ¶ˆæ¯è¡¨]
        Q --> S[ai_model_config<br/>æ¨¡å‹é…ç½®è¡¨]
        T[ai_memories<br/>è®°å¿†è¡¨] --> U[ai_query_cache<br/>æŸ¥è¯¢ç¼“å­˜è¡¨]
        V[ai_model_usage<br/>æ¨¡å‹ä½¿ç”¨è¡¨] --> W[ai_user_permissions<br/>ç”¨æˆ·æƒé™è¡¨]
    end
    
    A --> F
    F --> J
    F --> M
    J --> Q
    M --> Q
```

---

## ğŸ” åŠŸèƒ½äº®ç‚¹åˆ†æ

### 1. æŠ€æœ¯åˆ›æ–°ç‚¹

#### ğŸ¯ é¡µé¢æ„ŸçŸ¥æŠ€æœ¯
- **æ™ºèƒ½ä¸Šä¸‹æ–‡**: è‡ªåŠ¨è¯†åˆ«å½“å‰é¡µé¢å¹¶æä¾›ç›¸å…³å¸®åŠ©
- **åŠ¨æ€å¯¼èˆª**: åŸºäºç”¨æˆ·æ„å›¾çš„æ™ºèƒ½é¡µé¢è·³è½¬
- **ç¼“å­˜ä¼˜åŒ–**: é¡µé¢ä¸Šä¸‹æ–‡ç¼“å­˜å‡å°‘é‡å¤è®¡ç®—

#### ğŸ”„ å¤šè½®å·¥å…·è°ƒç”¨
- **æ·±åº¦æ€è€ƒ**: æ”¯æŒæœ€å¤š20è½®çš„å¤æ‚å·¥å…·è°ƒç”¨
- **çŠ¶æ€ç®¡ç†**: å®Œæ•´çš„è°ƒç”¨çŠ¶æ€è·Ÿè¸ªå’Œæ¢å¤
- **é”™è¯¯å¤„ç†**: æ™ºèƒ½é”™è¯¯é‡è¯•å’Œé™çº§å¤„ç†

#### ğŸ§  å‘é‡è®°å¿†ç³»ç»Ÿ
- **è¯­ä¹‰æœç´¢**: åŸºäºå‘é‡åµŒå…¥çš„è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢
- **é•¿æœŸè®°å¿†**: é‡è¦ä¿¡æ¯çš„é•¿æœŸå­˜å‚¨å’Œæ£€ç´¢
- **ä¸ªæ€§åŒ–**: åŸºäºç”¨æˆ·è¡Œä¸ºçš„ä¸ªæ€§åŒ–è®°å¿†

### 2. ç”¨æˆ·ä½“éªŒä¼˜åŒ–

#### âš¡ å®æ—¶äº¤äº’
- **æµå¼å“åº”**: å®æ—¶æ˜¾ç¤ºAIæ€è€ƒè¿‡ç¨‹å’Œç»“æœ
- **è¿›åº¦æŒ‡ç¤º**: è¯¦ç»†çš„å·¥å…·è°ƒç”¨è¿›åº¦å±•ç¤º
- **çŠ¶æ€åé¦ˆ**: ä¸°å¯Œçš„è§†è§‰å’Œæ–‡å­—åé¦ˆ

#### ğŸ¨ ç•Œé¢è®¾è®¡
- **å“åº”å¼å¸ƒå±€**: è‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸
- **ä¸»é¢˜å®šåˆ¶**: æ”¯æŒä¸ªæ€§åŒ–ä¸»é¢˜è®¾ç½®
- **åŠ¨ç”»æ•ˆæœ**: æµç•…çš„è¿‡æ¸¡å’Œå¾®äº¤äº’åŠ¨ç”»

#### ğŸ“± ç§»åŠ¨é€‚é…
- **è§¦æ§ä¼˜åŒ–**: ä¸“é—¨çš„ç§»åŠ¨ç«¯äº¤äº’è®¾è®¡
- **è¯­éŸ³æ”¯æŒ**: å®Œæ•´çš„è¯­éŸ³è¾“å…¥è¾“å‡ºåŠŸèƒ½
- **ç¦»çº¿æ”¯æŒ**: ç¦»çº¿æ¶ˆæ¯ç¼“å­˜å’ŒåŒæ­¥

### 3. ç³»ç»Ÿç¨³å®šæ€§

#### ğŸ›¡ï¸ é”™è¯¯å¤„ç†
- **é™çº§æœºåˆ¶**: å¤šå±‚æ¬¡çš„é”™è¯¯é™çº§ç­–ç•¥
- **é‡è¯•æœºåˆ¶**: æ™ºèƒ½çš„é‡è¯•å’Œæ¢å¤æœºåˆ¶
- **ç›‘æ§å‘Šè­¦**: å®Œæ•´çš„é”™è¯¯ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ

#### ğŸ“Š æ€§èƒ½ä¼˜åŒ–
- **ç¼“å­˜ç­–ç•¥**: å¤šçº§ç¼“å­˜æå‡å“åº”é€Ÿåº¦
- **å¹¶å‘æ§åˆ¶**: æ™ºèƒ½çš„å¹¶å‘è¯·æ±‚ç®¡ç†
- **èµ„æºä¼˜åŒ–**: å‰ç«¯èµ„æºæŒ‰éœ€åŠ è½½å’Œä¼˜åŒ–

---

## ğŸ“‹ åŠŸèƒ½å®Œæˆåº¦è¯„ä¼°

### âœ… å·²å®ŒæˆåŠŸèƒ½ (95%)

#### æ ¸å¿ƒåŠŸèƒ½ (100%)
- [x] AIå¯¹è¯äº¤äº’
- [x] å¤šè½®å·¥å…·è°ƒç”¨
- [x] æ•°æ®åº“æŸ¥è¯¢
- [x] é¡µé¢æ“ä½œ
- [x] æµå¼å“åº”
- [x] ä¼šè¯ç®¡ç†
- [x] æ¨¡å‹é…ç½®

#### é«˜çº§åŠŸèƒ½ (90%)
- [x] å‘é‡è®°å¿†ç³»ç»Ÿ
- [x] é¡µé¢æ„ŸçŸ¥
- [x] å·¥ä½œæµè‡ªåŠ¨åŒ–
- [x] æ•°æ®å¯è§†åŒ–
- [x] ç§»åŠ¨ç«¯æ”¯æŒ
- [x] è¯­éŸ³äº¤äº’

#### ç®¡ç†åŠŸèƒ½ (95%)
- [x] ç”¨æˆ·æƒé™ç®¡ç†
- [x] ä½¿ç”¨ç»Ÿè®¡
- [x] æˆæœ¬æ§åˆ¶
- [x] æ€§èƒ½ç›‘æ§
- [x] è´¨é‡è¯„ä¼°

### ğŸš§ å¾…ä¼˜åŒ–åŠŸèƒ½ (5%)

#### æ­£åœ¨ä¼˜åŒ–
- [ ] éƒ¨åˆ†é«˜çº§åˆ†æç®—æ³•ä¼˜åŒ–
- [ ] å¤§è§„æ¨¡æ•°æ®å¤„ç†æ€§èƒ½æå‡
- [ ] å¤šè¯­è¨€æ”¯æŒæ‰©å±•

---

## ğŸ”® æœªæ¥å‘å±•è§„åˆ’

### çŸ­æœŸç›®æ ‡ (1-3ä¸ªæœˆ)
1. **æ€§èƒ½ä¼˜åŒ–**: æå‡å¤§è§„æ¨¡æ•°æ®å¤„ç†èƒ½åŠ›
2. **åŠŸèƒ½æ‰©å±•**: å¢åŠ æ›´å¤šä¸“ä¸šé¢†åŸŸå·¥å…·
3. **ä½“éªŒä¼˜åŒ–**: è¿›ä¸€æ­¥ä¼˜åŒ–ç”¨æˆ·äº¤äº’ä½“éªŒ
4. **ç¨³å®šæ€§**: æå‡ç³»ç»Ÿç¨³å®šæ€§å’Œå¯é æ€§

### ä¸­æœŸç›®æ ‡ (3-6ä¸ªæœˆ)
1. **å¤šæ¨¡æ€å¢å¼º**: å¢å¼ºå›¾åƒå’Œè§†é¢‘å¤„ç†èƒ½åŠ›
2. **æ™ºèƒ½æ¨è**: åŸºäºAIçš„ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ
3. **åä½œåŠŸèƒ½**: å¤šç”¨æˆ·åä½œå’Œå…±äº«åŠŸèƒ½
4. **APIå¼€æ”¾**: å¼€æ”¾APIä¾›ç¬¬ä¸‰æ–¹é›†æˆ

### é•¿æœŸç›®æ ‡ (6-12ä¸ªæœˆ)
1. **AGIé›†æˆ**: é›†æˆæ›´å…ˆè¿›çš„é€šç”¨äººå·¥æ™ºèƒ½
2. **äº‘ç«¯éƒ¨ç½²**: æ”¯æŒäº‘ç«¯éƒ¨ç½²å’Œå¼¹æ€§æ‰©å±•
3. **è¡Œä¸šå®šåˆ¶**: é’ˆå¯¹ä¸åŒæ•™è‚²åœºæ™¯çš„å®šåˆ¶åŒ–
4. **ç”Ÿæ€å»ºè®¾**: æ„å»ºå®Œæ•´çš„AIæ•™è‚²ç”Ÿæ€

---

## ğŸ“Š æ€»ç»“

å¹¼å„¿å›­ç®¡ç†ç³»ç»Ÿçš„AIåŠ©æ‰‹åŠŸèƒ½æ˜¯ä¸€ä¸ª**æŠ€æœ¯å…ˆè¿›ã€åŠŸèƒ½å®Œæ•´ã€æ¶æ„åˆç†**çš„æ™ºèƒ½åŒ–è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡æœ¬æ¬¡å…¨é¢æ‰«æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š

### ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿
1. **æŠ€æœ¯æ ˆç°ä»£åŒ–**: é‡‡ç”¨æœ€æ–°çš„å‰åç«¯æŠ€æœ¯æ ˆ
2. **æ¶æ„è®¾è®¡åˆç†**: åˆ†å±‚æ¸…æ™°ï¼Œæ¨¡å—åŒ–ç¨‹åº¦é«˜
3. **åŠŸèƒ½è¦†ç›–å…¨é¢**: ä»åŸºç¡€å¯¹è¯åˆ°é«˜çº§åˆ†æçš„å®Œæ•´è¦†ç›–
4. **ç”¨æˆ·ä½“éªŒä¼˜ç§€**: å“åº”