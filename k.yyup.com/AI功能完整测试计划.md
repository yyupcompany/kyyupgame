# 🧪 AI功能完整测试计划

**测试时间**: 2026-01-03
**测试方式**: MCP浏览器自动化测试
**测试目标**: 验证所有AI功能在统一认证架构下正常工作

---

## 📋 测试前置准备

### 1. 快捷登录凭据

| 角色 | 用户名/手机号 | 密码 | 用途 |
|------|--------------|------|------|
| Admin | admin | admin123 | 管理员功能测试 |
| 家长 | 13800000001 | 123456 | 家长端AI功能测试 |
| 老师 | teacher1 | 123456 | 老师端AI课程测试 |

### 2. 服务启动检查

```bash
# 检查后端服务
curl http://localhost:3000/api/health

# 检查前端服务
curl http://localhost:5173

# 检查统一认证系统
curl http://localhost:3001/api/v1/ai/bridge/health
```

---

## 🎯 测试场景矩阵

### Admin角色测试场景

#### 场景1: AI中心 - 模型管理
- **路由**: `/ai-center`
- **功能**:
  - 查看AI模型列表
  - 模型配置管理
  - 查看用量统计
- **验证点**:
  - ✅ 模型列表正确显示
  - ✅ 配置可以保存
  - ✅ 统计数据正确

#### 场景2: 活动中心 - AI活动分析
- **路由**: `/centers/activity-center`
- **功能**:
  - AI生成活动方案
  - 智能活动推荐
  - 活动效果预测
- **验证点**:
  - ✅ AI生成按钮可用
  - ✅ 生成结果正确显示
  - ✅ 控制台无错误

#### 场景3: 新媒体中心 - AI内容生成
- **路由**: `/principal/media-center`
- **功能**:
  - AI文案生成
  - AI海报生成
  - AI视频脚本
  - AI语音合成
- **验证点**:
  - ✅ 文案生成功能正常
  - ✅ 海报生成正常
  - ✅ 脚本生成正常
  - ✅ 语音合成正常

#### 场景4: AI计费中心
- **路由**: `/centers/ai-billing-center`
- **功能**:
  - 查看AI用量统计
  - 查看费用明细
- **验证点**:
  - ✅ 用量数据正确显示
  - ✅ 费用计算正确

### 家长端测试场景

#### 场景5: AI测评报告生成
- **路由**: `/parent-center/assessment/report`
- **功能**:
  - 选择测评记录
  - AI生成专业报告
  - 查看成长建议
- **验证点**:
  - ✅ 报告生成成功
  - ✅ 内容格式正确
  - ✅ 成长建议合理

#### 场景6: AI育儿助手
- **路由**: `/parent-center/ai-assistant`
- **功能**:
  - AI育儿咨询
  - 个性化建议
  - 智能问答
- **验证点**:
  - ✅ 对话功能正常
  - ✅ 建议内容合理
  - ✅ 响应及时

#### 场景7: AI智能沟通
- **路由**: `/parent-center/communication/smart-hub`
- **功能**:
  - AI沟通建议
  - 智能回复推荐
- **验证点**:
  - ✅ 建议生成正常
  - ✅ 推荐内容相关

### 老师端测试场景

#### 场景8: AI互动课程生成
- **路由**: `/teacher-center/creative-curriculum`
- **功能**:
  - AI课程规划
  - 自动生成课程内容
  - 生成配套图片
  - 生成课程视频
- **验证点**:
  - ✅ 课程生成成功
  - ✅ 图片生成正常
  - ✅ 内容质量良好
  - ✅ 流式输出正常

#### 场景9: AI客户追踪建议
- **路由**: `/teacher-center/customer-tracking`
- **功能**:
  - AI分析客户状态
  - 生成跟进建议
  - 智能话术推荐
- **验证点**:
  - ✅ 分析结果准确
  - ✅ 建议内容合理
  - ✅ 话术推荐恰当

---

## 🔄 测试执行流程

### 阶段1: Admin角色测试 (5个场景)

```
1. 快捷登录Admin账号
   ↓
2. 进入AI中心
   - 检查模型列表
   - 验证配置功能
   ↓
3. 进入活动中心
   - 点击AI生成活动方案
   - 验证生成结果
   ↓
4. 进入新媒体中心
   - 测试文案生成
   - 测试海报生成
   - 测试视频脚本
   - 测试语音合成
   ↓
5. 进入AI计费中心
   - 查看用量统计
   - 验证费用计算
```

### 阶段2: 家长端测试 (3个场景)

```
1. 快捷登录家长账号
   ↓
2. 进入AI测评报告
   - 选择测评记录
   - 点击生成报告
   - 验证报告内容
   ↓
3. 进入AI育儿助手
   - 发送育儿咨询
   - 验证AI回复
   ↓
4. 进入AI智能沟通
   - 查看沟通建议
   - 验证推荐内容
```

### 阶段3: 老师端测试 (2个场景)

```
1. 快捷登录老师账号
   ↓
2. 进入AI互动课程
   - 输入课程需求
   - 点击生成课程
   - 验证生成结果
   - 检查图片生成
   - 检查流式输出
   ↓
3. 进入客户追踪
   - 选择客户
   - 查看AI分析
   - 验证跟进建议
```

---

## ✅ 验证标准

### 功能验证

| 项目 | 标准 | 说明 |
|------|------|------|
| AI响应 | < 30秒 | 正常情况下的响应时间 |
| 成功率 | > 95% | AI调用成功率 |
| 内容质量 | 合理有效 | 生成内容符合预期 |
| 错误处理 | 友好提示 | 失败时有明确提示 |

### 技术验证

| 项目 | 标准 | 说明 |
|------|------|------|
| 控制台错误 | 0 | 无严重错误 |
| 网络请求 | 正常 | 无404/500错误 |
| 统一认证 | 正确路由 | 租户环境使用统一认证 |
| 用量统计 | 正常记录 | AI调用被正确统计 |

---

## 📊 测试结果记录

### 场景测试记录表

| 场景ID | 场景名称 | 测试时间 | 测试结果 | 问题记录 | 备注 |
|--------|---------|---------|---------|---------|------|
| ADMIN-001 | AI中心模型管理 | | ⏳ | | |
| ADMIN-002 | 活动中心AI分析 | | ⏳ | | |
| ADMIN-003 | 新媒体中心AI | | ⏳ | | |
| ADMIN-004 | AI计费中心 | | ⏳ | | |
| PARENT-001 | AI测评报告 | | ⏳ | | |
| PARENT-002 | AI育儿助手 | | ⏳ | | |
| PARENT-003 | AI智能沟通 | | ⏳ | | |
| TEACHER-001 | AI互动课程 | | ⏳ | | |
| TEACHER-002 | AI客户追踪 | | ⏳ | | |

---

## 🚨 问题处理流程

### 发现问题时

1. **截图保存**: 保存错误界面截图
2. **日志记录**: 复制控制台错误日志
3. **网络请求**: 记录失败的API请求
4. **环境信息**: 记录HOSTNAME和环境变量
5. **问题分级**:
   - P0: 阻塞性错误，无法继续
   - P1: 严重功能缺陷
   - P2: 一般问题
   - P3: 优化建议

---

## 📝 测试完成清单

- [ ] Admin角色5个场景全部测试完成
- [ ] 家长端3个场景全部测试完成
- [ ] 老师端2个场景全部测试完成
- [ ] 所有控制台无严重错误
- [ ] 所有AI功能响应正常
- [ ] 统一认证路由正确
- [ ] 用量统计正常记录
- [ ] 测试报告已生成

---

**测试负责人**: Claude Code Agent
**测试工具**: Playwright MCP Browser
**测试环境**: Local Development (HOSTNAME=localhost)
