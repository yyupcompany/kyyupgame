<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ¬åœ°å­˜å‚¨ä¿®å¤æ¼”ç¤º</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 40px;
            background: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 { color: #333; }
        .success { background: #d4edda; color: #155724; padding: 15px; border-radius: 6px; margin: 10px 0; }
        .info { background: #d1ecf1; color: #0c5460; padding: 15px; border-radius: 6px; margin: 10px 0; }
        button {
            background: #007AFF;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        button:hover { background: #0056CC; }
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .todolist-display {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .task-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .task-item:last-child { border-bottom: none; }
        .task-checkbox {
            margin-right: 12px;
            width: 18px;
            height: 18px;
        }
        .task-content { flex: 1; }
        .task-title { font-weight: 500; color: #2d3748; }
        .task-desc { font-size: 0.9em; color: #666; margin-top: 4px; }
        .priority-high { border-left: 4px solid #e53e3e; }
        .priority-medium { border-left: 4px solid #f6ad55; }
        .priority-low { border-left: 4px solid #68d391; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ› ï¸ æœ¬åœ°å­˜å‚¨é—®é¢˜ä¿®å¤æ¼”ç¤º</h1>
        
        <div class="success">
            <strong>âœ… ä¿®å¤å®Œæˆï¼</strong> AIåŠ©æ‰‹çš„TodoListæœ¬åœ°å­˜å‚¨åŠŸèƒ½å·²ç»ä¿®å¤å¹¶å‡çº§ã€‚
        </div>

        <div class="demo-section">
            <h2>ğŸ¯ é—®é¢˜è§£å†³æ–¹æ¡ˆ</h2>
            <div class="info">
                <strong>é—®é¢˜åŸå› ï¼š</strong> AIè°ƒç”¨å·¥å…·æ—¶å‚æ•°æ ¼å¼ä¸åŒ¹é…
                <br><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> å¢å¼ºåç«¯å‚æ•°å…¼å®¹æ€§ï¼Œæ”¯æŒå¤šç§å‚æ•°æ ¼å¼
            </div>
            
            <h3>ğŸ“‹ ä¿®å¤å†…å®¹ï¼š</h3>
            <ul>
                <li>âœ… ä¿®å¤ <code>analyze_task_complexity</code> å·¥å…·çš„å‚æ•°è§£æ</li>
                <li>âœ… ä¿®å¤ <code>create_todo_list</code> å·¥å…·çš„å‚æ•°å¤„ç†</li>
                <li>âœ… æ·»åŠ æ™ºèƒ½ä»»åŠ¡åˆ†è§£ç®—æ³•</li>
                <li>âœ… å¢å¼ºæœ¬åœ°å­˜å‚¨é›†æˆ</li>
            </ul>
        </div>

        <div class="demo-section">
            <h2>ğŸ§ª åŠŸèƒ½æµ‹è¯•</h2>
            <button onclick="simulateAITodoCreation()">æ¨¡æ‹ŸAIåˆ›å»ºTodoList</button>
            <button onclick="showStoredTodoLists()">æŸ¥çœ‹æœ¬åœ°å­˜å‚¨</button>
            <button onclick="updateTaskStatus()">æ›´æ–°ä»»åŠ¡çŠ¶æ€</button>
            <button onclick="clearAllTodos()">æ¸…ç©ºæµ‹è¯•æ•°æ®</button>
            
            <div id="demo-output"></div>
        </div>

        <div class="demo-section">
            <h2>ğŸ“– ä½¿ç”¨è¯´æ˜</h2>
            <div class="info">
                <strong>AIåŠ©æ‰‹ç°åœ¨æ”¯æŒï¼š</strong>
                <ul>
                    <li>ğŸ¯ æ™ºèƒ½è¯†åˆ«å¤æ‚ä»»åŠ¡ï¼ˆå¦‚"å¸®æˆ‘åˆ›å»ºæ•™å¸ˆèŠ‚æ´»åŠ¨å¾…åŠæ¸…å•"ï¼‰</li>
                    <li>ğŸ“‹ è‡ªåŠ¨ç”Ÿæˆç»“æ„åŒ–TodoList</li>
                    <li>ğŸ’¾ æœ¬åœ°æµè§ˆå™¨å­˜å‚¨ï¼ˆ24å°æ—¶è‡ªåŠ¨è¿‡æœŸï¼‰</li>
                    <li>âœ… ä»»åŠ¡çŠ¶æ€æ›´æ–°å’Œè¿›åº¦è·Ÿè¸ª</li>
                    <li>ğŸ”„ è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ•°æ®</li>
                </ul>
                
                <strong>æµ‹è¯•æ–¹æ³•ï¼š</strong>
                <ol>
                    <li>åœ¨AIåŠ©æ‰‹ä¸­è¾“å…¥å¤æ‚ä»»åŠ¡ï¼ˆå¦‚"ç­–åˆ’ä¸€ä¸ªäº²å­è¿åŠ¨ä¼š"ï¼‰</li>
                    <li>AIä¼šè‡ªåŠ¨åˆ†æå¤æ‚åº¦å¹¶åˆ›å»ºTodoList</li>
                    <li>è®¿é—® <a href="/ai-todolist-demo.html" target="_blank">TodoListç®¡ç†é¡µé¢</a> æŸ¥çœ‹ç»“æœ</li>
                    <li>å¯ä»¥é€šè¿‡"XXå·²å®Œæˆ"æ¥æ›´æ–°ä»»åŠ¡çŠ¶æ€</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸAIåˆ›å»ºTodoListçš„è¿‡ç¨‹
        function simulateAITodoCreation() {
            const output = document.getElementById('demo-output');
            
            // æ¨¡æ‹Ÿåç«¯è¿”å›çš„storage_instruction
            const storageInstruction = {
                key: 'ai_todolist_demo_' + Date.now(),
                action: 'save_to_localStorage',
                data: {
                    id: 'demo_' + Date.now(),
                    title: 'æ•™å¸ˆèŠ‚æ„Ÿè°¢æ´»åŠ¨ç­¹å¤‡',
                    description: 'ä¸ºæ•™å¸ˆèŠ‚æ´»åŠ¨åˆ¶å®šè¯¦ç»†çš„æ‰§è¡Œè®¡åˆ’',
                    category: 'æ´»åŠ¨ç­–åˆ’',
                    status: 'active',
                    createdAt: new Date().toISOString(),
                    tasks: [
                        {
                            id: 'task_1',
                            title: 'æ´»åŠ¨ç­–åˆ’',
                            description: 'ç¡®å®šæ´»åŠ¨ä¸»é¢˜ã€å½¢å¼ã€æ—¶é—´ã€åœ°ç‚¹',
                            priority: 'high',
                            status: 'pending',
                            estimatedTime: '120åˆ†é’Ÿ'
                        },
                        {
                            id: 'task_2',
                            title: 'ç‰©æ–™å‡†å¤‡',
                            description: 'é‡‡è´­æ‰€éœ€ææ–™å’Œè£…é¥°ç”¨å“',
                            priority: 'medium',
                            status: 'pending',
                            estimatedTime: '90åˆ†é’Ÿ'
                        },
                        {
                            id: 'task_3',
                            title: 'äººå‘˜åè°ƒ',
                            description: 'è”ç³»ç›¸å…³äººå‘˜ï¼Œå®‰æ’åˆ†å·¥',
                            priority: 'medium',
                            status: 'pending',
                            estimatedTime: '60åˆ†é’Ÿ'
                        },
                        {
                            id: 'task_4',
                            title: 'å®£ä¼ é€šçŸ¥',
                            description: 'å‘å¸ƒæ´»åŠ¨é€šçŸ¥ï¼Œé‚€è¯·å‚ä¸è€…',
                            priority: 'medium',
                            status: 'pending',
                            estimatedTime: '45åˆ†é’Ÿ'
                        },
                        {
                            id: 'task_5',
                            title: 'æ´»åŠ¨æ‰§è¡Œ',
                            description: 'ç°åœºå¸ƒç½®å’Œæ´»åŠ¨å¼€å±•',
                            priority: 'high',
                            status: 'pending',
                            estimatedTime: '180åˆ†é’Ÿ'
                        },
                        {
                            id: 'task_6',
                            title: 'åç»­è·Ÿè¿›',
                            description: 'æ´»åŠ¨æ€»ç»“å’Œåé¦ˆæ”¶é›†',
                            priority: 'low',
                            status: 'pending',
                            estimatedTime: '30åˆ†é’Ÿ'
                        }
                    ]
                },
                expires: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString()
            };

            // æ¨¡æ‹ŸhandleLocalStorageå‡½æ•°
            try {
                const storageData = {
                    ...storageInstruction.data,
                    createdAt: new Date().toISOString(),
                    expiresAt: storageInstruction.expires
                };
                
                localStorage.setItem(storageInstruction.key, JSON.stringify(storageData));
                
                output.innerHTML = `
                    <div class="success">
                        âœ… <strong>TodoListåˆ›å»ºæˆåŠŸï¼</strong><br>
                        ğŸ“‹ æ ‡é¢˜: ${storageData.title}<br>
                        ğŸ“Š ä»»åŠ¡æ•°é‡: ${storageData.tasks.length}<br>
                        ğŸ’¾ å­˜å‚¨é”®: ${storageInstruction.key}<br>
                        â° è¿‡æœŸæ—¶é—´: 24å°æ—¶å
                    </div>
                    ${renderTodoList(storageData)}
                `;
            } catch (error) {
                output.innerHTML = `<div style="color: red;">âŒ åˆ›å»ºå¤±è´¥: ${error.message}</div>`;
            }
        }

        // æ˜¾ç¤ºæœ¬åœ°å­˜å‚¨çš„TodoList
        function showStoredTodoLists() {
            const output = document.getElementById('demo-output');
            const keys = Object.keys(localStorage).filter(key => key.startsWith('ai_todolist_'));
            
            if (keys.length === 0) {
                output.innerHTML = '<div class="info">ğŸ“­ æœ¬åœ°å­˜å‚¨ä¸­æ²¡æœ‰TodoList</div>';
                return;
            }

            let html = `<div class="success">ğŸ“Š æ‰¾åˆ° ${keys.length} ä¸ªTodoList</div>`;
            
            keys.forEach((key, index) => {
                try {
                    const data = JSON.parse(localStorage.getItem(key));
                    html += `
                        <div class="todolist-display">
                            <h3>${index + 1}. ${data.title}</h3>
                            <p><strong>å­˜å‚¨é”®:</strong> ${key}</p>
                            <p><strong>åˆ›å»ºæ—¶é—´:</strong> ${new Date(data.createdAt).toLocaleString()}</p>
                            ${renderTodoList(data)}
                        </div>
                    `;
                } catch (e) {
                    html += `<div style="color: red;">è§£æTodoListå¤±è´¥: ${key}</div>`;
                }
            });
            
            output.innerHTML = html;
        }

        // æ¸²æŸ“TodoList
        function renderTodoList(todoData) {
            if (!todoData.tasks || todoData.tasks.length === 0) {
                return '<p>æ— ä»»åŠ¡</p>';
            }

            let html = '<div>';
            todoData.tasks.forEach(task => {
                const priorityClass = `priority-${task.priority}`;
                const checked = task.status === 'completed' ? 'checked' : '';
                html += `
                    <div class="task-item ${priorityClass}">
                        <input type="checkbox" class="task-checkbox" ${checked} 
                               onchange="toggleTaskStatus('${todoData.id}', '${task.id}', this.checked)">
                        <div class="task-content">
                            <div class="task-title">${task.title}</div>
                            <div class="task-desc">${task.description}</div>
                            <small>ğŸ·ï¸ ${task.priority} ä¼˜å…ˆçº§ | â±ï¸ ${task.estimatedTime}</small>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            return html;
        }

        // åˆ‡æ¢ä»»åŠ¡çŠ¶æ€
        function toggleTaskStatus(todoId, taskId, completed) {
            const keys = Object.keys(localStorage).filter(key => key.startsWith('ai_todolist_'));
            
            keys.forEach(key => {
                try {
                    const data = JSON.parse(localStorage.getItem(key));
                    if (data.id === todoId) {
                        const task = data.tasks.find(t => t.id === taskId);
                        if (task) {
                            task.status = completed ? 'completed' : 'pending';
                            task.completedAt = completed ? new Date().toISOString() : null;
                            data.updatedAt = new Date().toISOString();
                            localStorage.setItem(key, JSON.stringify(data));
                            console.log(`âœ… ä»»åŠ¡çŠ¶æ€å·²æ›´æ–°: ${task.title} -> ${task.status}`);
                        }
                    }
                } catch (e) {
                    console.error('æ›´æ–°ä»»åŠ¡çŠ¶æ€å¤±è´¥:', e);
                }
            });
        }

        // æ›´æ–°ä»»åŠ¡çŠ¶æ€ï¼ˆç¤ºä¾‹ï¼‰
        function updateTaskStatus() {
            const keys = Object.keys(localStorage).filter(key => key.startsWith('ai_todolist_'));
            
            if (keys.length === 0) {
                document.getElementById('demo-output').innerHTML = 
                    '<div class="info">âš ï¸ è¯·å…ˆåˆ›å»ºTodoList</div>';
                return;
            }

            // æ›´æ–°ç¬¬ä¸€ä¸ªTodoListçš„ç¬¬ä¸€ä¸ªä»»åŠ¡ä¸ºå·²å®Œæˆ
            const key = keys[0];
            try {
                const data = JSON.parse(localStorage.getItem(key));
                if (data.tasks && data.tasks.length > 0) {
                    data.tasks[0].status = 'completed';
                    data.tasks[0].completedAt = new Date().toISOString();
                    data.updatedAt = new Date().toISOString();
                    localStorage.setItem(key, JSON.stringify(data));
                    
                    document.getElementById('demo-output').innerHTML = `
                        <div class="success">
                            âœ… ä»»åŠ¡çŠ¶æ€å·²æ›´æ–°: "${data.tasks[0].title}" -> å·²å®Œæˆ
                        </div>
                        ${renderTodoList(data)}
                    `;
                }
            } catch (e) {
                document.getElementById('demo-output').innerHTML = 
                    `<div style="color: red;">âŒ æ›´æ–°å¤±è´¥: ${e.message}</div>`;
            }
        }

        // æ¸…ç©ºæ‰€æœ‰æµ‹è¯•æ•°æ®
        function clearAllTodos() {
            const keys = Object.keys(localStorage).filter(key => key.startsWith('ai_todolist_'));
            keys.forEach(key => localStorage.removeItem(key));
            
            document.getElementById('demo-output').innerHTML = `
                <div class="success">ğŸ—‘ï¸ å·²æ¸…ç©º ${keys.length} ä¸ªTodoList</div>
            `;
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºå½“å‰çŠ¶æ€
        window.onload = function() {
            showStoredTodoLists();
        };
    </script>
</body>
</html>


