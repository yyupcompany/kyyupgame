<!--
  æ¬¢è¿æ¶ˆæ¯ç»„ä»¶
  ä» AIAssistant.vue ç¬¬70-85è¡Œæ¨¡æ¿æå–
-->

<template>
  <div class="message-item assistant welcome-message">
    <div class="message-avatar">
      <el-icon><Service /></el-icon>
    </div>
    <div class="message-content welcome-card">
      <div class="message-text">
        <div class="welcome-title">
          <el-icon class="welcome-icon"><Service /></el-icon>
          æ¬¢è¿ä½¿ç”¨AIæ¡Œé¢åŠ©æ‰‹ï¼
        </div>
        <div class="welcome-subtitle">
          æ‚¨å¯ä»¥é€šè¿‡å¯¹è¯æˆ–ç‚¹å‡»ä¸‹æ–¹å»ºè®®å¿«é€Ÿå¼€å§‹ã€‚
        </div>
      </div>
      <div class="suggestion-buttons">
        <!-- åŸæœ‰åŠŸèƒ½æç¤ºè¯ -->
        <button
          class="suggestion-btn"
          @click="handleSuggestion('æ‰“å¼€æ‹›ç”Ÿä¸­å¿ƒå¹¶è¾“å…¥ä½ å¥½')"
          :title="'å¿«é€Ÿå¯¼èˆªåˆ°æ‹›ç”Ÿä¸­å¿ƒ'"
          @mousedown="() => console.log('ğŸ”¥ [æŒ‰é’®æµ‹è¯•] é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶è§¦å‘')"
          @mouseup="() => console.log('ğŸ”¥ [æŒ‰é’®æµ‹è¯•] é¼ æ ‡é‡Šæ”¾äº‹ä»¶è§¦å‘')"
        >
          <el-icon><School /></el-icon>
          æ‰“å¼€æ‹›ç”Ÿä¸­å¿ƒå¹¶è¾“å…¥"ä½ å¥½"
        </button>
        <button
          class="suggestion-btn"
          @click="handleSuggestion('åšä¸€æ¬¡æ´»åŠ¨åˆ†æï¼šè¿‘æœŸæ´»åŠ¨')"
          :title="'åˆ†æè¿‘æœŸæ´»åŠ¨æ•°æ®'"
        >
          <el-icon><TrendCharts /></el-icon>
          åšä¸€æ¬¡æ´»åŠ¨åˆ†æ Â· è¿‘æœŸæ´»åŠ¨
        </button>
        <button
          class="suggestion-btn"
          @click="handleSuggestion('ç®¡ç†æ‹›ç”Ÿå®£å‘æ–‡æ¡ˆ')"
          :title="'ç®¡ç†æ‹›ç”Ÿå®£ä¼ æ–‡æ¡ˆ'"
        >
          <el-icon><EditPen /></el-icon>
          ç®¡ç†æ‹›ç”Ÿå®£å‘æ–‡æ¡ˆ
        </button>

        <!-- HTMLé¢„è§ˆåŠŸèƒ½æç¤ºè¯ -->
        <button
          class="suggestion-btn html-preview-btn"
          @click="handleSuggestion('åˆ›å»ºä¸€ä¸ªè®¤è¯†æ•°å­—1-10çš„äº’åŠ¨æ¸¸æˆ')"
          :title="'ç”Ÿæˆäº’åŠ¨æ•°å­—å­¦ä¹ æ¸¸æˆ'"
        >
          <el-icon><Histogram /></el-icon>
          åˆ›å»ºæ•°å­—å­¦ä¹ æ¸¸æˆ Â· 1-10
        </button>
        <button
          class="suggestion-btn html-preview-btn"
          @click="handleSuggestion('ç”Ÿæˆä¸€ä¸ªè®¤è¯†å¸¸è§åŠ¨ç‰©çš„äº’åŠ¨è¯¾ç¨‹')"
          :title="'ç”ŸæˆåŠ¨ç‰©è®¤çŸ¥äº’åŠ¨è¯¾ç¨‹'"
        >
          <el-icon><Orange /></el-icon>
          ç”ŸæˆåŠ¨ç‰©è®¤çŸ¥è¯¾ç¨‹
        </button>
        <button
          class="suggestion-btn html-preview-btn"
          @click="handleSuggestion('åˆ¶ä½œä¸€ä¸ªå­¦ä¹ åŸºæœ¬å½¢çŠ¶çš„ç½‘é¡µæ¸¸æˆ')"
          :title="'ç”Ÿæˆå½¢çŠ¶å­¦ä¹ äº’åŠ¨æ¸¸æˆ'"
        >
          <el-icon><Grid /></el-icon>
          åˆ¶ä½œå½¢çŠ¶å­¦ä¹ æ¸¸æˆ
        </button>
      </div>
      <div class="welcome-tips">
        <div class="tip-item">
          <el-icon><ChatDotRound /></el-icon>
          <span>æ”¯æŒè‡ªç„¶è¯­è¨€å¯¹è¯</span>
        </div>
        <div class="tip-item">
          <el-icon><Tools /></el-icon>
          <span>æ™ºèƒ½å·¥å…·è°ƒç”¨</span>
        </div>
        <div class="tip-item">
          <UnifiedIcon name="microphone" :size="16" />
          <span>è¯­éŸ³è¾“å…¥è¾“å‡º</span>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import {
  Service,
  School,
  TrendCharts,
  EditPen,
  ChatDotRound,
  Tools,
  Microphone,
  Histogram,
  Orange,
  Grid
} from '@element-plus/icons-vue'

// ==================== Emits ====================
interface Emits {
  'suggestion': [text: string]
}

const emit = defineEmits<Emits>()

// ==================== äº‹ä»¶å¤„ç† ====================
const handleSuggestion = (text: string) => {
  console.log('ğŸ” [WelcomeMessage] å»ºè®®æŒ‰é’®ç‚¹å‡»:', text)
  emit('suggestion', text)
}
</script>

<style scoped lang="scss">
// ğŸ¨ å¯¼å…¥ä¸»é¢˜å˜é‡
@import '@/styles/design-tokens.scss';

.welcome-message {
  margin-bottom: var(--text-3xl);

  /* ğŸ¯ æ¬¢è¿æ¶ˆæ¯å®½åº¦æ§åˆ¶ï¼šä½¿ç”¨å“åº”å¼å˜é‡ */
  width: var(--ai-content-width);
  max-width: var(--ai-content-max-width);
  margin: 0 auto var(--text-3xl);

  /* ğŸ”§ é˜²æ­¢ç¼©æ”¾æ—¶å˜å½¢ */
  transform-origin: center center;
  flex-shrink: 0;

  /* ğŸ¨ å¹³æ»‘è¿‡æ¸¡ */
  transition: all var(--ai-transition-normal);
}

.message-item {
  display: flex;
  gap: var(--text-sm);
  margin-bottom: var(--text-lg);
}

.message-item.assistant {
  justify-content: flex-start;
}

.message-avatar {
  width: var(--icon-size); height: var(--icon-size);
  border-radius: var(--radius-full);
  background: var(--el-color-primary-light-9);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  color: var(--el-color-primary);
  font-size: var(--text-xl);
}

.message-content {
  flex: 1;
  min-width: 0;
}

// ğŸ¨ 3ï¸âƒ£ æ¬¢è¿æ¶ˆæ¯å¡ç‰‡ - ä½¿ç”¨ä¸»é¢˜å˜é‡
.welcome-card {
  background: linear-gradient(135deg, var(--ai-welcome-bg-start) 0%, var(--ai-welcome-bg-end) 100%);
  border: var(--border-width-base) solid var(--ai-welcome-border);
  border-radius: var(--text-sm);
  padding: var(--text-3xl);
  box-shadow: 0 2px var(--text-sm) var(--ai-welcome-shadow);
  backdrop-filter: blur(var(--text-2xl)) saturate(180%);
  transition: all var(--ai-transition-normal);
}

.message-text {
  margin-bottom: var(--text-2xl);
}

.welcome-title {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: var(--text-xl);
  font-weight: 600;
  color: var(--el-text-color-primary);
  margin-bottom: var(--spacing-sm);
}

.welcome-icon {
  font-size: var(--text-2xl);
  color: var(--el-color-primary);
}

.welcome-subtitle {
  font-size: var(--text-base);
  color: var(--el-text-color-regular);
  line-height: 1.5;
}

.suggestion-buttons {
  display: flex;
  flex-direction: column;
  gap: var(--text-sm);
  margin-bottom: var(--text-2xl);
}

.suggestion-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--text-sm) var(--text-lg);
  background: var(--el-bg-color);
  border: var(--border-width-base) solid var(--el-border-color-light);
  border-radius: var(--spacing-sm);
  color: var(--el-text-color-primary);
  font-size: var(--text-base);
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
  width: 100%;
}

.suggestion-btn:hover {
  background: var(--el-color-primary-light-9);
  border-color: var(--el-color-primary-light-7);
  color: var(--el-color-primary);
  transform: translateY(-var(--border-width-base));
  box-shadow: 0 var(--spacing-xs) var(--text-sm) var(--shadow-light);
}

.suggestion-btn:active {
  transform: translateY(0);
}

// ğŸ¨ HTMLé¢„è§ˆæŒ‰é’®ç‰¹æ®Šæ ·å¼
.suggestion-btn.html-preview-btn {
  background: linear-gradient(135deg, var(--bg-white)5f5 0%, #ffe9f0 100%);
  border-color: #ffc0cb;
  color: #4a1942; // ğŸ”§ ä¿®å¤ï¼šæ·±ç´«è‰²æ–‡å­—ï¼Œç¡®ä¿åœ¨ç²‰è‰²èƒŒæ™¯ä¸Šæ¸…æ™°å¯è§

  &:hover {
    background: linear-gradient(135deg, #ffe9f0 0%, #ffd6e0 100%);
    border-color: #ff69b4;
    color: #3d0e36; // ğŸ”§ ä¿®å¤ï¼šæ‚¬åœæ—¶æ›´æ·±çš„æ–‡å­—é¢œè‰²

    .el-icon {
      color: #ff1493;
      transform: scale(1.1);
    }
  }

  .el-icon {
    color: #ff69b4;
    transition: all 0.2s;
  }
}

.welcome-tips {
  display: flex;
  gap: var(--text-lg);
  padding-top: var(--text-lg);
  border-top: var(--border-width-base) solid var(--el-border-color-lighter);
}

.tip-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  font-size: var(--text-sm);
  color: var(--el-text-color-regular);
}

.tip-item .el-icon {
  font-size: var(--text-base);
  color: var(--el-color-primary);
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: var(--breakpoint-md)) {
  .welcome-card {
    padding: var(--text-2xl);
  }
  
  .welcome-tips {
    flex-direction: column;
    gap: var(--spacing-sm);
  }
  
  .suggestion-btn {
    padding: var(--spacing-2xl) var(--text-base);
    font-size: var(--text-sm);
  }
}

@media (max-width: var(--breakpoint-sm)) {
  .welcome-card {
    padding: var(--text-lg);
  }
  
  .welcome-title {
    font-size: var(--text-lg);
  }
  
  .welcome-subtitle {
    font-size: var(--text-sm);
  }
}
</style>
