# 移动端任务表单页面

## 概述
基于PC端 `TaskForm.vue` 1:1复制的移动端任务表单页面，使用Vant 4组件库实现移动端优化UI。

## 文件路径
- 主页面：`/client/src/pages/mobile/centers/task-form/index.vue`
- 路由配置：`/client/src/router/mobile-routes.ts` (已添加)
- 访问路径：`/mobile/centers/task-form`

## 功能特性

### ✅ 基础功能
- **任务创建/编辑**：支持新建任务和编辑现有任务
- **表单验证**：完整的表单字段验证机制
- **移动端适配**：使用Vant 4组件库，完美适配移动端交互

### ✅ 表单字段
1. **基本信息**
   - 任务标题（必填）
   - 任务描述（可选，支持字数限制）

2. **任务设置**
   - 优先级（必填）：低/中/高/紧急
   - 状态（必填）：待处理/进行中/已完成/已取消
   - 分配给（可选）：未分配/张老师/李老师/王老师/刘老师/陈老师
   - 截止时间（可选）：日期时间选择器

3. **其他信息**
   - 标签（可选）：支持多个标签，逗号分隔
   - 标签预览：实时显示标签效果

### ✅ 移动端UI组件
- **Vant Field**：表单输入控件
- **Vant Picker**：下拉选择器
- **Vant DateTimePicker**：日期时间选择器
- **Vant Tag**：标签显示
- **Vant Button**：操作按钮
- **Vant Toast**：消息提示
- **Van Popup**：弹窗容器

### ✅ 交互体验
- **表单验证**：实时验证，错误提示
- **加载状态**：创建/编辑时显示loading状态
- **成功提示**：操作成功后显示toast提示
- **自动返回**：保存成功后自动返回任务中心

## 技术实现

### 布局组件
使用 `RoleBasedMobileLayout` 作为基础布局，提供：
- 顶部导航栏
- 返回按钮
- 响应式设计
- 角色权限适配

### API集成
完整集成任务相关API服务：
```typescript
import { createTask, updateTask, getTaskById } from '@/services/task'
```

### 状态管理
使用Vue 3 Composition API：
- `ref`：响应式数据管理
- `computed`：计算属性优化
- `onMounted`：生命周期处理

### 路由集成
- **创建任务**：`/mobile/centers/task-form`
- **编辑任务**：`/mobile/centers/task-form?id={taskId}`
- **返回路径**：`/mobile/centers/task-center`

## 使用方法

### 创建新任务
1. 从任务中心点击"新建任务"按钮
2. 填写必填字段（任务标题、优先级、状态）
3. 可选填写描述、分配人员、截止时间、标签
4. 点击"创建任务"按钮保存

### 编辑现有任务
1. 在任务列表中点击要编辑的任务
2. 系统自动加载任务数据到表单
3. 修改需要更新的字段
4. 点击"更新任务"按钮保存

### 表单验证
- 标题：必填，不能为空
- 优先级：必填，必须选择
- 状态：必填，必须选择
- 其他字段：可选，可留空

## 样式设计

### 移动端优化
- **触摸友好**：所有按钮和交互元素都有足够大的触摸区域
- **固定底部操作栏**：保存和取消按钮固定在底部，便于操作
- **弹窗适配**：选择器弹窗从底部弹出，符合移动端使用习惯
- **响应式布局**：支持手机和平板设备

### 视觉设计
- **分组设计**：表单按功能分组，结构清晰
- **标签预览**：实时显示标签效果
- **加载状态**：loading动画和提示文字
- **错误提示**：toast消息提示

## 权限控制
- **访问权限**：需要登录认证
- **角色限制**：admin、principal、teacher可访问
- **路由守卫**：集成系统权限控制

## 与PC端对比

| 功能 | PC端 | 移动端 | 状态 |
|------|------|--------|------|
| 任务创建 | ✅ | ✅ | 完全一致 |
| 任务编辑 | ✅ | ✅ | 完全一致 |
| 表单字段 | ✅ | ✅ | 完全一致 |
| 表单验证 | ✅ | ✅ | 完全一致 |
| API集成 | ✅ | ✅ | 完全一致 |
| 用户界面 | Element Plus | Vant 4 | 移动端优化 |
| 交互方式 | 鼠标+键盘 | 触摸操作 | 移动端适配 |

## 更新日志
- **2025-11-24**：创建移动端任务表单页面，完成1:1功能复制