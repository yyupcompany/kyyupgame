# 幼儿园招生系统菜单栏权限列表

本文档定义了幼儿园招生系统中各角色的菜单访问权限，作为系统开发和配置的参考依据。

## 1. 系统管理员（Admin）

系统管理员仅负责系统层面的管理工作，不参与具体业务操作。

| 菜单项 | 子菜单 | 权限代码 | 说明 | API支持状态 |
|-------|-------|---------|------|------------|
| **系统概览** | - | `system:dashboard:view` | 系统基本状态和性能监控 | ✅ 已支持 |
| **用户管理** | - | `system:user:manage` | 管理所有用户账号和访问权限 | ✅ 已支持 |
| **角色管理** | - | `system:role:manage` | 设置和分配系统角色 | ✅ 已支持 |
| **权限管理** | - | `system:permission:manage` | 细粒度权限控制 | ✅ 已支持 |
| **系统设置** | - | `system:settings:manage` | 基础配置和参数设置 | ✅ 已支持 |
| **系统日志** | - | `system:log:view` | 操作日志和安全审计 | ✅ 已支持 |
| **数据备份** | - | `system:backup:manage` | 系统备份与恢复 | ✅ 已支持 |
| **消息模板** | - | `system:message:manage` | 系统通知模板配置 | ✅ 已支持 |

## 2. 园长（Principal）

园长负责招生相关的所有业务管理和决策。

| 菜单项 | 子菜单 | 权限代码 | 说明 | API支持状态 |
|-------|-------|---------|------|------------|
| **园长工作台** | - | `principal:dashboard:view` | 招生数据概览 | ✅ 已支持 |
| **招生计划管理** | - | `principal:enrollment-plan:manage` | 制定和监控招生计划 | ✅ 已支持 |
| **招生活动管理** | - | `principal:activity:manage` | 组织和管理招生活动 | ✅ 已支持 |
| **客户池管理** | - | `principal:customer:manage` | 潜在客户管理和分配 | ✅ 已支持 |
| **招生业绩统计** | - | `principal:performance:view` | 招生成果和转化率分析 | ✅ 已支持 |
| **绩效规则配置** | - | `principal:performance-rules:manage` | 设置招生绩效规则 | ✅ 已支持 |
| **海报模板管理** | - | `principal:poster:manage` | 招生宣传海报管理 | ✅ 已支持 |
| | 海报编辑器 | `principal:poster:edit` | 设计和编辑海报模板 | ✅ 已支持 |
| | 海报生成器 | `principal:poster:generate` | 基于模板生成海报 | ✅ 已支持 |
| **营销数据分析** | - | `principal:marketing:analyze` | 各渠道招生效果分析 | ✅ 已支持 |

## 3. 教师（Teacher）

教师负责执行招生任务和客户跟进工作。

| 菜单项 | 子菜单 | 权限代码 | 说明 | API支持状态 |
|-------|-------|---------|------|------------|
| **教师工作台** | - | `teacher:dashboard:view` | 个人招生任务概览 | ✅ 已支持 |
| **招生任务** | - | `teacher:task:view` | 查看分配的招生任务 | ✅ 已支持 |
| **客户跟踪** | - | `teacher:customer:track` | 跟踪潜在招生客户 | ✅ 已支持 |
| **活动参与** | - | `teacher:activity:participate` | 参与招生活动 | ✅ 已支持 |
| **跟进记录** | - | `teacher:followup:manage` | 客户沟通记录 | ✅ 已支持 |
| **业绩查看** | - | `teacher:performance:view` | 个人招生业绩 | ✅ 已支持 |

## 4. 家长（Parent）

家长作为用户端，可查看和操作入园申请相关功能。

| 菜单项 | 子菜单 | 权限代码 | 说明 | API支持状态 |
|-------|-------|---------|------|------------|
| **家长中心** | - | `parent:dashboard:view` | 入园申请进度 | ✅ 已支持 |
| **我的孩子** | - | `parent:child:manage` | 孩子基本信息 | ✅ 已支持 |
| | 孩子详情 | `parent:child:view` | 查看孩子详细信息 | ✅ 已支持 |
| | 编辑信息 | `parent:child:edit` | 编辑孩子基本信息 | ✅ 已支持 |
| **入园申请** | - | `parent:application:manage` | 填写和提交申请 | ✅ 已支持 |
| **招生活动** | - | `parent:activity:view` | 可参与的活动 | ✅ 已支持 |
| **在线咨询** | - | `parent:consultation:manage` | 招生咨询 | ✅ 已支持 |
| **申请结果** | - | `parent:result:view` | 申请状态和通知 | ✅ 已支持 |

## 菜单权限配置说明

1. **权限命名规则**：`角色:模块:操作`
2. **权限继承关系**：上级菜单权限自动包含子菜单权限
3. **权限验证时机**：
   - 菜单渲染时进行权限过滤
   - 路由跳转前进行权限验证
   - API请求时进行后端权限校验

## API支持情况说明

- **系统管理员**：所有菜单项API接口已完全实现，支持用户管理、角色权限配置、系统设置等核心功能
- **园长**：招生相关业务API已全部实现，支持数据看板、招生计划、客户管理、绩效配置等功能
- **教师**：教师工作API已全部实现，支持任务管理、客户跟进、活动参与等功能
- **家长**：家长端API已全部实现，支持孩子管理、入园申请、活动参与等功能

## 技术实现参考

```javascript
// 菜单过滤示例
const filterMenusByPermission = (menus, userPermissions) => {
  return menus.filter(menu => {
    // 无权限要求的菜单默认可访问
    if (!menu.permission) return true;
    
    // 检查权限
    const hasPermission = userPermissions.includes(menu.permission);
    
    // 递归过滤子菜单
    if (menu.children && menu.children.length) {
      menu.children = filterMenusByPermission(menu.children, userPermissions);
      // 如果子菜单为空且当前菜单无权限，则隐藏整个菜单
      return menu.children.length > 0 || hasPermission;
    }
    
    return hasPermission;
  });
};
``` 