<template>
  <UnifiedCenterLayout
    title="æ™ºèƒ½ä¸­å¿ƒ"
    description="è¿™é‡Œæ˜¯äººå·¥æ™ºèƒ½æœåŠ¡çš„ä¸­å¿ƒæ¢çº½ï¼Œæ‚¨å¯ä»¥ç®¡ç†AIæ¨¡å‹ã€æŸ¥çœ‹æ™ºèƒ½åˆ†æã€é…ç½®è‡ªåŠ¨åŒ–å·¥ä½œæµ"
  >
    <div class="center-container ai-center-timeline">

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="main-content">
        <!-- ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ - ä½¿ç”¨ç»Ÿä¸€ç½‘æ ¼ç³»ç»Ÿ -->
        <div class="stats-section">
          <div class="stats-grid-unified">
            <CentersStatCard
              v-for="stat in overviewStats"
              :key="stat.key"
              :title="stat.title"
              :value="stat.value"
              :unit="stat.unit"
              :trend="stat.trend"
              :trend-text="stat.trendText"
              :type="stat.type"
              :icon-name="stat.iconName"
              clickable
              @click="handleStatClick(stat)"
            />
          </div>
        </div>

        <!-- AIåŠŸèƒ½æ¨¡å— -->
        <div class="ai-modules section-spacing">
          <div class="section-header">
            <h3 class="section-title">AIåŠŸèƒ½æ¨¡å—</h3>
            <p class="section-subtitle">æ¢ç´¢å¼ºå¤§çš„äººå·¥æ™ºèƒ½åŠŸèƒ½ï¼Œæå‡å·¥ä½œæ•ˆç‡</p>
          </div>
          <div class="modules-grid">
            <div class="module-card" @click="navigateTo('/ai/query')">
              <div class="module-header">
                <div class="module-icon primary">ğŸ¤–</div>
                <h4 class="module-title">AIæ™ºèƒ½æŸ¥è¯¢</h4>
              </div>
              <p class="module-description">ä½¿ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢ç³»ç»Ÿæ•°æ®ï¼Œè·å¾—æ™ºèƒ½åŒ–çš„åˆ†æç»“æœ</p>
              <div class="module-footer">
                <el-tag size="small" type="primary">æ™ºèƒ½æŸ¥è¯¢</el-tag>
              </div>
            </div>

            <div class="module-card" @click="navigateTo('/ai/analytics')">
              <div class="module-header">
                <div class="module-icon success">ğŸ“Š</div>
                <h4 class="module-title">AIæ•°æ®åˆ†æ</h4>
              </div>
              <p class="module-description">åˆ©ç”¨æœºå™¨å­¦ä¹ ç®—æ³•è¿›è¡Œæ·±åº¦æ•°æ®åˆ†æå’Œé¢„æµ‹</p>
              <div class="module-footer">
                <el-tag size="small" type="success">æ•°æ®åˆ†æ</el-tag>
              </div>
            </div>

            <div class="module-card" @click="navigateTo('/ai/models')">
              <div class="module-header">
                <div class="module-icon warning">ğŸ§ </div>
                <h4 class="module-title">AIæ¨¡å‹ç®¡ç†</h4>
              </div>
              <p class="module-description">ç®¡ç†å’Œé…ç½®å„ç§AIæ¨¡å‹ï¼ŒåŒ…æ‹¬è®­ç»ƒå’Œéƒ¨ç½²</p>
              <div class="module-footer">
                <el-tag size="small" type="warning">æ¨¡å‹ç®¡ç†</el-tag>
              </div>
            </div>

            <div class="module-card" @click="navigateTo('/ai/automation/WorkflowAutomation')">
              <div class="module-header">
                <div class="module-icon info">âš™ï¸</div>
                <h4 class="module-title">AIè‡ªåŠ¨åŒ–</h4>
              </div>
              <p class="module-description">è®¾ç½®æ™ºèƒ½åŒ–å·¥ä½œæµï¼Œè‡ªåŠ¨å¤„ç†é‡å¤æ€§ä»»åŠ¡</p>
              <div class="module-footer">
                <el-tag size="small" type="info">è‡ªåŠ¨åŒ–</el-tag>
              </div>
            </div>

            <div class="module-card" @click="navigateTo('/ai/predictions')">
              <div class="module-header">
                <div class="module-icon danger">ğŸ”®</div>
                <h4 class="module-title">AIé¢„æµ‹åˆ†æ</h4>
              </div>
              <p class="module-description">åŸºäºå†å²æ•°æ®è¿›è¡Œè¶‹åŠ¿é¢„æµ‹å’Œé£é™©è¯„ä¼°</p>
              <div class="module-footer">
                <el-tag size="small" type="danger">é¢„æµ‹åˆ†æ</el-tag>
              </div>
            </div>

            <div class="module-card" @click="navigateTo('/ai/monitoring/AIPerformanceMonitor')">
              <div class="module-header">
                <div class="module-icon primary">ğŸ“ˆ</div>
                <h4 class="module-title">AIæ€§èƒ½ç›‘æ§</h4>
              </div>
              <p class="module-description">å®æ—¶ç›‘æ§AIæœåŠ¡æ€§èƒ½å’Œèµ„æºä½¿ç”¨æƒ…å†µ</p>
              <div class="module-footer">
                <el-tag size="small" type="primary">æ€§èƒ½ç›‘æ§</el-tag>
              </div>
            </div>

            <div class="module-card" @click="navigateTo('/admin/image-replacement')">
              <div class="module-header">
                <div class="module-icon success">ğŸ¨</div>
                <h4 class="module-title">AIè‡ªåŠ¨é…å›¾</h4>
              </div>
              <p class="module-description">ä½¿ç”¨è±†åŒ…æ–‡ç”Ÿå›¾æ¨¡å‹è‡ªåŠ¨ç”Ÿæˆå’Œæ›¿æ¢é¡¹ç›®ä¸­çš„å±•ä½å›¾ç‰‡</p>
              <div class="module-footer">
                <el-tag size="small" type="success">è‡ªåŠ¨é…å›¾</el-tag>
              </div>
            </div>

            <div class="module-card" @click="navigateTo('/ai-center/function-tools')">
              <div class="module-header">
                <div class="module-icon warning">ğŸ”§</div>
                <h4 class="module-title">Function Tools</h4>
              </div>
              <p class="module-description">æ™ºèƒ½å·¥å…·è°ƒç”¨ç³»ç»Ÿï¼Œæ”¯æŒæ•°æ®æŸ¥è¯¢ã€é¡µé¢å¯¼èˆªç­‰å¤šç§åŠŸèƒ½</p>
              <div class="module-footer">
                <el-tag size="small" type="warning">å·¥å…·ç³»ç»Ÿ</el-tag>
              </div>
            </div>

            <div class="module-card" @click="navigateTo('/ai-center/expert-consultation')">
              <div class="module-header">
                <div class="module-icon info">ğŸ‘¥</div>
                <h4 class="module-title">AIä¸“å®¶å’¨è¯¢</h4>
              </div>
              <p class="module-description">å¤šä½AIä¸“å®¶ååŒå’¨è¯¢ï¼Œä¸ºæ‚¨çš„é—®é¢˜æä¾›ä¸“ä¸šçš„å¤šè§’åº¦åˆ†æå’Œå»ºè®®</p>
              <div class="module-footer">
                <el-tag size="small" type="info">ä¸“å®¶å’¨è¯¢</el-tag>
              </div>
            </div>
          </div>
        </div>

        <!-- æœ€è¿‘AIä»»åŠ¡ -->
        <div class="recent-tasks section-spacing">
          <div class="section-header">
            <h3 class="section-title">æœ€è¿‘AIä»»åŠ¡</h3>
            <p class="section-subtitle">æŸ¥çœ‹å’Œç®¡ç†æœ€è¿‘æ‰§è¡Œçš„AIä»»åŠ¡</p>
          </div>
          <div class="tasks-container">
            <div class="task-card" v-for="task in recentTasks" :key="task.id">
              <div class="task-header">
                <div class="task-title-section">
                  <h4 class="task-title">{{ task.name }}</h4>
                  <el-tag
                    :type="getStatusTagType(task.status)"
                    size="small"
                    class="task-status-tag"
                  >
                    {{ getStatusText(task.status) }}
                  </el-tag>
                </div>
                <div class="task-date">{{ formatDate(task.createdAt) }}</div>
              </div>

              <p class="task-description">{{ task.description }}</p>

              <div class="task-metrics">
                <div class="metric-item">
                  <div class="metric-label">å‡†ç¡®ç‡</div>
                  <div class="metric-value primary">{{ task.accuracy }}%</div>
                </div>
                <div class="metric-item">
                  <div class="metric-label">å¤„ç†æ—¶é—´</div>
                  <div class="metric-value success">{{ task.processingTime }}ms</div>
                </div>
              </div>

              <div class="task-actions">
                <el-button size="small" @click="viewTask(task.id)">
                  <UnifiedIcon name="eye" />
                  æŸ¥çœ‹è¯¦æƒ…
                </el-button>
                <el-button size="small" type="primary" @click="rerunTask(task.id)">
                  <UnifiedIcon name="Refresh" />
                  é‡æ–°è¿è¡Œ
                </el-button>
              </div>
            </div>
          </div>
        </div>

        <!-- AIæ¨¡å‹çŠ¶æ€ -->
        <div class="model-status section-spacing">
          <div class="section-header">
            <h3 class="section-title">AIæ¨¡å‹çŠ¶æ€</h3>
            <p class="section-subtitle">ç›‘æ§å’Œç®¡ç†AIæ¨¡å‹çš„è¿è¡ŒçŠ¶æ€</p>
          </div>
          <div class="models-grid">
            <div class="model-card" v-for="model in aiModels" :key="model.id">
              <div class="model-card-header">
                <div class="model-info">
                  <div class="model-icon-wrapper">
                    <span class="model-icon">{{ model.icon }}</span>
                  </div>
                  <div class="model-details">
                    <h4 class="model-name">{{ model.name }}</h4>
                    <div class="model-version">ç‰ˆæœ¬ {{ model.version }}</div>
                  </div>
                </div>
                <div class="model-status-badge" :class="getModelStatusClass(model.status)">
                  <div class="status-dot"></div>
                  <span class="status-text">{{ getModelStatusText(model.status) }}</span>
                </div>
              </div>

              <div class="model-metrics">
                <div class="metric-row">
                  <div class="metric-item">
                    <div class="metric-icon">ğŸ¯</div>
                    <div class="metric-content">
                      <div class="metric-label">å‡†ç¡®ç‡</div>
                      <div class="metric-value">{{ model.accuracy }}%</div>
                    </div>
                  </div>
                  <div class="metric-item">
                    <div class="metric-icon">âš¡</div>
                    <div class="metric-content">
                      <div class="metric-label">å“åº”æ—¶é—´</div>
                      <div class="metric-value">{{ model.responseTime }}ms</div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="model-actions">
                <el-button size="small" @click="viewModelDetails(model.id)">
                  <UnifiedIcon name="eye" />
                  æŸ¥çœ‹è¯¦æƒ…
                </el-button>
                <el-button
                  size="small"
                  :type="model.status === 'active' ? 'warning' : 'primary'"
                  @click="toggleModelStatus(model.id)"
                >
                  <UnifiedIcon name="default" />
                  <UnifiedIcon name="default" />
                  {{ model.status === 'active' ? 'åœæ­¢' : 'å¯åŠ¨' }}
                </el-button>
              </div>
            </div>
          </div>
        </div>
    </div>

    <!-- AIæ¨¡å‹åˆ›å»ºå¯¹è¯æ¡† -->
    <CreateModelDialog
      v-model="showCreateModelDialog"
      @success="handleModelCreated"
    />
  </div>
  </UnifiedCenterLayout>
</template>

<script setup lang="ts">
import UnifiedCenterLayout from '@/components/layout/UnifiedCenterLayout.vue'

import { ref, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { ElMessage } from 'element-plus'
import { Plus, Search, View, Refresh, VideoPause, VideoPlay } from '@element-plus/icons-vue'
import CentersStatCard from '@/components/centers/StatCard.vue'
import CreateModelDialog from '@/components/ai/CreateModelDialog.vue'
import { get, post } from '@/utils/request'

// è·¯ç”±
const router = useRouter()

// å¯¹è¯æ¡†çŠ¶æ€
const showCreateModelDialog = ref(false)


// æ¦‚è§ˆç»Ÿè®¡æ•°æ®
const overviewStats = ref([
  {
    key: 'activeModels',
    title: 'æ´»è·ƒAIæ¨¡å‹',
    value: 0,
    unit: '',
    trend: 0,
    trendText: 'è¾ƒä¸Šæœˆ',
    type: 'primary',
    iconName: 'Service'
  },
  {
    key: 'dailyQueries',
    title: 'ä»Šæ—¥æŸ¥è¯¢æ¬¡æ•°',
    value: 0,
    unit: '',
    trend: 0,
    trendText: 'è¾ƒæ˜¨æ—¥',
    type: 'success',
    iconName: 'Search'
  },
  {
    key: 'accuracy',
    title: 'AIå‡†ç¡®ç‡',
    value: 0,
    unit: '%',
    trend: 0,
    trendText: 'è¾ƒä¸Šå‘¨',
    type: 'warning',
    iconName: 'Target'
  },
  {
    key: 'automationTasks',
    title: 'è‡ªåŠ¨åŒ–ä»»åŠ¡',
    value: 0,
    unit: '',
    trend: 0,
    trendText: 'è¾ƒä¸Šæœˆ',
    type: 'info',
    iconName: 'Setting'
  }
])

// åŠ è½½çŠ¶æ€
const loading = ref(false)

// æœ€è¿‘AIä»»åŠ¡
const recentTasks = ref([])

// AIæ¨¡å‹
const aiModels = ref([])


// APIè°ƒç”¨å‡½æ•°
const fetchOverviewStats = async () => {
  try {
    loading.value = true
    const response = await get('/ai-stats/overview')
    if (response.success && response.data) {
      overviewStats.value = response.data
    }
  } catch (error) {
    console.error('è·å–AIæ¦‚è§ˆç»Ÿè®¡å¤±è´¥:', error)
    ElMessage.error('è·å–ç»Ÿè®¡æ•°æ®å¤±è´¥')
  } finally {
    loading.value = false
  }
}

const fetchRecentTasks = async () => {
  try {
    const response = await get('/ai-stats/recent-tasks')
    if (response.success && response.data) {
      recentTasks.value = response.data
    }
  } catch (error) {
    console.error('è·å–æœ€è¿‘AIä»»åŠ¡å¤±è´¥:', error)
  }
}

const fetchAIModels = async () => {
  try {
    const response = await get('/ai-stats/models')
    if (response.success && response.data) {
      aiModels.value = response.data
    }
  } catch (error) {
    console.error('è·å–AIæ¨¡å‹åˆ—è¡¨å¤±è´¥:', error)
  }
}


// åˆå§‹åŒ–æ•°æ®
const initData = async () => {
  await Promise.all([
    fetchOverviewStats(),
    fetchRecentTasks(),
    fetchAIModels()
  ])
}

// å¯¼èˆªåˆ°æŒ‡å®šé¡µé¢
const navigateTo = (path: string) => {
  router.push(path)
}

// åˆ›å»ºAIæ¨¡å‹
const handleCreateModel = () => {
  showCreateModelDialog.value = true
}

// å¤„ç†æ¨¡å‹åˆ›å»ºæˆåŠŸ
const handleModelCreated = (modelData: any) => {
  console.log('æ–°åˆ›å»ºçš„æ¨¡å‹:', modelData)
  // åˆ·æ–°æ¨¡å‹åˆ—è¡¨æˆ–å…¶ä»–æ“ä½œ
  fetchAIModels()
}

// å¤„ç†åˆ›å»ºæ“ä½œ
const handleCreate = () => {
  handleCreateModel()
}


// å¤„ç†ç»Ÿè®¡å¡ç‰‡ç‚¹å‡»
const handleStatClick = (stat: any) => {
  ElMessage.info(`ç‚¹å‡»äº†${stat.title}ç»Ÿè®¡å¡ç‰‡`)
}

// æŸ¥çœ‹AIä»»åŠ¡
const viewTask = (id: number) => {
  ElMessage.info(`æŸ¥çœ‹AIä»»åŠ¡ ${id}`)
}

// é‡æ–°è¿è¡Œä»»åŠ¡
const rerunTask = (id: number) => {
  ElMessage.success(`é‡æ–°è¿è¡ŒAIä»»åŠ¡ ${id}`)
}

// è·å–çŠ¶æ€æ–‡æœ¬
const getStatusText = (status: string) => {
  const statusMap: Record<string, string> = {
    completed: 'å·²å®Œæˆ',
    running: 'è¿è¡Œä¸­',
    failed: 'å¤±è´¥',
    pending: 'ç­‰å¾…ä¸­'
  }
  return statusMap[status] || status
}

// æ ¼å¼åŒ–æ—¥æœŸ
const formatDate = (dateStr: string) => {
  const date = new Date(dateStr)
  return date.toLocaleDateString('zh-CN')
}

// è·å–çŠ¶æ€æ ‡ç­¾ç±»å‹
const getStatusTagType = (status: string) => {
  const statusTypeMap: Record<string, string> = {
    completed: 'success',
    running: 'primary',
    failed: 'danger',
    pending: 'warning'
  }
  return statusTypeMap[status] || 'info'
}

// è·å–æ¨¡å‹çŠ¶æ€ç±»
const getModelStatusClass = (status: string) => {
  return status // ç›´æ¥è¿”å›çŠ¶æ€ä½œä¸ºç±»å
}

// è·å–æ¨¡å‹çŠ¶æ€æ–‡æœ¬
const getModelStatusText = (status: string) => {
  const statusMap: Record<string, string> = {
    active: 'è¿è¡Œä¸­',
    training: 'è®­ç»ƒä¸­',
    stopped: 'å·²åœæ­¢'
  }
  return statusMap[status] || status
}

// æŸ¥çœ‹æ¨¡å‹è¯¦æƒ…
const viewModelDetails = (modelId: number) => {
  ElMessage.info(`æŸ¥çœ‹æ¨¡å‹è¯¦æƒ…: ${modelId}`)
  // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°æ¨¡å‹è¯¦æƒ…é¡µé¢
}

// åˆ‡æ¢æ¨¡å‹çŠ¶æ€
const toggleModelStatus = (modelId: number) => {
  ElMessage.info(`åˆ‡æ¢æ¨¡å‹çŠ¶æ€: ${modelId}`)
  // è¿™é‡Œå¯ä»¥è°ƒç”¨APIåˆ‡æ¢æ¨¡å‹çŠ¶æ€
}




// ç»„ä»¶æŒ‚è½½æ—¶åŠ è½½æ•°æ®
onMounted(() => {
  console.log('æ™ºèƒ½ä¸­å¿ƒå·²åŠ è½½')
  initData()
})
</script>

<style scoped lang="scss">
/* AIä¸­å¿ƒæ ¹å®¹å™¨ */
.ai-center-timeline {
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 0;
  background: var(--bg-page);
}

.main-content {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing-xl);
}

/* ==================== æ¬¢è¿åŒºå—ä¼˜åŒ– ==================== */
.welcome-section {
  background: linear-gradient(135deg, var(--el-color-primary) 0%, var(--el-color-primary-light-5) 100%);
  border-radius: var(--radius-lg);
  padding: var(--spacing-2xl);
  margin-bottom: var(--spacing-xl);
  text-align: left;
  box-shadow: var(--shadow-lg);
  position: relative;
  overflow: hidden;

  // æ·»åŠ è£…é¥°æ€§èƒŒæ™¯å›¾æ¡ˆ
  &::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 400px;
    height: 400px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
  }

  &::after {
    content: '';
    position: absolute;
    bottom: -30%;
    left: 10%;
    width: 200px;
    height: 200px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 50%;
  }

  .welcome-content {
    position: relative;
    z-index: 1;

    h2 {
      font-size: var(--text-2xl);
      font-weight: 700;
      color: #fff;
      margin: 0 0 var(--spacing-sm) 0;
      line-height: 1.3;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    p {
      font-size: var(--text-base);
      color: rgba(255, 255, 255, 0.9);
      margin: 0;
      line-height: 1.6;
      max-width: 600px;
    }
  }
}

/* ==================== ç»Ÿè®¡å¡ç‰‡åŒºåŸŸä¼˜åŒ– ==================== */
.stats-section {
  margin-bottom: var(--spacing-xl);
}

.stats-grid-unified {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--spacing-lg);
}

/* ==================== é€šç”¨åŒºå—å¤´éƒ¨æ ·å¼ ==================== */
.section-spacing {
  margin-bottom: var(--spacing-2xl);

  &:last-child {
    margin-bottom: 0;
  }
}

.section-header {
  margin-bottom: var(--spacing-lg);
  text-align: left;
  padding-bottom: var(--spacing-sm);
  border-bottom: 2px solid var(--el-border-color-lighter);

  .section-title {
    font-size: var(--text-xl);
    font-weight: 600;
    color: var(--el-text-color-primary);
    margin: 0 0 var(--spacing-xs) 0;
    line-height: 1.3;
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);

    &::before {
      content: '';
      width: 4px;
      height: 20px;
      background: var(--el-color-primary);
      border-radius: 2px;
    }
  }

  .section-subtitle {
    font-size: var(--text-sm);
    color: var(--el-text-color-secondary);
    margin: 0;
    line-height: 1.5;
    padding-left: var(--spacing-md);
  }
}

/* ==================== AIåŠŸèƒ½æ¨¡å—å¡ç‰‡æ ·å¼ ==================== */
.modules-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--spacing-lg);
}

.module-card {
  background: var(--el-bg-color);
  border: 1px solid var(--el-border-color-lighter);
  border-radius: var(--radius-lg);
  padding: var(--spacing-xl);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: var(--shadow-sm);
  position: relative;
  overflow: hidden;

  // é¡¶éƒ¨æ¸å˜è£…é¥°æ¡
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--el-color-primary), var(--el-color-primary-light-5));
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  &:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
    border-color: var(--el-color-primary-light-5);

    &::before {
      opacity: 1;
    }
  }

  .module-header {
    display: flex;
    align-items: center;
    margin-bottom: var(--spacing-md);
    gap: var(--spacing-md);

    .module-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      flex-shrink: 0;
      transition: transform 0.3s ease;

      &.primary {
        background: linear-gradient(135deg, var(--el-color-primary-light-9) 0%, var(--el-color-primary-light-7) 100%);
        color: var(--el-color-primary);
      }
      &.success {
        background: linear-gradient(135deg, var(--el-color-success-light-9) 0%, var(--el-color-success-light-7) 100%);
        color: var(--el-color-success);
      }
      &.warning {
        background: linear-gradient(135deg, var(--el-color-warning-light-9) 0%, var(--el-color-warning-light-7) 100%);
        color: var(--el-color-warning);
      }
      &.info {
        background: linear-gradient(135deg, var(--el-color-info-light-9) 0%, var(--el-color-info-light-7) 100%);
        color: var(--el-color-info);
      }
      &.danger {
        background: linear-gradient(135deg, var(--el-color-danger-light-9) 0%, var(--el-color-danger-light-7) 100%);
        color: var(--el-color-danger);
      }
    }

    .module-title {
      font-size: var(--text-lg);
      font-weight: 600;
      color: var(--el-text-color-primary);
      margin: 0;
      line-height: 1.3;
      transition: color 0.3s ease;
    }
  }

  &:hover .module-header .module-icon {
    transform: scale(1.1);
  }

  .module-description {
    font-size: var(--text-sm);
    color: var(--el-text-color-regular);
    line-height: 1.6;
    margin: 0 0 var(--spacing-md) 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .module-footer {
    display: flex;
    justify-content: flex-start;
  }
}

/* ==================== ä»»åŠ¡å¡ç‰‡æ ·å¼ ==================== */
.tasks-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: var(--spacing-lg);
}

.task-card {
  background: var(--el-bg-color);
  border: 1px solid var(--el-border-color-lighter);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  box-shadow: var(--shadow-sm);
  transition: all 0.3s ease;
  position: relative;

  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    background: var(--el-color-primary);
    border-radius: var(--radius-lg) 0 0 var(--radius-lg);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  &:hover {
    box-shadow: var(--shadow-md);

    &::before {
      opacity: 1;
    }
  }

  .task-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--spacing-md);
    gap: var(--spacing-md);

    .task-title-section {
      flex: 1;
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      flex-wrap: wrap;

      .task-title {
        font-size: var(--text-base);
        font-weight: 600;
        color: var(--el-text-color-primary);
        margin: 0;
        line-height: 1.3;
      }

      .task-status-tag {
        margin: 0;
        flex-shrink: 0;
      }
    }

    .task-date {
      font-size: var(--text-xs);
      color: var(--el-text-color-secondary);
      white-space: nowrap;
      background: var(--el-fill-color-light);
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--radius-sm);
    }
  }

  .task-description {
    font-size: var(--text-sm);
    color: var(--el-text-color-regular);
    line-height: 1.5;
    margin: 0 0 var(--spacing-md) 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .task-metrics {
    display: flex;
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--el-fill-color-light);
    border-radius: var(--radius-md);

    .metric-item {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);

      .metric-label {
        font-size: var(--text-xs);
        color: var(--el-text-color-secondary);
      }

      .metric-value {
        font-size: var(--text-base);
        font-weight: 600;

        &.primary { color: var(--el-color-primary); }
        &.success { color: var(--el-color-success); }
      }
    }
  }

  .task-actions {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: flex-end;
    padding-top: var(--spacing-sm);
    border-top: 1px dashed var(--el-border-color-lighter);
  }
}

/* ==================== æ¨¡å‹å¡ç‰‡æ ·å¼ ==================== */
.models-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: var(--spacing-lg);
}

.model-card {
  background: var(--el-bg-color);
  border: 1px solid var(--el-border-color-lighter);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  box-shadow: var(--shadow-sm);
  transition: all 0.3s ease;

  &:hover {
    box-shadow: var(--shadow-md);
    border-color: var(--el-color-primary-light-3);
  }

  .model-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--spacing-md);
    gap: var(--spacing-md);

    .model-info {
      display: flex;
      align-items: center;
      flex: 1;
      gap: var(--spacing-md);

      .model-icon-wrapper {
        width: 48px;
        height: 48px;
        border-radius: var(--radius-md);
        background: linear-gradient(135deg, var(--el-color-primary-light-9) 0%, var(--el-color-primary-light-7) 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;

        .model-icon {
          font-size: 24px;
        }
      }

      .model-details {
        .model-name {
          font-size: var(--text-base);
          font-weight: 600;
          color: var(--el-text-color-primary);
          margin: 0 0 var(--spacing-xs) 0;
          line-height: 1.3;
        }

        .model-version {
          font-size: var(--text-xs);
          color: var(--el-text-color-secondary);
          background: var(--el-fill-color-light);
          padding: 2px 8px;
          border-radius: var(--radius-sm);
          display: inline-block;
        }
      }
    }

    .model-status-badge {
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
      padding: var(--spacing-xs) var(--spacing-md);
      border-radius: var(--radius-xl);
      font-size: var(--text-xs);
      font-weight: 500;
      flex-shrink: 0;

      .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        flex-shrink: 0;
      }

      &.active {
        background: var(--el-color-success-light-9);
        color: var(--el-color-success);

        .status-dot {
          background: var(--el-color-success);
          box-shadow: 0 0 0 3px var(--el-color-success-light-5);
        }
      }

      &.training {
        background: var(--el-color-warning-light-9);
        color: var(--el-color-warning);

        .status-dot {
          background: var(--el-color-warning);
          box-shadow: 0 0 0 3px var(--el-color-warning-light-5);
          animation: pulse 1.5s infinite;
        }
      }

      &.stopped {
        background: var(--el-fill-color);
        color: var(--el-text-color-secondary);

        .status-dot {
          background: var(--el-text-color-secondary);
        }
      }
    }
  }

  .model-metrics {
    margin-bottom: var(--spacing-md);

    .metric-row {
      display: flex;
      gap: var(--spacing-md);

      .metric-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        flex: 1;
        padding: var(--spacing-sm) var(--spacing-md);
        background: var(--el-fill-color-light);
        border-radius: var(--radius-md);

        .metric-icon {
          font-size: 18px;
        }

        .metric-content {
          .metric-label {
            font-size: var(--text-xs);
            color: var(--el-text-color-secondary);
          }

          .metric-value {
            font-size: var(--text-base);
            font-weight: 600;
            color: var(--el-text-color-primary);
          }
        }
      }
    }
  }

  .model-actions {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: flex-end;
    padding-top: var(--spacing-sm);
    border-top: 1px dashed var(--el-border-color-lighter);
  }
}

// è„‰å†²åŠ¨ç”»
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

// çŠ¶æ€æŒ‡ç¤ºå™¨åŠ¨ç”»
@keyframes statusPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.2);
    opacity: 0.8;
  }
}

/* ==================== å“åº”å¼è®¾è®¡ ==================== */
@media (max-width: 1400px) {
  .stats-grid-unified {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 1200px) {
  .main-content {
    padding: var(--spacing-lg);
  }

  .modules-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .main-content {
    padding: var(--spacing-md);
  }

  .welcome-section {
    padding: var(--spacing-lg);

    .welcome-content h2 {
      font-size: var(--text-xl);
    }
  }

  .stats-grid-unified {
    grid-template-columns: 1fr;
  }

  .modules-grid {
    grid-template-columns: 1fr;
  }

  .tasks-container {
    grid-template-columns: 1fr;
  }

  .models-grid {
    grid-template-columns: 1fr;
  }

  .section-header .section-title {
    font-size: var(--text-lg);

    &::before {
      width: 3px;
      height: 16px;
    }
  }
}
</style>
