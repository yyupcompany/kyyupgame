<!--
  AIåŠ©æ‰‹é¡µé¢å…¥å£

  åŠŸèƒ½ï¼šä½œä¸º /ai è·¯ç”±çš„é¡µé¢å…¥å£ï¼Œç›´æ¥å¼•ç”¨é‡æ„åçš„ AIAssistant ç»„ä»¶

  è·¯ç”±è·¯å¾„ï¼š/ai
  æƒé™è¦æ±‚ï¼šAI_ASSISTANT_USE

  è¯´æ˜ï¼š
  - æœ¬æ–‡ä»¶æ˜¯ /ai è·¯ç”±çš„é¡µé¢å…¥å£
  - å®é™…åŠŸèƒ½ç”± @/components/ai-assistant/AIAssistant.vue å®ç°
  - AIAssistant æ˜¯å®Œæ•´é‡æ„åçš„AIåŠ©æ‰‹ç»„ä»¶ï¼ŒåŒ…å«155é¡¹åŠŸèƒ½
  - å½“ç”¨æˆ·ç‚¹å‡»å…³é—­æŒ‰é’®æ—¶ï¼Œä¼šè‡ªåŠ¨è·³è½¬å› /dashboard

  ç›¸å…³æ–‡æ¡£ï¼š
  - docs/aiæ¶æ„ä¸­å¿ƒ/aiåŠ©æ‰‹å‰ç«¯é¡µé¢é‡æ„æ¶æ„.md
  - docs/aiæ¶æ„ä¸­å¿ƒ/aiåŠ©æ‰‹é‡æ„å®ŒæˆæŠ¥å‘Š.md
  - client/src/components/ai-assistant/AIAssistant.vue
-->

<template>
  <div class="ai-assistant-page" data-testid="ai-assistant-page">
    <!-- ç›´æ¥ä½¿ç”¨é‡æ„åçš„AIåŠ©æ‰‹ç»„ä»¶ -->
    <AIAssistant
      v-model:visible="visible"
      :is-fullscreen="true"
    />
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, watch } from 'vue'
import { useRouter } from 'vue-router'
import AIAssistant from '@/components/ai-assistant/AIAssistant.vue'

const router = useRouter()

// AIåŠ©æ‰‹å¯è§æ€§çŠ¶æ€ï¼ˆé»˜è®¤æ˜¾ç¤ºï¼‰
const visible = ref(true)

// ç»„ä»¶æŒ‚è½½æ—¶è‡ªåŠ¨æ˜¾ç¤ºAIåŠ©æ‰‹
onMounted(() => {
  visible.value = true
})

// ç›‘å¬visibleå˜åŒ–ï¼Œå½“å…³é—­æ—¶è·³è½¬å›dashboard
watch(visible, (newValue) => {
  if (!newValue) {
    console.log('ğŸ”„ [AIåŠ©æ‰‹] visibleå˜ä¸ºfalseï¼Œå‡†å¤‡è·³è½¬å›dashboard')
    // AIåŠ©æ‰‹å…³é—­ï¼Œè·³è½¬å›dashboard
    router.push('/dashboard')
  }
})
</script>

<style scoped lang="scss">
.ai-assistant-page {
  width: 100%;
  height: 100vh;
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
  
  // ç¡®ä¿AIåŠ©æ‰‹ç»„ä»¶å æ»¡æ•´ä¸ªé¡µé¢
  :deep(.ai-assistant-wrapper) {
    width: 100%;
    height: 100%;
  }
}
</style>

