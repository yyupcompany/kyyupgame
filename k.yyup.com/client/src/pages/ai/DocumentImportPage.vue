<template>
  <div class="document-import-page">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <PageHeader 
      title="AIæ–‡æ¡£å¯¼å…¥" 
      subtitle="æ™ºèƒ½è§£ææ–‡æ¡£å†…å®¹ï¼Œå¿«é€Ÿå¯¼å…¥æ•°æ®åˆ°ç³»ç»Ÿ"
      :breadcrumb="breadcrumb"
    >
      <template #actions>
        <el-button 
          type="primary" 
          :icon="QuestionFilled"
          @click="showHelpDialog = true"
        >
          ä½¿ç”¨å¸®åŠ©
        </el-button>
      </template>
    </PageHeader>

    <!-- æ–‡æ¡£å¯¼å…¥ç»„ä»¶ -->
    <DocumentImport />

    <!-- å¸®åŠ©å¯¹è¯æ¡† -->
    <el-dialog
      v-model="showHelpDialog"
      title="AIæ–‡æ¡£å¯¼å…¥ä½¿ç”¨æŒ‡å—"
      width="70%"
      :before-close="() => showHelpDialog = false"
    >
      <div class="help-content">
        <el-steps :active="4" direction="vertical" class="help-steps">
          <el-step 
            title="æ£€æŸ¥æƒé™" 
            description="ç¡®è®¤æ‚¨æ‹¥æœ‰å¯¼å…¥æ•™å¸ˆæˆ–å®¶é•¿æ•°æ®çš„æƒé™"
          >
            <template #icon>
              <UnifiedIcon name="default" />
            </template>
          </el-step>
          
          <el-step 
            title="é€‰æ‹©ç±»å‹" 
            description="æ ¹æ®éœ€è¦é€‰æ‹©å¯¼å…¥æ•™å¸ˆæ•°æ®æˆ–å®¶é•¿æ•°æ®"
          >
            <template #icon>
              <UnifiedIcon name="default" />
            </template>
          </el-step>
          
          <el-step 
            title="è¾“å…¥å†…å®¹" 
            description="å°†æ–‡æ¡£å†…å®¹ç²˜è´´åˆ°è¾“å…¥æ¡†ï¼Œæ”¯æŒæ–‡æœ¬ã€è¡¨æ ¼ã€JSONç­‰å¤šç§æ ¼å¼"
          >
            <template #icon>
              <UnifiedIcon name="Edit" />
            </template>
          </el-step>
          
          <el-step 
            title="é¢„è§ˆè§£æ" 
            description="ç‚¹å‡»é¢„è§ˆè§£æï¼ŒAIå°†æ™ºèƒ½æå–å’ŒéªŒè¯æ•°æ®"
          >
            <template #icon>
              <UnifiedIcon name="eye" />
            </template>
          </el-step>
          
          <el-step 
            title="ç¡®è®¤å¯¼å…¥" 
            description="æ£€æŸ¥è§£æç»“æœæ— è¯¯åï¼Œç‚¹å‡»å¯¼å…¥æ•°æ®åˆ°ç³»ç»Ÿ"
          >
            <template #icon>
              <UnifiedIcon name="Upload" />
            </template>
          </el-step>
        </el-steps>

        <el-divider />

        <div class="help-tips">
          <h4>ğŸ’¡ ä½¿ç”¨æŠ€å·§</h4>
          <ul>
            <li><strong>æ•°æ®æ ¼å¼</strong>ï¼šæ”¯æŒçº¯æ–‡æœ¬ã€è¡¨æ ¼ï¼ˆTab/é€—å·åˆ†éš”ï¼‰ã€JSONæ ¼å¼</li>
            <li><strong>å¿…å¡«å­—æ®µ</strong>ï¼šæ•™å¸ˆå’Œå®¶é•¿æ•°æ®éƒ½è¦æ±‚è‡³å°‘åŒ…å«å§“åå­—æ®µ</li>
            <li><strong>AIæ™ºèƒ½</strong>ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å¹¶æ˜ å°„ä¸åŒçš„å­—æ®µåç§°</li>
            <li><strong>æ•°æ®éªŒè¯</strong>ï¼šå¯¼å…¥å‰ä¼šè¿›è¡Œæ ¼å¼éªŒè¯å’Œé‡å¤æ€§æ£€æŸ¥</li>
            <li><strong>æƒé™æ§åˆ¶</strong>ï¼šåªæœ‰ç›¸åº”æƒé™çš„ç”¨æˆ·æ‰èƒ½å¯¼å…¥å¯¹åº”ç±»å‹æ•°æ®</li>
          </ul>

          <h4>âš ï¸ æ³¨æ„äº‹é¡¹</h4>
          <ul>
            <li>ç¡®ä¿æ•°æ®å‡†ç¡®æ€§ï¼Œå¯¼å…¥åå»ºè®®åŠæ—¶æ£€æŸ¥</li>
            <li>å¤§é‡æ•°æ®å»ºè®®åˆ†æ‰¹å¯¼å…¥ï¼Œé¿å…ç³»ç»Ÿè´Ÿè½½è¿‡é«˜</li>
            <li>æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰ä¸ä¼šé€šè¿‡æ­¤åŠŸèƒ½å¯¼å…¥</li>
            <li>å¯¼å…¥çš„æ•°æ®ä¼šè®°å½•æ“ä½œæ—¥å¿—ä¾¿äºè¿½æº¯</li>
          </ul>
        </div>
      </div>
    </el-dialog>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { QuestionFilled, Key, Select, EditPen, View, Upload } from '@element-plus/icons-vue'
import PageHeader from '@/components/common/PageHeader.vue'
import DocumentImport from '@/components/ai/DocumentImport.vue'

// å“åº”å¼æ•°æ®
const showHelpDialog = ref(false)

// é¢åŒ…å±‘å¯¼èˆª
const breadcrumb = [
  { text: 'é¦–é¡µ', to: '/dashboard' },
  { text: 'AIä¸­å¿ƒ', to: '/ai' },
  { text: 'æ–‡æ¡£å¯¼å…¥' }
]

// é¡µé¢å…ƒæ•°æ®
defineOptions({
  name: 'DocumentImportPage'
})
</script>

<style scoped>
.document-import-page {
  padding: var(--text-2xl);
  background-color: var(--bg-page);
  min-height: calc(100vh - 60px);
}

.help-content {
  max-min-height: 60px; height: auto;
  overflow-y: auto;
}

.help-steps {
  margin-bottom: var(--text-2xl);
}

.help-steps :deep(.el-step__description) {
  font-size: var(--text-sm);
  color: var(--text-regular);
  line-height: 1.4;
}

.help-tips {
  padding: 0 var(--text-2xl);
}

.help-tips h4 {
  color: var(--text-primary);
  margin-bottom: var(--spacing-2xl);
  font-size: var(--text-lg);
}

.help-tips ul {
  margin: var(--spacing-2xl) 0 var(--text-2xl) var(--text-2xl);
  color: var(--text-regular);
}

.help-tips li {
  margin-bottom: var(--spacing-sm);
  line-height: 1.5;
}

.help-tips li strong {
  color: var(--primary-color);
  font-weight: 600;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: var(--breakpoint-md)) {
  .document-import-page {
    padding: var(--spacing-2xl);
  }
  
  .help-content {
    padding: var(--spacing-2xl);
  }
  
  .help-tips {
    padding: 0 10px;
  }
}
</style>