/**
 * 最终布局修复方案
 * 彻底解决侧边栏和主内容区域之间的间隙问题
 * 
 * 问题分析：
 * 1. 多个CSS文件中有冲突的定位规则
 * 2. 同时使用了absolute定位的left和margin-left导致双重偏移
 * 3. 需要统一使用一种定位方式
 */

// 强制覆盖所有冲突的样式
.app-container {
  // 最高优先级的布局修复
  &.cls-final-fix-2025,
  &.cls-ultimate-fix-2025,
  &.cls-performance-fix {
    display: flex !important;
    width: 100vw !important;
    height: 100vh !important;
    overflow: hidden !important;
    position: relative !important;
    
    // 侧边栏定位
    .sidebar {
      position: fixed !important;
      left: 0 !important;
      top: 0 !important;
      width: 240px !important;
      height: 100vh !important;
      z-index: 1000 !important;
      
      &.collapsed {
        width: 64px !important;
      }
    }
    
    // 主内容区域定位 - 使用absolute定位，不用margin-left
    .main-container {
      position: absolute !important;
      top: 0 !important;
      left: 240px !important;
      right: 0 !important;
      bottom: 0 !important;
      margin-left: 0 !important; // 关键：移除margin-left
      z-index: 1 !important;
      overflow: auto !important;
      
      // 侧边栏收起时的状态
      &.main-expanded {
        left: 64px !important;
        margin-left: 0 !important; // 确保没有margin-left
      }
    }
  }
}

// 覆盖其他可能的冲突样式
.cls-zero-shift-global {
  .main-container {
    margin-left: 0 !important;
  }
}

// 确保在所有主题下都生效
[data-theme] {
  .app-container {
    .main-container {
      margin-left: 0 !important;
    }
  }
}

// 移动端响应式
@media (max-width: var(--breakpoint-md)) {
  .app-container {
    .sidebar {
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      
      &.show,
      &:not(.collapsed) {
        transform: translateX(0);
      }
    }
    
    .main-container {
      left: 0 !important;
      margin-left: 0 !important;
    }
  }
}