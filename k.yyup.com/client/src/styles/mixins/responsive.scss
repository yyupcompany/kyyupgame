/**
 * 响应式设计混入器
 * Responsive Design Mixins
 * 
 * 提供统一的断点管理和响应式设计工具
 * Unified breakpoint management and responsive design utilities
 */

/* ==================== 断点混入器 ==================== */
/* Breakpoint Mixins */

/**
 * 手机端 - Mobile First
 * 适用于移动设备 (0px - 767px)
 */
@mixin mobile {
  @media (max-width: calc(var(--breakpoint-md) - 1px)) {
    @content;
  }
}

/**
 * 手机端向上 - Mobile and Up
 * 适用于所有设备 (0px+)
 */
@mixin mobile-up {
  @media (min-width: 0) {
    @content;
  }
}

/**
 * 平板端 - Tablet
 * 适用于平板设备 (768px - 1023px)
 */
@mixin tablet {
  @media (min-width: var(--breakpoint-md)) and (max-width: calc(var(--breakpoint-lg) - 1px)) {
    @content;
  }
}

/**
 * 平板端向上 - Tablet and Up
 * 适用于平板及更大设备 (768px+)
 */
@mixin tablet-up {
  @media (min-width: var(--breakpoint-md)) {
    @content;
  }
}

/**
 * 桌面端 - Desktop
 * 适用于桌面设备 (1024px - 1279px)
 */
@mixin desktop {
  @media (min-width: var(--breakpoint-lg)) and (max-width: calc(var(--breakpoint-xl) - 1px)) {
    @content;
  }
}

/**
 * 桌面端向上 - Desktop and Up
 * 适用于桌面及更大设备 (1024px+)
 */
@mixin desktop-up {
  @media (min-width: var(--breakpoint-lg)) {
    @content;
  }
}

/**
 * 大屏桌面端 - Large Desktop
 * 适用于大屏设备 (1280px+)
 */
@mixin large-desktop {
  @media (min-width: var(--breakpoint-xl)) {
    @content;
  }
}

/**
 * 超大屏 - Extra Large
 * 适用于超大屏设备 (1536px+)
 */
@mixin xl {
  @media (min-width: var(--breakpoint-2xl)) {
    @content;
  }
}

/* ==================== 自定义断点混入器 ==================== */
/* Custom Breakpoint Mixins */

/**
 * 自定义最小宽度断点
 * @param {string} $width - 最小宽度值
 */
@mixin min-width($width) {
  @media (min-width: $width) {
    @content;
  }
}

/**
 * 自定义最大宽度断点
 * @param {string} $width - 最大宽度值
 */
@mixin max-width($width) {
  @media (max-width: $width) {
    @content;
  }
}

/**
 * 自定义范围断点
 * @param {string} $min-width - 最小宽度值
 * @param {string} $max-width - 最大宽度值
 */
@mixin between($min-width, $max-width) {
  @media (min-width: $min-width) and (max-width: $max-width) {
    @content;
  }
}

/* ==================== 设备特定混入器 ==================== */
/* Device-Specific Mixins */

/**
 * 竖屏方向
 */
@mixin portrait {
  @media (orientation: portrait) {
    @content;
  }
}

/**
 * 横屏方向
 */
@mixin landscape {
  @media (orientation: landscape) {
    @content;
  }
}

/**
 * 高DPI设备（Retina显示屏）
 */
@mixin retina {
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    @content;
  }
}

/**
 * 触摸设备
 */
@mixin touch {
  @media (hover: none) and (pointer: coarse) {
    @content;
  }
}

/**
 * 非触摸设备（有鼠标/触控板）
 */
@mixin no-touch {
  @media (hover: hover) and (pointer: fine) {
    @content;
  }
}

/* ==================== 容器混入器 ==================== */
/* Container Mixins */

/**
 * 响应式容器
 * 自动适应不同屏幕尺寸的容器宽度和内边距
 */
@mixin responsive-container {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  
  padding-left: var(--container-padding-mobile);
  padding-right: var(--container-padding-mobile);
  
  @include tablet-up {
    padding-left: var(--container-padding-tablet);
    padding-right: var(--container-padding-tablet);
  }
  
  @include desktop-up {
    padding-left: var(--container-padding-desktop);
    padding-right: var(--container-padding-desktop);
  }
  
  @include min-width(var(--container-sm)) {
    max-width: var(--container-sm);
  }
  
  @include min-width(var(--container-md)) {
    max-width: var(--container-md);
  }
  
  @include min-width(var(--container-lg)) {
    max-width: var(--container-lg);
  }
  
  @include min-width(var(--container-xl)) {
    max-width: var(--container-xl);
  }
  
  @include min-width(var(--container-2xl)) {
    max-width: var(--container-2xl);
  }
}

/**
 * 固定宽度容器
 * @param {string} $max-width - 最大宽度
 */
@mixin container($max-width: var(--container-xl)) {
  width: 100%;
  max-width: $max-width;
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--spacing-md);
  padding-right: var(--spacing-md);
  
  @include tablet-up {
    padding-left: var(--spacing-lg);
    padding-right: var(--spacing-lg);
  }
}

/* ==================== 网格混入器 ==================== */
/* Grid Mixins */

/**
 * 响应式网格容器
 * @param {number} $mobile-cols - 移动端列数
 * @param {number} $tablet-cols - 平板端列数
 * @param {number} $desktop-cols - 桌面端列数
 * @param {string} $gap - 网格间距
 */
@mixin responsive-grid($mobile-cols: 1, $tablet-cols: 2, $desktop-cols: 3, $gap: var(--spacing-md)) {
  display: grid;
  gap: $gap;
  grid-template-columns: repeat($mobile-cols, 1fr);
  
  @include tablet-up {
    grid-template-columns: repeat($tablet-cols, 1fr);
  }
  
  @include desktop-up {
    grid-template-columns: repeat($desktop-cols, 1fr);
  }
}

/**
 * 弹性网格容器
 * 自动填充适合的列数
 * @param {string} $min-width - 最小列宽
 * @param {string} $gap - 网格间距
 */
@mixin flexible-grid($min-width: 250px, $gap: var(--spacing-md)) {
  display: grid;
  gap: $gap;
  grid-template-columns: repeat(auto-fill, minmax($min-width, 1fr));
}

/* ==================== 弹性布局混入器 ==================== */
/* Flexbox Mixins */

/**
 * 响应式弹性布局
 * @param {string} $mobile-direction - 移动端方向
 * @param {string} $desktop-direction - 桌面端方向
 */
@mixin responsive-flex($mobile-direction: column, $desktop-direction: row) {
  display: flex;
  flex-direction: $mobile-direction;
  
  @include tablet-up {
    flex-direction: $desktop-direction;
  }
}

/**
 * 居中对齐
 */
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

/**
 * 垂直居中
 */
@mixin flex-center-y {
  display: flex;
  align-items: center;
}

/**
 * 水平居中
 */
@mixin flex-center-x {
  display: flex;
  justify-content: center;
}

/**
 * 两端对齐
 */
@mixin flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* ==================== 文字响应式混入器 ==================== */
/* Typography Responsive Mixins */

/**
 * 响应式字体大小
 * @param {string} $mobile-size - 移动端字体大小
 * @param {string} $desktop-size - 桌面端字体大小
 */
@mixin responsive-font-size($mobile-size, $desktop-size) {
  font-size: $mobile-size;
  
  @include tablet-up {
    font-size: $desktop-size;
  }
}

/**
 * 流体字体大小
 * 在指定范围内平滑缩放
 * @param {string} $min-size - 最小字体大小
 * @param {string} $max-size - 最大字体大小
 * @param {string} $min-vw - 最小视口宽度
 * @param {string} $max-vw - 最大视口宽度
 */
@mixin fluid-font-size($min-size, $max-size, $min-vw: 320px, $max-vw: 1200px) {
  font-size: $min-size;
  
  @media (min-width: $min-vw) and (max-width: $max-vw) {
    font-size: calc(#{$min-size} + #{strip-unit($max-size - $min-size)} * ((100vw - #{$min-vw}) / #{strip-unit($max-vw - $min-vw)}));
  }
  
  @media (min-width: $max-vw) {
    font-size: $max-size;
  }
}

/* ==================== 可见性混入器 ==================== */
/* Visibility Mixins */

/**
 * 仅在移动端显示
 */
@mixin mobile-only {
  @include tablet-up {
    display: none;
  }
}

/**
 * 仅在桌面端显示
 */
@mixin desktop-only {
  @include mobile {
    display: none;
  }
}

/**
 * 在指定断点隐藏
 * @param {string} $breakpoint - 断点名称
 */
@mixin hide-at($breakpoint) {
  @if $breakpoint == 'mobile' {
    @include mobile {
      display: none;
    }
  } @else if $breakpoint == 'tablet' {
    @include tablet {
      display: none;
    }
  } @else if $breakpoint == 'desktop' {
    @include desktop {
      display: none;
    }
  }
}

/* ==================== 辅助函数 ==================== */
/* Helper Functions */

/**
 * 去除单位
 */
@function strip-unit($number) {
  @if type-of($number) == 'number' and not unitless($number) {
    @return $number / ($number * 0 + 1);
  }
  @return $number;
}

/* ==================== 快捷工具混入器 ==================== */
/* Utility Mixins */

/**
 * 清除浮动
 */
@mixin clearfix {
  &::after {
    content: '';
    display: table;
    clear: both;
  }
}

/**
 * 截断文本
 */
@mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/**
 * 多行文本截断
 * @param {number} $lines - 显示行数
 */
@mixin text-truncate-multiline($lines: 2) {
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
}

/**
 * 可访问性隐藏
 * 对屏幕阅读器可见，视觉上隐藏
 */
@mixin sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}