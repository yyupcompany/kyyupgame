/**
 * 移动端基础样式
 * Mobile Base Styles
 *
 * 统一移动端页面的样式导入和设计令牌使用
 */

/* ==================== 设计令牌导入 ==================== */
@use './design-tokens.scss' as *;

/* ==================== Vant 4 主题变量覆盖 ==================== */
:root {
  /* 移动端特定变量 */
  --header-height: 56px;
  --tabbar-height: 50px;
  --mobile-padding: var(--app-gap);
  --mobile-gap-sm: calc(var(--app-gap) * 0.5);
  --mobile-gap-xs: calc(var(--app-gap) * 0.25);

  /* 移动端断点 */
  --mobile-breakpoint-xs: 375px;
  --mobile-breakpoint-sm: 480px;
  --mobile-breakpoint-md: 768px;
  --mobile-breakpoint-lg: 1024px;

  /* 移动端字体大小 */
  --mobile-text-xs: 10px;
  --mobile-text-sm: 12px;
  --mobile-text-base: 14px;
  --mobile-text-lg: 16px;
  --mobile-text-xl: 18px;
  --mobile-text-2xl: 20px;
  --mobile-text-3xl: 24px;
  --mobile-text-4xl: 28px;

  /* 移动端圆角 */
  --mobile-radius-xs: 2px;
  --mobile-radius-sm: 4px;
  --mobile-radius-md: 8px;
  --mobile-radius-lg: 12px;
  --mobile-radius-xl: 16px;
  --mobile-radius-2xl: 20px;
  --mobile-radius-3xl: 24px;
  --mobile-radius-full: 9999px;

  /* 移动端阴影 */
  --mobile-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --mobile-shadow-md: 0 2px 4px rgba(0, 0, 0, 0.1);
  --mobile-shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.15);
  --mobile-shadow-xl: 0 8px 16px rgba(0, 0, 0, 0.2);

  /* 移动端过渡 */
  --mobile-transition-fast: 150ms;
  --mobile-transition-base: 200ms;
  --mobile-transition-slow: 300ms;
}

/* ==================== Vant 4 组件主题覆盖 ==================== */
:root {
  /* 基础颜色 */
  --van-white: var(--bg-color);
  --van-gray-1: var(--bg-color-page);
  --van-gray-2: var(--bg-color-light);
  --van-gray-3: var(--border-color);
  --van-gray-4: var(--text-placeholder);
  --van-gray-5: var(--text-secondary);
  --van-gray-6: var(--text-regular);
  --van-gray-7: var(--text-primary);

  /* 主要颜色 */
  --van-primary-color: var(--primary-color);
  --van-success-color: var(--success-color);
  --van-warning-color: var(--warning-color);
  --van-danger-color: var(--danger-color);

  /* 字体 */
  --van-font-size-md: var(--mobile-text-base);
  --van-font-size-lg: var(--mobile-text-lg);
  --van-font-size-xl: var(--mobile-text-xl);

  /* 圆角 */
  --van-border-radius-sm: var(--mobile-radius-sm);
  --van-border-radius-md: var(--mobile-radius-md);
  --van-border-radius-lg: var(--mobile-radius-lg);
  --van-border-radius-max: var(--mobile-radius-full);

  /* 间距 */
  --van-padding-xs: var(--mobile-gap-xs);
  --van-padding-sm: var(--mobile-gap-sm);
  --van-padding-md: var(--mobile-padding);
  --van-padding-lg: var(--app-gap-lg);
  --van-padding-xl: var(--app-gap-xl);
}

/* ==================== 移动端通用样式 ==================== */

/* 基础容器样式 */
.mobile-container {
  padding: var(--mobile-padding);
  background-color: var(--bg-color);
  color: var(--text-primary);
  transition: all var(--mobile-transition-base) var(--transition-timing-ease);
}

/* 卡片样式 */
.mobile-card {
  background: var(--bg-color);
  border-radius: var(--mobile-radius-lg);
  box-shadow: var(--mobile-shadow-md);
  border: 1px solid var(--border-color-light);
  overflow: hidden;
  transition: all var(--mobile-transition-base) var(--transition-timing-ease);

  &:hover {
    box-shadow: var(--mobile-shadow-lg);
    transform: translateY(-2px);
  }

  &:active {
    transform: translateY(0);
  }
}

/* 按钮样式 */
.mobile-btn {
  min-height: 44px; // 触摸友好
  padding: var(--mobile-padding-sm) var(--mobile-padding);
  border-radius: var(--mobile-radius-md);
  font-size: var(--mobile-text-base);
  font-weight: var(--font-medium);
  transition: all var(--mobile-transition-fast) var(--transition-timing-ease);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--mobile-gap-sm);
  cursor: pointer;
  user-select: none;
  touch-action: manipulation;

  &:active {
    transform: scale(0.98);
  }
}

/* 输入框样式 */
.mobile-input {
  min-height: 44px;
  padding: var(--mobile-padding-sm) var(--mobile-padding);
  border-radius: var(--mobile-radius-md);
  border: 1px solid var(--border-color-light);
  background: var(--bg-color);
  font-size: var(--mobile-text-base);
  color: var(--text-primary);
  transition: all var(--mobile-transition-base) var(--transition-timing-ease);

  &:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2);
  }

  &::placeholder {
    color: var(--text-placeholder);
  }
}

/* 列表项样式 */
.mobile-list-item {
  padding: var(--mobile-padding);
  background: var(--bg-color);
  border-bottom: 1px solid var(--border-color-light);
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-height: 52px;
  cursor: pointer;
  transition: background-color var(--mobile-transition-fast) var(--transition-timing-ease);

  &:hover {
    background-color: var(--bg-color-light);
  }

  &:active {
    background-color: var(--bg-color-page);
  }

  &:last-child {
    border-bottom: none;
  }
}

/* 统计卡片样式 */
.mobile-stat-card {
  background: var(--bg-color);
  border-radius: var(--mobile-radius-lg);
  padding: var(--mobile-padding);
  box-shadow: var(--mobile-shadow-sm);
  text-align: center;
  transition: all var(--mobile-transition-base) var(--transition-timing-ease);

  .stat-icon {
    font-size: var(--mobile-text-2xl);
    color: var(--primary-color);
    margin-bottom: var(--mobile-gap-xs);
  }

  .stat-value {
    font-size: var(--mobile-text-2xl);
    font-weight: var(--font-bold);
    color: var(--text-primary);
    line-height: 1.2;
  }

  .stat-title {
    font-size: var(--mobile-text-sm);
    color: var(--text-secondary);
    margin-top: var(--mobile-gap-xs);
  }

  .stat-unit {
    font-size: var(--mobile-text-xs);
    color: var(--text-tertiary);
  }
}

/* ==================== 移动端布局工具类 ==================== */

// 间距类
.m-0 { margin: 0 !important; }
.mt-1 { margin-top: var(--mobile-gap-xs) !important; }
.mt-2 { margin-top: var(--mobile-gap-sm) !important; }
.mt-3 { margin-top: var(--mobile-gap) !important; }
.mt-4 { margin-top: var(--app-gap-lg) !important; }

.mb-1 { margin-bottom: var(--mobile-gap-xs) !important; }
.mb-2 { margin-bottom: var(--mobile-gap-sm) !important; }
.mb-3 { margin-bottom: var(--mobile-gap) !important; }
.mb-4 { margin-bottom: var(--app-gap-lg) !important; }

.mx-1 { margin-left: var(--mobile-gap-xs) !important; margin-right: var(--mobile-gap-xs) !important; }
.mx-2 { margin-left: var(--mobile-gap-sm) !important; margin-right: var(--mobile-gap-sm) !important; }
.mx-3 { margin-left: var(--mobile-gap) !important; margin-right: var(--mobile-gap) !important; }
.mx-4 { margin-left: var(--app-gap-lg) !important; margin-right: var(--app-gap-lg) !important; }

.my-1 { margin-top: var(--mobile-gap-xs) !important; margin-bottom: var(--mobile-gap-xs) !important; }
.my-2 { margin-top: var(--mobile-gap-sm) !important; margin-bottom: var(--mobile-gap-sm) !important; }
.my-3 { margin-top: var(--mobile-gap) !important; margin-bottom: var(--mobile-gap) !important; }
.my-4 { margin-top: var(--app-gap-lg) !important; margin-bottom: var(--app-gap-lg) !important; }

// 内边距类
.p-0 { padding: 0 !important; }
.pt-1 { padding-top: var(--mobile-gap-xs) !important; }
.pt-2 { padding-top: var(--mobile-gap-sm) !important; }
.pt-3 { padding-top: var(--mobile-gap) !important; }
.pt-4 { padding-top: var(--app-gap-lg) !important; }

.pb-1 { padding-bottom: var(--mobile-gap-xs) !important; }
.pb-2 { padding-bottom: var(--mobile-gap-sm) !important; }
.pb-3 { padding-bottom: var(--mobile-gap) !important; }
.pb-4 { padding-bottom: var(--app-gap-lg) !important; }

.px-1 { padding-left: var(--mobile-gap-xs) !important; padding-right: var(--mobile-gap-xs) !important; }
.px-2 { padding-left: var(--mobile-gap-sm) !important; padding-right: var(--mobile-gap-sm) !important; }
.px-3 { padding-left: var(--mobile-gap) !important; padding-right: var(--mobile-gap) !important; }
.px-4 { padding-left: var(--app-gap-lg) !important; padding-right: var(--app-gap-lg) !important; }

.py-1 { padding-top: var(--mobile-gap-xs) !important; padding-bottom: var(--mobile-gap-xs) !important; }
.py-2 { padding-top: var(--mobile-gap-sm) !important; padding-bottom: var(--mobile-gap-sm) !important; }
.py-3 { padding-top: var(--mobile-gap) !important; padding-bottom: var(--mobile-gap) !important; }
.py-4 { padding-top: var(--app-gap-lg) !important; padding-bottom: var(--app-gap-lg) !important; }

// 文本对齐
.text-left { text-align: left !important; }
.text-center { text-align: center !important; }
.text-right { text-align: right !important; }

// 字体大小
.text-xs { font-size: var(--mobile-text-xs) !important; }
.text-sm { font-size: var(--mobile-text-sm) !important; }
.text-base { font-size: var(--mobile-text-base) !important; }
.text-lg { font-size: var(--mobile-text-lg) !important; }
.text-xl { font-size: var(--mobile-text-xl) !important; }

// 字体粗细
.font-light { font-weight: 300 !important; }
.font-normal { font-weight: 400 !important; }
.font-medium { font-weight: 500 !important; }
.font-semibold { font-weight: 600 !important; }
.font-bold { font-weight: 700 !important; }

// 显示控制
.hidden { display: none !important; }
.block { display: block !important; }
.inline-block { display: inline-block !important; }
.flex { display: flex !important; }
.inline-flex { display: inline-flex !important; }
.grid { display: grid !important; }

// Flex 工具类
.flex-col { flex-direction: column !important; }
.flex-row { flex-direction: row !important; }
.flex-wrap { flex-wrap: wrap !important; }
.flex-1 { flex: 1 !important; }
.items-start { align-items: flex-start !important; }
.items-center { align-items: center !important; }
.items-end { align-items: flex-end !important; }
.justify-start { justify-content: flex-start !important; }
.justify-center { justify-content: center !important; }
.justify-end { justify-content: flex-end !important; }
.justify-between { justify-content: space-between !important; }
.justify-around { justify-content: space-around !important; }

// 位置
.relative { position: relative !important; }
.absolute { position: absolute !important; }
.fixed { position: fixed !important; }
.sticky { position: sticky !important; }

// 溢出控制
.overflow-hidden { overflow: hidden !important; }
.overflow-auto { overflow: auto !important; }
.overflow-scroll { overflow: scroll !important; }

// 宽度和高度
.w-full { width: 100% !important; }
.h-full { height: 100% !important; }
.min-h-full { min-height: 100% !important; }
.max-w-full { max-width: 100% !important; }

/* ==================== 移动端响应式工具类 ==================== */

// 小屏幕手机
@media (max-width: 479px) {
  .mobile\:hidden { display: none !important; }
  .mobile\:block { display: block !important; }
  .mobile\:flex { display: flex !important; }
  .mobile\:text-center { text-align: center !important; }
}

// 大屏幕手机
@media (min-width: 480px) and (max-width: 767px) {
  .mobile-sm\:hidden { display: none !important; }
  .mobile-sm\:block { display: block !important; }
  .mobile-sm\:flex { display: flex !important; }
  .mobile-sm\:text-center { text-align: center !important; }
}

// 平板设备
@media (min-width: 768px) and (max-width: 1023px) {
  .mobile-md\:hidden { display: none !important; }
  .mobile-md\:block { display: block !important; }
  .mobile-md\:flex { display: flex !important; }
  .mobile-md\:text-center { text-align: center !important; }
}

// 大屏设备
@media (min-width: 1024px) {
  .mobile-lg\:hidden { display: none !important; }
  .mobile-lg\:block { display: block !important; }
  .mobile-lg\:flex { display: flex !important; }
  .mobile-lg\:text-center { text-align: center !important; }
}

/* ==================== 移动端暗黑模式适配 ==================== */

@media (prefers-color-scheme: dark) {
  :root {
    --van-white: var(--bg-color-dark);
    --van-gray-1: var(--bg-color-page-dark);
    --van-gray-2: var(--bg-color-light-dark);
    --van-gray-3: var(--border-color-dark);
    --van-gray-4: var(--text-placeholder-dark);
    --van-gray-5: var(--text-secondary-dark);
    --van-gray-6: var(--text-regular-dark);
    --van-gray-7: var(--text-primary-dark);
  }
}

:global([data-theme="dark"]) {
  .mobile-container,
  .mobile-card,
  .mobile-btn,
  .mobile-input,
  .mobile-list-item,
  .mobile-stat-card {
    background-color: var(--bg-color-dark);
    color: var(--text-primary-dark);
    border-color: var(--border-color-dark);
  }

  .mobile-input {
    &:focus {
      border-color: var(--primary-color-dark);
    }
  }

  .mobile-btn {
    &:hover {
      box-shadow: var(--mobile-shadow-lg-dark);
    }
  }

  .mobile-card {
    &:hover {
      box-shadow: var(--mobile-shadow-lg-dark);
    }
  }
}

/* ==================== 移动端动画类 ==================== */

.fade-in {
  animation: fadeIn var(--mobile-transition-base) var(--transition-timing-ease);
}

.fade-out {
  animation: fadeOut var(--mobile-transition-base) var(--transition-timing-ease);
}

.slide-up {
  animation: slideUp var(--mobile-transition-slow) var(--transition-timing-ease);
}

.slide-down {
  animation: slideDown var(--mobile-transition-slow) var(--transition-timing-ease);
}

.slide-left {
  animation: slideLeft var(--mobile-transition-base) var(--transition-timing-ease);
}

.slide-right {
  animation: slideRight var(--mobile-transition-base) var(--transition-timing-ease);
}

.scale-up {
  animation: scaleUp var(--mobile-transition-base) var(--transition-timing-ease);
}

.scale-down {
  animation: scaleDown var(--mobile-transition-base) var(--transition-timing-ease);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes slideDown {
  from { transform: translateY(-20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes slideLeft {
  from { transform: translateX(20px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideRight {
  from { transform: translateX(-20px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes scaleUp {
  from { transform: scale(0.9); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes scaleDown {
  from { transform: scale(1.1); opacity: 1; }
  to { transform: scale(1); opacity: 1; }
}

/* ==================== 移动端无障碍支持 ==================== */

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.focus-visible {
  &:focus {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
  }
}

/* 高对比度模式 */
@media (prefers-contrast: high) {
  .mobile-btn,
  .mobile-input,
  .mobile-card {
    border-width: 2px;
  }
}

/* 减少动画 */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}