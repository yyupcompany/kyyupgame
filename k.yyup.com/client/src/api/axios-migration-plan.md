# Axios迁移计划

## 已完成的迁移

1. 配置文件迁移
   - [x] 创建了`request-config.ts`统一管理API配置
   - [x] 移除了`main.ts`中的axios全局配置
   - [x] 统一了认证相关配置
   - [x] 添加了createHeaders辅助函数处理请求头

2. 健康检查迁移
   - [x] 修改了`request.ts`中的健康检查请求
   - [x] 使用`API_CONFIG`中的配置替换硬编码URL

3. 报表相关迁移
   - [x] 修改了`dashboard.ts`中的报表下载请求
   - [x] 修改了报表调度相关的CRUD操作
   - [x] 修复了类型定义问题

4. API模块迁移
   - [x] 活动管理API (`activity.ts`)
   - [x] 广告管理API (`advertisement.ts`)
   - [x] 班级管理API (`class.ts`)
   - [x] 系统管理API (`system.ts`)
   - [x] 校长管理API (`principal.ts`)

5. 类型定义修复
   - [x] 创建`class.ts`类型定义
   - [x] 创建`system.ts`类型定义
   - [x] 创建`principal.ts`类型定义
   - [x] 创建`activity.ts`类型定义
   - [x] 创建`enrollment-plan.ts`类型定义
   - [x] 创建`dashboard.ts`类型定义

6. 测试工具迁移
   - [x] 更新API集成测试
   - [x] 安装测试依赖
   - [x] 创建测试类型定义
   - [x] 修复API导出问题
   - [x] 添加组件类型定义
   - [ ] 修复测试类型错误
   - [ ] 更新API单元测试
   - [ ] 更新性能测试脚本
   - [ ] 更新文档生成脚本

## 待迁移的内容

### 1. 测试工具迁移
- [ ] 修复测试文件中的类型错误
- [ ] 更新API单元测试
- [ ] 更新性能测试脚本
- [ ] 更新文档生成脚本

### 2. 移动端应用迁移
- [ ] 幼儿园移动端请求工具

## 进度跟踪

- [x] 完成健康检查迁移
- [x] 完成报表下载迁移
- [x] 完成报表调度迁移
- [x] 完成全局配置迁移
- [x] 完成活动API迁移
- [x] 完成广告API迁移
- [x] 完成班级API迁移
- [x] 完成系统API迁移
- [x] 完成校长API迁移
- [x] 完成类型定义创建
- [x] 完成API集成测试更新
- [x] 安装测试依赖
- [x] 创建测试类型定义
- [x] 修复API导出问题
- [x] 添加组件类型定义
- [ ] 修复测试类型错误
- [ ] 完成API单元测试更新
- [ ] 完成性能测试更新
- [ ] 完成移动端迁移
- [ ] 验证所有迁移的请求
- [ ] 清理冗余代码

## 下一步计划

1. 修复测试文件
   - [x] 安装缺失的依赖
   - [x] 创建类型定义
   - [x] 修复API导出问题
   - [x] 添加组件类型定义
   - [ ] 修复类型错误
   - [ ] 更新测试用例

2. 更新其他测试工具
   - [ ] 修改单元测试脚本
   - [ ] 更新性能测试脚本
   - [ ] 更新文档生成工具

3. 移动端适配
   - [ ] 评估移动端特殊需求
   - [ ] 确保兼容性
   - [ ] 优化移动端性能

4. 验证和清理
   - [ ] 验证所有API请求
   - [ ] 清理冗余代码
   - [ ] 更新API文档

## 注意事项

1. 类型系统
   - 确保`ApiResponse`类型定义统一
   - 处理好可选字段的类型

2. 错误处理
   - 保持一致的错误处理机制
   - 确保用户体验不受影响

3. 性能优化
   - 避免重复请求
   - 合理使用缓存 