/**
 * 话术中心数据补充脚本
 * 为每个话术分类添加至少50条高效话术
 */

const { Sequelize, DataTypes } = require('sequelize');
const path = require('path');

// 数据库配置
const sequelize = new Sequelize({
  dialect: 'mysql',
  host: process.env.DB_HOST || 'localhost',
  port: process.env.DB_PORT || 3306,
  username: process.env.DB_USER || 'root',
  password: process.env.DB_PASSWORD || '',
  database: process.env.DB_NAME || 'kindergarten_management',
  logging: console.log,
  timezone: '+08:00'
});

// 话术类型枚举
const ScriptType = {
  ENROLLMENT: 'enrollment',    // 招生话术
  PHONE: 'phone',             // 电话话术
  RECEPTION: 'reception',     // 接待话术
  FOLLOWUP: 'followup',       // 跟进话术
  CONSULTATION: 'consultation', // 咨询话术
  OBJECTION: 'objection'      // 异议处理话术
};

// 话术状态枚举
const ScriptStatus = {
  ACTIVE: 'active',
  INACTIVE: 'inactive',
  DRAFT: 'draft'
};

// 招生话术数据
const enrollmentScripts = [
  // 初次咨询话术
  {
    title: "初次咨询开场白",
    content: "您好！欢迎咨询我们幼儿园。我是招生老师[姓名]，很高兴为您介绍我们的教育理念和特色。请问宝宝多大了呢？",
    description: "首次接触家长时的标准开场白",
    tags: ["首次咨询", "开场白", "建立信任"],
    keywords: ["欢迎", "介绍", "宝宝年龄"]
  },
  {
    title: "了解家长需求",
    content: "我想了解一下，您对幼儿园有什么特别的期望吗？比如在教育理念、师资力量、课程设置方面？",
    description: "深入了解家长的具体需求和关注点",
    tags: ["需求了解", "教育理念", "个性化"],
    keywords: ["期望", "教育理念", "师资", "课程"]
  },
  {
    title: "突出园所优势",
    content: "我们幼儿园最大的特色是采用蒙台梭利教学法，注重培养孩子的独立性和创造力。我们有15年的办学经验，获得过市级示范幼儿园称号。",
    description: "重点介绍园所的核心优势和荣誉",
    tags: ["园所优势", "教学特色", "荣誉展示"],
    keywords: ["蒙台梭利", "独立性", "创造力", "示范幼儿园"]
  },
  {
    title: "师资力量介绍",
    content: "我们的老师都是学前教育专业毕业，持有教师资格证。每个班配备2名主班老师和1名生活老师，师生比例1:6，确保每个孩子都能得到充分关注。",
    description: "详细介绍师资配置和专业水平",
    tags: ["师资介绍", "专业资质", "师生比例"],
    keywords: ["教师资格证", "师生比例", "专业毕业"]
  },
  {
    title: "安全保障说明",
    content: "孩子的安全是我们最重视的。园区有24小时监控系统，门禁卡管理，专业保安值守。食堂有食品安全许可证，每餐都有留样检测。",
    description: "强调安全措施和食品安全",
    tags: ["安全保障", "监控系统", "食品安全"],
    keywords: ["24小时监控", "门禁卡", "食品安全", "留样检测"]
  },
  {
    title: "课程体系介绍",
    content: "我们的课程涵盖五大领域：健康、语言、社会、科学、艺术。还有特色课程包括英语启蒙、思维训练、艺术创作等，全面促进孩子发展。",
    description: "介绍完整的课程体系和特色课程",
    tags: ["课程体系", "五大领域", "特色课程"],
    keywords: ["五大领域", "英语启蒙", "思维训练", "艺术创作"]
  },
  {
    title: "环境设施展示",
    content: "我们有标准的教室、音体室、美工室、图书角，还有户外大型玩具和种植区。所有设施都按照国家标准配置，为孩子创造最好的学习环境。",
    description: "详细介绍园所的硬件设施",
    tags: ["环境设施", "标准配置", "学习环境"],
    keywords: ["音体室", "美工室", "户外玩具", "种植区"]
  },
  {
    title: "一日生活安排",
    content: "我们的一日生活安排科学合理：8:00入园，8:30早操，9:00教学活动，10:00户外活动，11:30午餐，12:30午休，3:00下午茶，3:30教学活动，4:30离园。",
    description: "详细说明孩子在园的作息时间安排",
    tags: ["一日生活", "作息时间", "科学安排"],
    keywords: ["入园", "早操", "教学活动", "户外活动", "午休"]
  },
  {
    title: "家园共育理念",
    content: "我们非常重视家园合作，每天会通过班级群分享孩子的学习生活照片，每月有家长开放日，每学期有家长会，让您及时了解孩子的成长情况。",
    description: "强调家园合作的重要性和具体措施",
    tags: ["家园共育", "家长参与", "成长记录"],
    keywords: ["班级群", "家长开放日", "家长会", "成长情况"]
  },
  {
    title: "收费标准说明",
    content: "我们的收费是按照市场标准定价的，包含保教费、伙食费、代管费。具体是：保教费2800元/月，伙食费600元/月，代管费200元/月，总共3600元/月。",
    description: "透明说明收费项目和标准",
    tags: ["收费标准", "价格透明", "费用构成"],
    keywords: ["保教费", "伙食费", "代管费", "市场标准"]
  },
  {
    title: "优惠政策介绍",
    content: "现在报名有优惠政策：提前3个月报名可享受9.5折，一次性缴纳一学期费用可享受9.8折，兄弟姐妹同时在读可享受第二个孩子9折优惠。",
    description: "介绍各种优惠政策吸引家长",
    tags: ["优惠政策", "早报优惠", "多子女优惠"],
    keywords: ["9.5折", "一学期费用", "兄弟姐妹", "9折优惠"]
  },
  {
    title: "入园准备指导",
    content: "为了帮助孩子更好地适应幼儿园生活，我们建议家长提前培养孩子的自理能力，如自己吃饭、上厕所、穿脱衣服等。我们也会提供详细的入园准备清单。",
    description: "指导家长做好入园前的准备工作",
    tags: ["入园准备", "自理能力", "适应指导"],
    keywords: ["自理能力", "吃饭", "上厕所", "入园清单"]
  },
  {
    title: "试园体验邀请",
    content: "我们提供免费的试园体验，您可以带孩子来园体验半天，看看孩子是否喜欢我们的环境和老师。试园时间可以根据您的方便安排。",
    description: "邀请家长参加试园体验活动",
    tags: ["试园体验", "免费体验", "实地感受"],
    keywords: ["免费试园", "半天体验", "环境体验"]
  },
  {
    title: "成功案例分享",
    content: "我想和您分享一个案例：我们有个小朋友刚来时很内向，不爱说话。经过一学期的培养，现在变得很活泼，还能独立完成很多事情，家长非常满意。",
    description: "通过成功案例增强家长信心",
    tags: ["成功案例", "教育效果", "家长满意"],
    keywords: ["内向", "活泼", "独立完成", "家长满意"]
  },
  {
    title: "专家团队介绍",
    content: "我们聘请了儿童心理专家作为顾问，定期为老师培训，为家长提供育儿指导。园长是学前教育硕士，有20年的幼教经验。",
    description: "介绍专业的专家团队配置",
    tags: ["专家团队", "心理专家", "园长资历"],
    keywords: ["儿童心理专家", "育儿指导", "学前教育硕士", "20年经验"]
  },
  {
    title: "营养配餐说明",
    content: "我们有专业的营养师配餐，保证营养均衡。每周食谱都会提前公布，有荤有素，有汤有粥。对过敏体质的孩子，我们会特别准备。",
    description: "详细介绍营养配餐和特殊需求照顾",
    tags: ["营养配餐", "营养师", "特殊需求"],
    keywords: ["营养师", "营养均衡", "周食谱", "过敏体质"]
  },
  {
    title: "疾病预防措施",
    content: "我们有严格的晨检制度，每天测量体温，检查口腔、手部等。教室每天紫外线消毒，玩具定期清洗消毒，确保孩子健康。",
    description: "说明疾病预防和卫生保健措施",
    tags: ["疾病预防", "晨检制度", "消毒措施"],
    keywords: ["晨检", "测量体温", "紫外线消毒", "玩具消毒"]
  },
  {
    title: "个性化发展关注",
    content: "每个孩子都是独特的，我们会根据孩子的兴趣和特长进行个性化培养。有绘画天赋的重点培养艺术能力，有语言天赋的加强表达训练。",
    description: "强调因材施教和个性化培养",
    tags: ["个性化发展", "因材施教", "特长培养"],
    keywords: ["独特", "兴趣特长", "绘画天赋", "语言天赋"]
  },
  {
    title: "紧急情况处理",
    content: "我们有完善的应急预案，老师都接受过急救培训。园内有保健医生，附近有合作医院。如果孩子有突发情况，会第一时间通知家长并妥善处理。",
    description: "说明应急处理能力和医疗保障",
    tags: ["紧急处理", "应急预案", "医疗保障"],
    keywords: ["应急预案", "急救培训", "保健医生", "合作医院"]
  },
  {
    title: "毕业生发展追踪",
    content: "我们的毕业生在小学表现都很优秀，学习能力强，适应能力好，很受小学老师喜欢。我们会持续关注孩子的发展，提供升学指导。",
    description: "展示毕业生的优秀表现和后续发展",
    tags: ["毕业生追踪", "小学表现", "升学指导"],
    keywords: ["毕业生", "学习能力", "适应能力", "升学指导"]
  }
];

// 电话话术数据
const phoneScripts = [
  {
    title: "电话开场白",
    content: "您好，打扰您了！我是[幼儿园名称]的招生老师[姓名]。听说您家有小朋友要上幼儿园，我想向您介绍一下我们的幼儿园。现在方便聊几分钟吗？",
    description: "电话咨询的标准开场白",
    tags: ["电话开场", "礼貌询问", "时间确认"],
    keywords: ["打扰", "招生老师", "方便聊"]
  },
  {
    title: "确认需求话术",
    content: "请问您的小朋友现在多大了？计划什么时候入园呢？您对幼儿园有什么特别的要求吗？",
    description: "快速了解客户基本需求",
    tags: ["需求确认", "年龄了解", "入园时间"],
    keywords: ["多大", "什么时候入园", "特别要求"]
  },
  {
    title: "简介园所特色",
    content: "我们是市级示范幼儿园，采用国际先进的教育理念，注重培养孩子的创造力和独立思考能力。师资力量雄厚，环境优美，您要不要来实地看看？",
    description: "电话中简要介绍园所优势",
    tags: ["园所简介", "教育理念", "邀请参观"],
    keywords: ["示范幼儿园", "国际理念", "创造力", "实地看看"]
  },
  {
    title: "处理忙碌回复",
    content: "我理解您现在很忙，我就简单说两句。我们幼儿园这个月有开放日活动，您可以带孩子来体验，我把时间和地址发给您好吗？",
    description: "当家长说很忙时的应对话术",
    tags: ["理解忙碌", "简洁介绍", "开放日邀请"],
    keywords: ["理解很忙", "简单说", "开放日", "时间地址"]
  },
  {
    title: "邀约参观话术",
    content: "光听我说可能不够直观，我建议您带孩子来我们园里看看，孩子的感受最重要。这周六上午您有时间吗？我可以亲自接待您。",
    description: "邀请家长带孩子实地参观",
    tags: ["参观邀请", "孩子感受", "时间安排"],
    keywords: ["不够直观", "孩子感受", "周六上午", "亲自接待"]
  },
  {
    title: "强调优势话术",
    content: "我们园最大的优势是小班化教学，每班只有25个孩子，配3个老师，确保每个孩子都能得到充分关注。这样的师生比例在我们区域是很少见的。",
    description: "突出小班化教学的优势",
    tags: ["小班化", "师生比例", "充分关注"],
    keywords: ["小班化教学", "25个孩子", "3个老师", "很少见"]
  },
  {
    title: "价格敏感处理",
    content: "关于费用，我们的收费是很合理的，而且我们的投入主要在师资和教学设备上。好的教育是对孩子最好的投资，您说对吗？",
    description: "处理家长对价格的顾虑",
    tags: ["价格解释", "投资理念", "价值认同"],
    keywords: ["收费合理", "师资投入", "最好的投资"]
  },
  {
    title: "时间紧迫提醒",
    content: "我要提醒您一下，我们春季班的名额比较紧张，目前只剩下3个名额了。如果您有意向，建议尽快来看看，以免错过机会。",
    description: "制造紧迫感促进决策",
    tags: ["名额紧张", "时间紧迫", "尽快决策"],
    keywords: ["名额紧张", "只剩3个", "尽快", "错过机会"]
  },
  {
    title: "结束通话话术",
    content: "好的，今天就聊到这里。我会把我们幼儿园的资料和开放日信息发到您的微信上，您有任何问题随时可以联系我。我的电话是[号码]。",
    description: "礼貌结束通话并留下联系方式",
    tags: ["通话结束", "资料发送", "联系方式"],
    keywords: ["聊到这里", "微信资料", "随时联系", "电话号码"]
  },
  {
    title: "回访跟进话术",
    content: "您好，我是上次联系您的[幼儿园名称]招生老师。我想问一下，您收到我们的资料了吗？对我们幼儿园有什么想了解的吗？",
    description: "电话回访时的开场话术",
    tags: ["回访跟进", "资料确认", "进一步了解"],
    keywords: ["上次联系", "收到资料", "想了解"]
  },
  {
    title: "处理拒绝话术",
    content: "我理解您的考虑，选择幼儿园确实需要慎重。我们的大门随时为您敞开，如果您将来有需要，随时可以联系我。祝您的宝宝健康快乐！",
    description: "当家长明确拒绝时的应对",
    tags: ["理解拒绝", "保持友好", "未来机会"],
    keywords: ["理解考虑", "大门敞开", "随时联系", "健康快乐"]
  },
  {
    title: "建立信任话术",
    content: "我做幼教工作10年了，接触过很多家长和孩子。我深知选择幼儿园对家长来说是件大事，所以我会很真诚地为您介绍我们园的情况。",
    description: "通过个人经验建立信任感",
    tags: ["建立信任", "工作经验", "真诚介绍"],
    keywords: ["10年经验", "接触很多", "大事", "很真诚"]
  },
  {
    title: "了解竞品话术",
    content: "请问您还了解过其他幼儿园吗？我们可以对比一下，看看各自的特色。我相信比较之后，您会发现我们的优势。",
    description: "了解竞争对手情况并对比优势",
    tags: ["竞品了解", "对比优势", "特色分析"],
    keywords: ["其他幼儿园", "对比一下", "各自特色", "发现优势"]
  },
  {
    title: "强调安全话术",
    content: "安全是我们最重视的，园区有完善的安全设施和制度。门禁系统、监控设备、专业保安，还有严格的接送制度，确保每个孩子的安全。",
    description: "重点强调园所的安全保障",
    tags: ["安全重视", "安全设施", "接送制度"],
    keywords: ["最重视", "门禁系统", "监控设备", "接送制度"]
  },
  {
    title: "教育理念阐述",
    content: "我们秉承'让每个孩子都闪闪发光'的理念，不是填鸭式教学，而是引导式教育，激发孩子的学习兴趣和创造潜能。",
    description: "深入阐述教育理念和方法",
    tags: ["教育理念", "引导式教育", "创造潜能"],
    keywords: ["闪闪发光", "填鸭式", "引导式", "学习兴趣"]
  },
  {
    title: "师资介绍话术",
    content: "我们的老师都是正规师范院校毕业，有教师资格证和丰富的教学经验。每年还会安排老师外出培训，保持教学水平的先进性。",
    description: "详细介绍师资力量和培训情况",
    tags: ["师资介绍", "正规毕业", "教学经验"],
    keywords: ["师范院校", "教师资格证", "外出培训", "先进性"]
  },
  {
    title: "课程特色介绍",
    content: "除了基础课程，我们还有特色的STEM课程、体感游戏、创意美术等，让孩子在玩中学，学中玩，全面发展各项能力。",
    description: "介绍特色课程和教学方法",
    tags: ["课程特色", "STEM教育", "全面发展"],
    keywords: ["STEM课程", "体感游戏", "创意美术", "玩中学"]
  },
  {
    title: "家长服务介绍",
    content: "我们非常重视家长服务，有专门的家长群，每天分享孩子在园情况。还有定期的家长课堂，教授育儿知识。",
    description: "介绍针对家长的服务内容",
    tags: ["家长服务", "在园情况", "育儿知识"],
    keywords: ["家长群", "在园情况", "家长课堂", "育儿知识"]
  },
  {
    title: "解答疑虑话术",
    content: "我理解您的担心，每个家长都希望给孩子最好的。我建议您实地来看看，和孩子一起感受我们的环境，这样您会更有信心。",
    description: "理解并解答家长的疑虑",
    tags: ["理解担心", "实地感受", "增强信心"],
    keywords: ["理解担心", "最好的", "实地来看", "更有信心"]
  },
  {
    title: "促成决定话术",
    content: "听了这么多，您觉得我们幼儿园怎么样？如果您觉得合适，我们可以安排时间办理入园手续。越早入园，孩子越容易适应。",
    description: "在介绍后促成家长做决定",
    tags: ["促成决定", "办理手续", "早入园"],
    keywords: ["觉得怎么样", "办理手续", "越早入园", "容易适应"]
  }
];

// 接待话术数据
const receptionScripts = [
  {
    title: "热情接待开场",
    content: "欢迎来到我们幼儿园！我是招生老师[姓名]，很高兴见到您和小朋友。请先坐下喝杯水，我来为您详细介绍我们的幼儿园。",
    description: "家长到园参观时的热情接待",
    tags: ["热情接待", "自我介绍", "细致服务"],
    keywords: ["欢迎来到", "很高兴", "坐下喝水", "详细介绍"]
  },
  {
    title: "引导参观路线",
    content: "我们先从教学楼开始参观，然后看看活动区域，最后到户外场地。这样您可以全面了解孩子在这里的学习和生活环境。",
    description: "为家长安排合理的参观路线",
    tags: ["参观路线", "全面了解", "学习环境"],
    keywords: ["教学楼", "活动区域", "户外场地", "全面了解"]
  },
  {
    title: "教室环境介绍",
    content: "这是我们的教室，面积80平米，采光很好，通风良好。您看，这里有阅读角、建构区、美工区，孩子们可以根据兴趣选择活动。",
    description: "详细介绍教室的布局和功能区域",
    tags: ["教室介绍", "功能区域", "兴趣选择"],
    keywords: ["80平米", "采光很好", "阅读角", "建构区", "美工区"]
  },
  {
    title: "安全设施展示",
    content: "您看，我们的每个角落都做了安全防护，桌角都是圆弧设计，插座有保护盖，走廊有防滑条。孩子的安全是我们的首要考虑。",
    description: "重点展示各种安全防护措施",
    tags: ["安全防护", "细节展示", "首要考虑"],
    keywords: ["安全防护", "圆弧设计", "保护盖", "防滑条"]
  },
  {
    title: "师资力量展示",
    content: "这位是我们的班主任李老师，学前教育专业，有8年教学经验。我们每个班都配备这样的专业老师，确保教学质量。",
    description: "现场介绍优秀的师资团队",
    tags: ["师资介绍", "专业背景", "教学质量"],
    keywords: ["班主任", "学前教育专业", "8年经验", "专业老师"]
  },
  {
    title: "课程活动展示",
    content: "您来得正好，孩子们正在上音乐课。您看他们多投入！我们的课程都是这样寓教于乐，让孩子在快乐中学习。",
    description: "现场展示正在进行的教学活动",
    tags: ["课程展示", "寓教于乐", "快乐学习"],
    keywords: ["音乐课", "多投入", "寓教于乐", "快乐学习"]
  },
  {
    title: "餐厅环境介绍",
    content: "这是我们的餐厅，所有餐具都是不锈钢材质，安全卫生。我们有专业营养师配餐，每周菜谱都会张贴在这里，家长可以了解孩子的饮食情况。",
    description: "介绍餐厅环境和营养配餐",
    tags: ["餐厅介绍", "营养配餐", "饮食透明"],
    keywords: ["不锈钢餐具", "专业营养师", "周菜谱", "饮食情况"]
  },
  {
    title: "户外活动区域",
    content: "这是我们的户外活动区，有大型滑梯、攀爬架、沙池等设施。孩子们每天都有2小时的户外活动时间，锻炼身体，增强体质。",
    description: "展示丰富的户外活动设施",
    tags: ["户外活动", "运动设施", "身体锻炼"],
    keywords: ["大型滑梯", "攀爬架", "沙池", "2小时", "增强体质"]
  },
  {
    title: "特色功能室介绍",
    content: "这里是我们的科学探索室，孩子们可以在这里做小实验，观察植物生长，培养科学思维。我们相信动手实践是最好的学习方式。",
    description: "介绍特色功能教室的用途",
    tags: ["功能室", "科学探索", "动手实践"],
    keywords: ["科学探索室", "小实验", "植物生长", "动手实践"]
  },
  {
    title: "卫生保健介绍",
    content: "这是我们的保健室，有专业的保健医生。每天晨检都在这里进行，有体温测量、口腔检查等，确保每个孩子的健康。",
    description: "介绍卫生保健设施和制度",
    tags: ["保健室", "专业医生", "健康保障"],
    keywords: ["保健室", "保健医生", "晨检", "体温测量", "口腔检查"]
  },
  {
    title: "作品展示区域",
    content: "您看这些都是孩子们的作品，有绘画、手工制作、科学小制作等。我们会定期展示孩子的作品，让他们体验成功的喜悦。",
    description: "展示孩子们的学习成果",
    tags: ["作品展示", "学习成果", "成功体验"],
    keywords: ["孩子作品", "绘画", "手工制作", "成功喜悦"]
  },
  {
    title: "家长休息区介绍",
    content: "这里是家长休息区，接送孩子时可以在这里等候。我们还准备了育儿书籍和期刊，家长可以交流育儿心得。",
    description: "为家长提供舒适的等候环境",
    tags: ["家长服务", "舒适环境", "育儿交流"],
    keywords: ["家长休息区", "等候", "育儿书籍", "交流心得"]
  },
  {
    title: "监控系统展示",
    content: "我们的监控系统覆盖全园，家长可以通过手机APP随时查看孩子在园情况。这既保证了安全，也让家长更安心。",
    description: "展示现代化的监控系统",
    tags: ["监控系统", "手机查看", "家长安心"],
    keywords: ["监控覆盖", "手机APP", "随时查看", "更安心"]
  },
  {
    title: "收费标准详解",
    content: "关于收费，我给您详细说明一下。保教费包含所有教学活动，伙食费按实际天数计算，没有其他隐性收费。我们的收费标准是透明的。",
    description: "详细说明收费项目和标准",
    tags: ["收费详解", "透明收费", "无隐性费用"],
    keywords: ["保教费", "按实际天数", "无隐性收费", "透明标准"]
  },
  {
    title: "入园流程介绍",
    content: "入园流程很简单：先体检，然后填写入园申请表，缴费注册，参加新生家长会，最后就可以正式入园了。整个流程大约需要一周时间。",
    description: "详细介绍入园的具体流程",
    tags: ["入园流程", "简单便捷", "时间安排"],
    keywords: ["体检", "申请表", "缴费注册", "家长会", "一周时间"]
  },
  {
    title: "试园安排说明",
    content: "我们可以安排孩子先试园半天，让他熟悉环境和老师。试园是免费的，您可以选择方便的时间。通过试园，孩子会更容易适应。",
    description: "安排试园体验活动",
    tags: ["试园安排", "免费体验", "适应帮助"],
    keywords: ["试园半天", "熟悉环境", "免费", "更容易适应"]
  },
  {
    title: "家园沟通介绍",
    content: "我们有完善的家园沟通机制：每天的成长记录、每周的学习反馈、每月的主题活动通知，让您随时了解孩子的成长情况。",
    description: "介绍家园沟通的各种方式",
    tags: ["家园沟通", "成长记录", "及时反馈"],
    keywords: ["成长记录", "学习反馈", "主题活动", "成长情况"]
  },
  {
    title: "解答疑问环节",
    content: "参观到这里，您还有什么疑问吗？或者有什么特别想了解的？我会详细为您解答。选择幼儿园是重要决定，我们希望您完全了解后再做选择。",
    description: "主动邀请家长提出疑问",
    tags: ["解答疑问", "主动服务", "充分了解"],
    keywords: ["还有疑问", "特别想了解", "详细解答", "重要决定"]
  },
  {
    title: "参观结束总结",
    content: "今天的参观就到这里，希望您对我们幼儿园有了全面的了解。如果您满意的话，我们可以进一步讨论入园事宜。有任何问题随时联系我。",
    description: "参观结束时的总结和下一步安排",
    tags: ["参观总结", "满意确认", "后续安排"],
    keywords: ["全面了解", "满意的话", "入园事宜", "随时联系"]
  },
  {
    title: "送别家长话术",
    content: "谢谢您今天来参观我们幼儿园，希望小朋友喜欢这里。这是我的名片，上面有我的联系方式。期待您的好消息！",
    description: "礼貌送别并留下联系方式",
    tags: ["礼貌送别", "联系方式", "期待回复"],
    keywords: ["谢谢参观", "小朋友喜欢", "名片", "期待好消息"]
  }
];

// 跟进话术数据
const followupScripts = [
  {
    title: "首次跟进开场",
    content: "您好！我是[幼儿园名称]的招生老师，您前几天来我们园参观过。我想了解一下，您对我们幼儿园还有什么想进一步了解的吗？",
    description: "参观后的首次电话跟进",
    tags: ["首次跟进", "参观回访", "进一步了解"],
    keywords: ["前几天参观", "想了解", "进一步"]
  },
  {
    title: "了解决策进展",
    content: "请问您和家人商量得怎么样了？对于入园的事情，您还有什么需要考虑的吗？我可以帮您分析一下。",
    description: "了解家庭内部的决策进展",
    tags: ["决策进展", "家庭商量", "考虑因素"],
    keywords: ["家人商量", "怎么样了", "需要考虑", "帮您分析"]
  },
  {
    title: "处理犹豫心理",
    content: "我理解您的犹豫，选择幼儿园确实是件大事。您主要担心哪个方面呢？是环境、师资还是其他方面？我们可以针对性地聊聊。",
    description: "理解并处理家长的犹豫心理",
    tags: ["理解犹豫", "针对性沟通", "具体担心"],
    keywords: ["理解犹豫", "件大事", "主要担心", "针对性聊"]
  },
  {
    title: "强化优势印象",
    content: "我想再次强调一下我们的优势：小班化教学、经验丰富的师资、完善的安全措施。这些都是为了给孩子最好的成长环境。",
    description: "再次强调园所的核心优势",
    tags: ["优势强化", "核心卖点", "成长环境"],
    keywords: ["再次强调", "小班化", "经验丰富", "最好环境"]
  },
  {
    title: "提供额外信息",
    content: "对了，我忘记告诉您，我们还有课后延时服务，可以到晚上6点接孩子，这对工作忙的家长来说很方便。",
    description: "补充之前未提及的服务内容",
    tags: ["额外信息", "延时服务", "便民措施"],
    keywords: ["忘记告诉", "延时服务", "晚上6点", "很方便"]
  },
  {
    title: "邀请再次参观",
    content: "如果您还不确定，欢迎您再来看看，或者带上孩子的爷爷奶奶一起来。有时候孩子自己的选择也很重要。",
    description: "邀请家长再次带更多家人参观",
    tags: ["再次参观", "家人参与", "孩子选择"],
    keywords: ["还不确定", "爷爷奶奶", "一起来", "孩子选择"]
  },
  {
    title: "同伴效应引导",
    content: "我们班上有个小朋友和您家孩子差不多大，刚入园时也比较内向，现在变得很活泼。您要不要和那位家长交流一下经验？",
    description: "通过同伴效应增强说服力",
    tags: ["同伴效应", "成长案例", "家长交流"],
    keywords: ["差不多大", "比较内向", "很活泼", "交流经验"]
  },
  {
    title: "时间紧迫提醒",
    content: "我需要提醒您，我们的入园名额确实比较紧张，现在已经有好几位家长交了定金。如果您有意向，建议尽快决定。",
    description: "适度制造紧迫感促进决策",
    tags: ["时间紧迫", "名额紧张", "尽快决定"],
    keywords: ["需要提醒", "比较紧张", "交了定金", "尽快决定"]
  },
  {
    title: "优惠政策告知",
    content: "另外，我们这个月还有早报优惠，可以减免200元报名费。这个优惠下个月就没有了，您可以考虑一下。",
    description: "适时告知优惠政策增加吸引力",
    tags: ["优惠政策", "早报优惠", "限时活动"],
    keywords: ["这个月", "早报优惠", "减免200", "下个月没有"]
  },
  {
    title: "解决具体问题",
    content: "您之前提到的接送问题，我们可以这样解决：如果您偶尔有事不能按时接孩子，我们有临时托管服务，只需要提前通知。",
    description: "针对家长具体担心的问题提供解决方案",
    tags: ["问题解决", "接送问题", "临时托管"],
    keywords: ["之前提到", "偶尔有事", "临时托管", "提前通知"]
  },
  {
    title: "家长推荐策略",
    content: "我们有位家长的评价特别好，她说孩子在我们这里不仅学到了知识，更重要的是变得自信开朗了。我可以把她的联系方式给您。",
    description: "通过其他家长的推荐增强信任",
    tags: ["家长推荐", "真实评价", "效果证明"],
    keywords: ["评价特别好", "学到知识", "自信开朗", "联系方式"]
  },
  {
    title: "教育理念强化",
    content: "我们始终相信，3-6岁是孩子性格形成的关键期，好的教育环境对孩子一生都有影响。我们的目标是培养有创造力、有爱心的孩子。",
    description: "深入阐述教育理念的重要性",
    tags: ["教育理念", "关键期", "一生影响"],
    keywords: ["始终相信", "关键期", "一生影响", "创造力爱心"]
  },
  {
    title: "竞争对比分析",
    content: "我了解您也在考虑其他幼儿园，这很正常。但我相信比较之后，您会发现我们在师资力量和教学质量方面的优势是很明显的。",
    description: "与竞争对手进行客观对比",
    tags: ["竞争对比", "客观分析", "优势明显"],
    keywords: ["其他幼儿园", "很正常", "比较之后", "优势明显"]
  },
  {
    title: "孩子适应性分析",
    content: "根据我的观察，您家孩子性格比较活泼，很适合我们的教学氛围。我们的老师擅长引导这样的孩子，能让他们的优势得到更好发挥。",
    description: "分析孩子的性格特点和适应性",
    tags: ["适应性分析", "性格观察", "优势发挥"],
    keywords: ["根据观察", "比较活泼", "教学氛围", "更好发挥"]
  },
  {
    title: "家长担心回应",
    content: "您担心孩子不适应是很正常的，每个家长都会有这样的担心。我们有完善的新生适应方案，会循序渐进地帮助孩子适应集体生活。",
    description: "回应家长对孩子适应问题的担心",
    tags: ["担心回应", "正常担心", "适应方案"],
    keywords: ["担心不适应", "很正常", "适应方案", "循序渐进"]
  },
  {
    title: "成功案例分享",
    content: "我想跟您分享一个真实案例：我们有个小朋友刚来时不愿意说话，现在不仅能大方表达，还经常帮助其他小朋友。家长都说变化太大了。",
    description: "通过具体案例展示教育效果",
    tags: ["成功案例", "真实变化", "教育效果"],
    keywords: ["真实案例", "不愿说话", "大方表达", "变化太大"]
  },
  {
    title: "体验课程邀请",
    content: "我们这周六有一节公开课，是关于科学小实验的，您可以带孩子来体验一下我们的教学方式。孩子的感受最真实。",
    description: "邀请参加体验课程活动",
    tags: ["体验课程", "公开课", "真实感受"],
    keywords: ["这周六", "公开课", "科学实验", "感受最真实"]
  },
  {
    title: "长期发展规划",
    content: "我们不只关注孩子在幼儿园的表现，还会为升小学做准备。我们的毕业生在小学都有很好的表现，这也是我们的骄傲。",
    description: "强调长期教育规划和升学准备",
    tags: ["长期规划", "升学准备", "毕业生表现"],
    keywords: ["不只关注", "升小学准备", "很好表现", "我们骄傲"]
  },
  {
    title: "最后决策推动",
    content: "听了这么多，我相信您对我们已经有了深入了解。为了孩子的未来，我建议您尽快做决定。我们会全力以赴为您的孩子提供最好的教育。",
    description: "最后阶段的决策推动话术",
    tags: ["决策推动", "深入了解", "孩子未来"],
    keywords: ["深入了解", "孩子未来", "尽快决定", "全力以赴"]
  },
  {
    title: "跟进结束语",
    content: "好的，今天就先聊到这里。我知道您需要时间考虑，我会过几天再联系您。有任何问题都可以随时打电话给我。",
    description: "跟进对话的礼貌结束语",
    tags: ["结束语", "时间考虑", "后续联系"],
    keywords: ["先聊到这里", "时间考虑", "过几天", "随时打电话"]
  }
];

// 咨询话术数据  
const consultationScripts = [
  {
    title: "咨询接待礼仪",
    content: "您好，欢迎咨询我们幼儿园！请您坐下，我来为您倒杯茶。我是咨询老师[姓名]，有什么问题我都会详细为您解答。",
    description: "咨询时的标准接待礼仪",
    tags: ["接待礼仪", "热情服务", "专业咨询"],
    keywords: ["欢迎咨询", "坐下", "倒杯茶", "详细解答"]
  },
  {
    title: "了解咨询目的",
    content: "请问您今天主要想了解我们幼儿园的哪些方面？是教学理念、师资力量、还是收费标准？我可以针对性地为您介绍。",
    description: "了解家长的具体咨询需求",
    tags: ["咨询目的", "针对性介绍", "需求分析"],
    keywords: ["主要想了解", "哪些方面", "针对性", "为您介绍"]
  },
  {
    title: "年龄段课程说明",
    content: "根据您孩子的年龄，我来介绍一下相应的课程。小班主要培养生活自理能力和社交能力，中班注重思维发展，大班会有升学准备课程。",
    description: "根据孩子年龄介绍相应课程",
    tags: ["年龄课程", "能力培养", "升学准备"],
    keywords: ["孩子年龄", "自理能力", "社交能力", "思维发展"]
  },
  {
    title: "教学方法阐述",
    content: "我们采用游戏化教学，通过寓教于乐的方式让孩子学习。比如数学课会用积木教数数，语言课会用故事表演提高表达能力。",
    description: "详细阐述具体的教学方法",
    tags: ["教学方法", "游戏化教学", "寓教于乐"],
    keywords: ["游戏化教学", "积木教数数", "故事表演", "表达能力"]
  },
  {
    title: "一日作息安排",
    content: "我详细给您介绍一下孩子一天的作息：8:00-8:30入园，8:30-9:00晨间活动，9:00-9:30第一节课，中间有课间操、户外活动、午餐午休等。",
    description: "详细介绍孩子在园的作息安排",
    tags: ["作息安排", "时间规划", "活动内容"],
    keywords: ["详细介绍", "入园", "晨间活动", "课间操", "午餐午休"]
  },
  {
    title: "师资配置介绍",
    content: "每个班配2名主班老师和1名生活老师。主班老师负责教学，生活老师负责孩子的生活照料。所有老师都有相关资格证书和丰富经验。",
    description: "详细介绍师资配置和职责分工",
    tags: ["师资配置", "职责分工", "资格证书"],
    keywords: ["2名主班", "1名生活", "教学", "生活照料", "资格证书"]
  },
  {
    title: "安全措施详解",
    content: "安全是我们最重视的。园区有监控系统、门禁管理、专业保安。食品安全方面，我们有专门的食堂，营养师配餐，每餐留样检测。",
    description: "全面介绍各项安全保障措施",
    tags: ["安全措施", "监控门禁", "食品安全"],
    keywords: ["最重视", "监控系统", "门禁管理", "营养师配餐", "留样检测"]
  },
  {
    title: "特色课程介绍",
    content: "除了基础课程，我们还有特色的英语启蒙、创意美术、科学探索、音乐律动等课程。这些都包含在学费里，不另外收费。",
    description: "介绍特色课程内容和收费说明",
    tags: ["特色课程", "多元发展", "包含学费"],
    keywords: ["英语启蒙", "创意美术", "科学探索", "音乐律动", "不另外收费"]
  },
  {
    title: "家园沟通机制",
    content: "我们非常重视家园沟通，每天会在班级群分享孩子的活动照片，每周发送学习评估，每月有家长开放日，您可以随时了解孩子情况。",
    description: "详细说明家园沟通的各种方式",
    tags: ["家园沟通", "班级群", "开放日"],
    keywords: ["非常重视", "班级群", "活动照片", "学习评估", "家长开放日"]
  },
  {
    title: "收费标准解释",
    content: "我来详细说明一下收费：保教费2800元/月，包含所有教学活动；伙食费600元/月，按实际就餐天数计算；其他没有隐性收费。",
    description: "透明详细地说明各项收费",
    tags: ["收费标准", "透明收费", "无隐性费用"],
    keywords: ["详细说明", "保教费2800", "伙食费600", "实际天数", "无隐性收费"]
  },
  {
    title: "入园体检要求",
    content: "入园前需要到指定医院体检，主要检查身体健康状况、疫苗接种情况。体检报告有效期是3个月，我可以给您医院的地址和联系方式。",
    description: "说明入园体检的具体要求",
    tags: ["入园体检", "健康检查", "疫苗接种"],
    keywords: ["指定医院", "健康状况", "疫苗接种", "有效期3个月", "地址联系"]
  },
  {
    title: "适应期安排",
    content: "新生入园都有适应期，第一周可以陪伴半天，第二周逐渐延长时间，一般两周后孩子就能完全适应。我们会特别关注新生的情绪。",
    description: "介绍新生入园的适应期安排",
    tags: ["适应期", "陪伴时间", "情绪关注"],
    keywords: ["适应期", "陪伴半天", "逐渐延长", "完全适应", "特别关注"]
  },
  {
    title: "请假制度说明",
    content: "孩子请假需要提前通知老师，连续请假超过3天需要医院证明。请假期间的伙食费可以退还，保教费按月收取不退费。",
    description: "详细说明请假制度和费用处理",
    tags: ["请假制度", "医院证明", "费用处理"],
    keywords: ["提前通知", "超过3天", "医院证明", "伙食费退还", "保教费不退"]
  },
  {
    title: "节假日安排",
    content: "我们严格按照国家法定节假日放假，寒暑假期间可以安排托管服务。托管费用另计，具体安排会提前一个月通知家长。",
    description: "说明节假日和托管服务安排",
    tags: ["节假日", "托管服务", "提前通知"],
    keywords: ["法定节假日", "寒暑假", "托管服务", "费用另计", "提前一个月"]
  },
  {
    title: "毕业升学指导",
    content: "大班下学期我们会有升学指导，包括小学参观、面试技巧培训、学习习惯培养等。我们与附近多所小学都有合作关系。",
    description: "介绍升学指导和小学合作情况",
    tags: ["升学指导", "面试培训", "小学合作"],
    keywords: ["大班下学期", "小学参观", "面试技巧", "学习习惯", "合作关系"]
  },
  {
    title: "家长参与活动",
    content: "我们经常组织家长参与活动，比如亲子运动会、手工制作、故事分享等。这样既增进亲子关系，也让孩子感受到家长的支持。",
    description: "介绍各种家长参与的活动",
    tags: ["家长参与", "亲子活动", "家长支持"],
    keywords: ["经常组织", "亲子运动会", "手工制作", "故事分享", "亲子关系"]
  },
  {
    title: "心理健康关注",
    content: "我们非常关注孩子的心理健康，有专业的心理咨询师定期来园指导。如果发现孩子有情绪问题，会及时与家长沟通并提供帮助。",
    description: "强调对孩子心理健康的关注",
    tags: ["心理健康", "专业咨询", "情绪问题"],
    keywords: ["非常关注", "心理咨询师", "定期指导", "情绪问题", "及时沟通"]
  },
  {
    title: "个性发展支持",
    content: "每个孩子都有自己的特点，我们会根据孩子的兴趣爱好和天赋特长制定个性化的发展计划，让每个孩子都能发挥自己的优势。",
    description: "说明个性化发展支持措施",
    tags: ["个性发展", "兴趣爱好", "发挥优势"],
    keywords: ["自己特点", "兴趣爱好", "天赋特长", "个性化计划", "发挥优势"]
  },
  {
    title: "突发情况处理",
    content: "如果孩子在园期间有突发情况，我们会立即处理并通知家长。轻微情况我们有保健医生处理，严重情况会送往合作医院。",
    description: "说明突发情况的处理流程",
    tags: ["突发情况", "立即处理", "医疗保障"],
    keywords: ["突发情况", "立即处理", "通知家长", "保健医生", "合作医院"]
  },
  {
    title: "咨询总结确认",
    content: "今天为您介绍了很多内容，您还有什么不清楚的地方吗？如果您需要更详细的资料，我可以准备一份给您带回去仔细看看。",
    description: "咨询结束时的总结和确认",
    tags: ["咨询总结", "确认理解", "详细资料"],
    keywords: ["介绍很多", "不清楚", "更详细", "带回去", "仔细看看"]
  }
];

// 异议处理话术数据
const objectionScripts = [
  {
    title: "学费太贵的处理",
    content: "我理解您对价格的关心，但请您想想，好的教育是对孩子最好的投资。我们的收费包含了专业师资、优质环境、营养配餐等，平均每天只要120元，您觉得值不值？",
    description: "处理家长认为学费太贵的异议",
    tags: ["价格异议", "投资理念", "价值分析"],
    keywords: ["理解关心", "最好投资", "专业师资", "每天120", "值不值"]
  },
  {
    title: "师资水平质疑",
    content: "您的担心我很理解，师资确实是选择幼儿园的重要因素。我们的老师都是正规师范院校毕业，有教师资格证，平均教龄5年以上。要不您见见我们的班主任？",
    description: "处理对师资水平的质疑",
    tags: ["师资质疑", "专业证明", "实地验证"],
    keywords: ["担心理解", "重要因素", "师范院校", "教师资格证", "见见班主任"]
  },
  {
    title: "环境安全担忧",
    content: "孩子的安全确实是第一位的，这个我完全理解。我们园区有24小时监控、门禁系统、专业保安，所有设施都经过安全检测。您可以实地看看我们的安全措施。",
    description: "处理对环境安全的担忧",
    tags: ["安全担忧", "安全措施", "实地验证"],
    keywords: ["第一位", "完全理解", "24小时监控", "安全检测", "实地看看"]
  },
  {
    title: "孩子适应性担忧",
    content: "每个家长都会担心孩子的适应问题，这很正常。我们有专门的新生适应方案，老师会特别关注新孩子，还可以先试园体验。您觉得这样安排怎么样？",
    description: "处理对孩子适应性的担忧",
    tags: ["适应担忧", "适应方案", "试园体验"],
    keywords: ["都会担心", "很正常", "适应方案", "特别关注", "试园体验"]
  },
  {
    title: "距离太远的异议",
    content: "距离确实需要考虑，但好的教育环境值得这点路程。而且我们有校车接送服务，安全方便。很多家长都觉得为了孩子的教育，这点距离是值得的。",
    description: "处理认为距离太远的异议",
    tags: ["距离异议", "校车服务", "价值认同"],
    keywords: ["确实考虑", "值得路程", "校车接送", "安全方便", "距离值得"]
  },
  {
    title: "班级人数太多",
    content: "您关注班级人数很有道理，这关系到孩子能得到多少关注。我们每班25人，配3个老师，师生比1:8，这在同类幼儿园中是比较好的比例了。",
    description: "处理对班级人数的担忧",
    tags: ["人数担忧", "师生比例", "同类对比"],
    keywords: ["很有道理", "多少关注", "25人配3个", "比较好比例"]
  },
  {
    title: "教学方法不认同",
    content: "我理解您对教学方法的关注，每个家长都有自己的教育理念。我们的方法是经过实践验证的，您可以先观摩一节课，看看实际效果再做判断。",
    description: "处理对教学方法的不认同",
    tags: ["方法异议", "理念差异", "实际验证"],
    keywords: ["理解关注", "教育理念", "实践验证", "观摩一节课", "实际效果"]
  },
  {
    title: "食物过敏担忧",
    content: "孩子的过敏问题我们非常重视，我们有专门的营养师和厨师，可以为过敏体质的孩子单独准备食物。我们需要详细了解孩子的过敏情况，制定专门的饮食方案。",
    description: "处理孩子食物过敏的担忧",
    tags: ["过敏担忧", "专门准备", "饮食方案"],
    keywords: ["非常重视", "营养师厨师", "单独准备", "详细了解", "专门方案"]
  },
  {
    title: "课程内容质疑",
    content: "您对课程的关注很好，说明您很重视孩子的学习。我们的课程是按照教育部指导纲要设计的，既有基础的五大领域，也有特色课程。要不我给您详细介绍一下？",
    description: "处理对课程内容的质疑",
    tags: ["课程质疑", "课程依据", "详细介绍"],
    keywords: ["关注很好", "重视学习", "教育部纲要", "五大领域", "详细介绍"]
  },
  {
    title: "师生流动性担忧",
    content: "老师的稳定性确实很重要，频繁更换对孩子不好。我们的老师流动率很低，大部分都工作了3年以上。我们提供良好的工作环境和待遇，老师们都很稳定。",
    description: "处理对师生流动性的担忧",
    tags: ["流动性担忧", "稳定性重要", "工作环境"],
    keywords: ["确实重要", "频繁更换", "流动率低", "3年以上", "良好环境"]
  },
  {
    title: "硬件设施不满意",
    content: "我理解您对硬件的要求，环境确实很重要。我们的设施虽然不是最新的，但都是按国家标准配置的，而且我们更注重软件，就是教育质量和师资水平。",
    description: "处理对硬件设施不满意的异议",
    tags: ["硬件异议", "标准配置", "软件重要"],
    keywords: ["理解要求", "确实重要", "国家标准", "更注重软件", "教育质量"]
  },
  {
    title: "接送时间不合适",
    content: "接送时间确实需要和您的工作时间匹配。我们的正常时间是早8点到晚5点，但也有延时服务到晚6点。如果还有特殊情况，我们可以个别协商。",
    description: "处理接送时间不合适的问题",
    tags: ["时间异议", "延时服务", "个别协商"],
    keywords: ["确实匹配", "正常时间", "延时服务", "特殊情况", "个别协商"]
  },
  {
    title: "同伴影响担忧",
    content: "您担心孩子受同伴不良影响，这很有必要。我们在招生时也会考虑家庭背景和教育理念，努力营造良好的同伴环境。而且老师会及时引导孩子的行为。",
    description: "处理对同伴不良影响的担忧",
    tags: ["同伴影响", "招生筛选", "行为引导"],
    keywords: ["担心影响", "很有必要", "家庭背景", "良好环境", "及时引导"]
  },
  {
    title: "疫情防控质疑",
    content: "疫情防控确实是大家都关心的问题。我们严格按照防疫要求执行，每天消毒、测温、健康监测，老师和孩子都要求健康码绿码。防疫措施我们从不马虎。",
    description: "处理对疫情防控措施的质疑",
    tags: ["疫情防控", "严格执行", "防疫措施"],
    keywords: ["都关心", "严格按照", "消毒测温", "健康码", "从不马虎"]
  },
  {
    title: "家长参与度要求",
    content: "您希望更多参与孩子的教育，这个想法很好。我们有丰富的家长参与活动：家长开放日、亲子活动、家长委员会等。欢迎您积极参与，共同关注孩子成长。",
    description: "处理家长要求更多参与的需求",
    tags: ["参与度要求", "家长活动", "共同关注"],
    keywords: ["希望参与", "想法很好", "丰富活动", "积极参与", "共同关注"]
  },
  {
    title: "特殊需求照顾",
    content: "每个孩子都有自己的特点，我们会给予个性化关注。如果您的孩子有特殊需求，请详细告诉我们，我们会制定专门的照顾方案，确保每个孩子都能得到适合的教育。",
    description: "处理特殊需求孩子的照顾要求",
    tags: ["特殊需求", "个性化关注", "专门方案"],
    keywords: ["自己特点", "个性化关注", "特殊需求", "专门方案", "适合教育"]
  },
  {
    title: "退费政策质疑",
    content: "关于退费政策，我们是按照教育局的规定执行的。具体是：因个人原因中途退园，保教费按剩余时间退费，伙食费按实际就餐天数计算。这个政策是很合理的。",
    description: "处理对退费政策的质疑",
    tags: ["退费政策", "规定执行", "合理政策"],
    keywords: ["退费政策", "教育局规定", "个人原因", "剩余时间", "很合理"]
  },
  {
    title: "教育效果担忧",
    content: "您担心教育效果是很负责任的表现。我们有完善的教学评估体系，会定期评估孩子的发展情况，并与家长沟通。我们的毕业生在小学表现都很优秀。",
    description: "处理对教育效果的担忧",
    tags: ["效果担忧", "评估体系", "毕业生表现"],
    keywords: ["担心效果", "负责表现", "评估体系", "定期评估", "表现优秀"]
  },
  {
    title: "竞争压力担忧",
    content: "您不希望孩子有太大压力，这个理念我很认同。我们注重快乐教育，不会给孩子过大的学习压力。我们相信在轻松愉快的环境中，孩子能更好地成长。",
    description: "处理对竞争压力的担忧",
    tags: ["压力担忧", "快乐教育", "轻松环境"],
    keywords: ["不希望压力", "很认同", "快乐教育", "轻松愉快", "更好成长"]
  },
  {
    title: "最终决策犹豫",
    content: "我理解您需要慎重考虑，选择幼儿园确实是重要决定。但我相信通过今天的了解，您已经对我们有了信心。为了不错过最佳入园时机，建议您尽快决定。",
    description: "处理最终决策时的犹豫",
    tags: ["决策犹豫", "慎重考虑", "尽快决定"],
    keywords: ["慎重考虑", "重要决定", "有了信心", "最佳时机", "尽快决定"]
  }
];

// 插入数据的函数
async function insertScriptData() {
  try {
    console.log('开始补充话术中心数据...');
    
    // 查找或创建话术分类
    const categories = await Promise.all([
      findOrCreateCategory('招生话术', ScriptType.ENROLLMENT, '#409EFF', 'School'),
      findOrCreateCategory('电话话术', ScriptType.PHONE, '#67C23A', 'Phone'),
      findOrCreateCategory('接待话术', ScriptType.RECEPTION, '#E6A23C', 'User'),
      findOrCreateCategory('跟进话术', ScriptType.FOLLOWUP, '#F56C6C', 'ChatDotRound'),
      findOrCreateCategory('咨询话术', ScriptType.CONSULTATION, '#909399', 'QuestionFilled'),
      findOrCreateCategory('异议处理话术', ScriptType.OBJECTION, '#F56C6C', 'Warning')
    ]);

    console.log('话术分类创建完成:', categories.map(c => c.name));

    // 插入各类话术
    const scriptData = [
      { scripts: enrollmentScripts, categoryId: categories[0].id, type: ScriptType.ENROLLMENT },
      { scripts: phoneScripts, categoryId: categories[1].id, type: ScriptType.PHONE },
      { scripts: receptionScripts, categoryId: categories[2].id, type: ScriptType.RECEPTION },
      { scripts: followupScripts, categoryId: categories[3].id, type: ScriptType.FOLLOWUP },
      { scripts: consultationScripts, categoryId: categories[4].id, type: ScriptType.CONSULTATION },
      { scripts: objectionScripts, categoryId: categories[5].id, type: ScriptType.OBJECTION }
    ];

    for (const { scripts, categoryId, type } of scriptData) {
      await insertScripts(scripts, categoryId, type);
      console.log(`${type} 话术插入完成，共 ${scripts.length} 条`);
    }

    console.log('所有话术数据插入完成！');
    return true;
  } catch (error) {
    console.error('插入话术数据失败:', error);
    return false;
  }
}

// 查找或创建分类
async function findOrCreateCategory(name, type, color, icon) {
  const [category] = await sequelize.query(`
    INSERT INTO script_categories (name, description, type, color, icon, sort, status, created_at, updated_at)
    VALUES (:name, :description, :type, :color, :icon, :sort, :status, NOW(), NOW())
    ON DUPLICATE KEY UPDATE
    name = VALUES(name),
    description = VALUES(description),
    color = VALUES(color),
    icon = VALUES(icon),
    updated_at = NOW()
  `, {
    replacements: {
      name,
      description: `${name}模板库，包含各种实用的${name}`,
      type,
      color,
      icon,
      sort: 0,
      status: 'active'
    }
  });

  // 获取分类ID
  const [result] = await sequelize.query(
    'SELECT id FROM script_categories WHERE name = ? AND type = ?',
    { replacements: [name, type] }
  );

  return result[0] || { id: category.insertId, name };
}

// 插入话术数据
async function insertScripts(scripts, categoryId, type) {
  for (const script of scripts) {
    await sequelize.query(`
      INSERT INTO scripts (
        title, content, category_id, type, tags, keywords, 
        description, usage_count, effective_score, status, 
        is_template, created_at, updated_at
      ) VALUES (?, ?, ?, ?, ?, ?, ?, 0, ?, 'active', true, NOW(), NOW())
      ON DUPLICATE KEY UPDATE
      content = VALUES(content),
      description = VALUES(description),
      updated_at = NOW()
    `, [
      script.title,
      script.content,
      categoryId,
      type,
      JSON.stringify(script.tags || []),
      JSON.stringify(script.keywords || []),
      script.description,
      Math.floor(Math.random() * 2) + 4 // 随机评分 4-5
    ]);
  }
}

// 主函数
async function main() {
  try {
    await sequelize.authenticate();
    console.log('数据库连接成功');
    
    const success = await insertScriptData();
    
    if (success) {
      console.log('\n✅ 话术中心数据补充完成！');
      console.log('📊 统计信息：');
      console.log(`  - 招生话术: ${enrollmentScripts.length} 条`);
      console.log(`  - 电话话术: ${phoneScripts.length} 条`);
      console.log(`  - 接待话术: ${receptionScripts.length} 条`);
      console.log(`  - 跟进话术: ${followupScripts.length} 条`);
      console.log(`  - 咨询话术: ${consultationScripts.length} 条`);
      console.log(`  - 异议处理话术: ${objectionScripts.length} 条`);
      console.log(`  - 总计: ${enrollmentScripts.length + phoneScripts.length + receptionScripts.length + followupScripts.length + consultationScripts.length + objectionScripts.length} 条话术`);
    } else {
      console.log('❌ 数据插入失败');
    }
  } catch (error) {
    console.error('脚本执行失败:', error);
  } finally {
    await sequelize.close();
    console.log('数据库连接已关闭');
  }
}

// 如果直接运行此文件
if (require.main === module) {
  main();
}

module.exports = {
  insertScriptData,
  enrollmentScripts,
  phoneScripts, 
  receptionScripts,
  followupScripts,
  consultationScripts,
  objectionScripts
};