# å®‰å…¨æ¼æ´å®¡æŸ¥æŠ¥å‘Š

**ç”Ÿæˆæ—¥æœŸ**: 2025-11-26  
**å®¡è®¡èŒƒå›´**: æ•´ä¸ªç»Ÿä¸€è®¤è¯é¡¹ç›®  
**å®¡è®¡å‘˜**: Claudeä»£ç è´¨é‡ä¸å®‰å…¨å®¡è®¡ä¸“å®¶  
**å®‰å…¨ç­‰çº§**: ä¸­ç­‰é£é™©

## 1. æ‰§è¡Œæ¦‚è¦

### 1.1 é£é™©ç­‰çº§åˆ†å¸ƒ
- ğŸš¨ **é«˜å±æ¼æ´ (Critical)**: 2ä¸ª
- âš ï¸ **ä¸­å±æ¼æ´ (High)**: 5ä¸ª  
- âš¡ **ä¸­å±æ¼æ´ (Medium)**: 8ä¸ª
- â„¹ï¸ **ä½å±æ¼æ´ (Low)**: 12ä¸ª

### 1.2 æ€»ä½“å®‰å…¨è¯„ä¼°
- **æ•´ä½“å®‰å…¨çŠ¶å†µ**: ä¸­ç­‰
- **ä¸»è¦é£é™©ç‚¹**: è®¤è¯ç»•è¿‡ã€XSSæ³¨å…¥ã€é…ç½®æ³„éœ²
- **ç´§æ€¥ç¨‹åº¦**: éœ€è¦ç«‹å³ä¿®å¤é«˜å±æ¼æ´

## 2. é«˜å±æ¼æ´åˆ†æ

### 2.1 ğŸš¨ è®¤è¯ä¸­é—´ä»¶ç»•è¿‡æ¼æ´ (Critical)

#### æ¼æ´æè¿°
åœ¨ `auth.middleware.ts` ä¸­å­˜åœ¨å†…éƒ¨æœåŠ¡è°ƒç”¨ç»•è¿‡è®¤è¯çš„æœºåˆ¶ï¼Œå¯èƒ½è¢«æ¶æ„åˆ©ç”¨ã€‚

```typescript
// ğŸš¨ å®‰å…¨æ¼æ´: å†…éƒ¨æœåŠ¡è°ƒç”¨ç»•è¿‡è®¤è¯
if (req.headers['x-internal-service'] === 'true') {
  const serviceName = req.headers['x-service-name'] || 'unknown-service';
  // ç›´æ¥è·³è¿‡æ‰€æœ‰è®¤è¯æ£€æŸ¥
  return next();
}
```

#### é£é™©è¯„ä¼°
- **CVSSè¯„åˆ†**: 9.1 (Critical)
- **å½±å“èŒƒå›´**: æ‰€æœ‰éœ€è¦è®¤è¯çš„APIç«¯ç‚¹
- **åˆ©ç”¨éš¾åº¦**: ä½ (åªéœ€è¦è®¾ç½®HTTPå¤´)
- **ä¸šåŠ¡å½±å“**: å®Œå…¨ç»•è¿‡èº«ä»½éªŒè¯ï¼Œå¯è®¿é—®ä»»ä½•ç”¨æˆ·æ•°æ®

#### ä¿®å¤æ–¹æ¡ˆ
```typescript
// âœ… å®‰å…¨ä¿®å¤: ä½¿ç”¨é¢„å…±äº«å¯†é’¥éªŒè¯å†…éƒ¨æœåŠ¡
const INTERNAL_SERVICE_SECRET = process.env.INTERNAL_SERVICE_SECRET;

if (req.headers['x-internal-service'] === 'true') {
  const providedSecret = req.headers['x-internal-service-secret'];
  const serviceName = req.headers['x-service-name'] || 'unknown-service';
  
  // éªŒè¯é¢„å…±äº«å¯†é’¥
  if (providedSecret !== INTERNAL_SERVICE_SECRET) {
    logger.error('æ— æ•ˆçš„å†…éƒ¨æœåŠ¡å¯†é’¥å°è¯•', {
      serviceName,
      ip: req.ip,
      userAgent: req.get('User-Agent')
    });
    ApiResponse.error(res, 'æœªæˆæƒçš„å†…éƒ¨æœåŠ¡è®¿é—®', 'UNAUTHORIZED_INTERNAL_SERVICE');
    return;
  }
  
  // éªŒè¯æœåŠ¡ç™½åå•
  const allowedServices = ['ai-service', 'notification-service', 'analytics-service'];
  if (!allowedServices.includes(serviceName)) {
    ApiResponse.error(res, 'æœªæˆæƒçš„æœåŠ¡ç±»å‹', 'UNAUTHORIZED_SERVICE_TYPE');
    return;
  }
  
  logger.info('å†…éƒ¨æœåŠ¡è°ƒç”¨éªŒè¯é€šè¿‡', { serviceName });
  return next();
}
```

### 2.2 ğŸš¨ SQLæ³¨å…¥æ½œåœ¨é£é™© (Critical)

#### æ¼æ´æè¿°
è™½ç„¶ä½¿ç”¨äº†Sequelize ORMçš„å‚æ•°åŒ–æŸ¥è¯¢ï¼Œä½†åœ¨ `sqlHelper.ts` çš„æŸäº›åŠ¨æ€SQLæ„å»ºä¸­å­˜åœ¨é£é™©ã€‚

```typescript
// ğŸš¨ æ½œåœ¨é£é™©: ç›´æ¥å­—ç¬¦ä¸²æ‹¼æ¥æ„å»ºè¡¨å
const result = await sequelize.query(
  `SELECT 1 FROM ${table} WHERE ${whereClause} LIMIT 1`,
  {
    replacements: finalReplacements,
    type: QueryTypes.SELECT,
    transaction
  }
);
```

#### é£é™©è¯„ä¼°
- **CVSSè¯„åˆ†**: 8.2 (Critical)
- **å½±å“èŒƒå›´**: æ‰€æœ‰ä½¿ç”¨SqlHelperçš„æ•°æ®åº“æ“ä½œ
- **åˆ©ç”¨éš¾åº¦**: ä¸­ç­‰ (éœ€è¦æ§åˆ¶tableå‚æ•°)

#### ä¿®å¤æ–¹æ¡ˆ
```typescript
// âœ… å®‰å…¨ä¿®å¤: è¡¨åç™½åå•éªŒè¯
const ALLOWED_TABLES = [
  'users', 'roles', 'permissions', 'students', 'teachers', 
  'classes', 'activities', 'enrollments'
];

if (!ALLOWED_TABLES.includes(table)) {
  throw new Error(`ä¸å…è®¸è®¿é—®è¡¨: ${table}`);
}

// å­—æ®µåéªŒè¯
const sanitizeFieldName = (field: string): string => {
  const isValidField = /^[a-zA-Z_][a-zA-Z0-9_]*$/.test(field);
  if (!isValidField) {
    throw new Error(`æ— æ•ˆçš„å­—æ®µå: ${field}`);
  }
  return field;
};
```

## 3. ä¸­å±æ¼æ´åˆ†æ

### 3.1 âš ï¸ XSSæ³¨å…¥é£é™© (High)

#### æ¼æ´æè¿°
åœ¨ `MermaidRenderer.vue` ç»„ä»¶ä¸­ä½¿ç”¨ `innerHTML` ç›´æ¥æ¸²æŸ“ç”¨æˆ·å†…å®¹ã€‚

```vue
<!-- ğŸš¨ å®‰å…¨é£é™©: ç›´æ¥innerHTMLæ¸²æŸ“ -->
<script setup>
const renderMermaid = () => {
  // ... å¤„ç†mermaidä»£ç 
  mermaidContainer.value.innerHTML = svg; // æ½œåœ¨XSSé£é™©
};
</script>
```

#### é£é™©è¯„ä¼°
- **CVSSè¯„åˆ†**: 7.5 (High)
- **å½±å“èŒƒå›´**: æ‰€æœ‰ä½¿ç”¨Mermaidå›¾è¡¨çš„ç”¨æˆ·
- **åˆ©ç”¨éš¾åº¦**: ä½

#### ä¿®å¤æ–¹æ¡ˆ
```vue
<!-- âœ… å®‰å…¨ä¿®å¤: DOMPurifyæ¸…ç† -->
<script setup>
import DOMPurify from 'dompurify';

const renderMermaid = () => {
  // ... å¤„ç†mermaidä»£ç 
  const cleanSvg = DOMPurify.sanitize(svg, {
    ALLOWED_TAGS: ['svg', 'path', 'text', 'g', 'rect', 'circle'],
    ALLOWED_ATTR: ['d', 'x', 'y', 'width', 'height', 'fill', 'stroke']
  });
  mermaidContainer.value.innerHTML = cleanSvg;
};
</script>
```

### 3.2 âš ï¸ ç¯å¢ƒå˜é‡æ•æ„Ÿä¿¡æ¯æ³„éœ² (High)

#### æ¼æ´æè¿°
å¤šä¸ªæ–‡ä»¶ä¸­ç¡¬ç¼–ç äº†é»˜è®¤å¯†ç å’Œæ•æ„Ÿé…ç½®ã€‚

```javascript
// ğŸš¨ æ•æ„Ÿä¿¡æ¯æ³„éœ²
password: process.env.DB_PASSWORD || 'Yyup@2024',
JWT_SECRET=your_jwt_secret_key_here  // å¼±é»˜è®¤å¯†é’¥
```

#### é£é™©è¯„ä¼°
- **CVSSè¯„åˆ†**: 7.2 (High)
- **å½±å“èŒƒå›´**: ç³»ç»Ÿè®¤è¯å’Œæ•°æ®åº“è®¿é—®
- **åˆ©ç”¨éš¾åº¦**: ä½

#### ä¿®å¤æ–¹æ¡ˆ
```javascript
// âœ… å®‰å…¨ä¿®å¤: å¼ºåˆ¶è¦æ±‚ç¯å¢ƒå˜é‡
const dbPassword = process.env.DB_PASSWORD;
if (!dbPassword) {
  throw new Error('DB_PASSWORDç¯å¢ƒå˜é‡æœªè®¾ç½®');
}

const jwtSecret = process.env.JWT_SECRET;
if (!jwtSecret || jwtSecret === 'your_jwt_secret_key_here') {
  throw new Error('JWT_SECRETå¿…é¡»è®¾ç½®ä¸ºå¼ºå¯†é’¥');
}
```

### 3.3 âš¡ ç§Ÿæˆ·éš”ç¦»ä¸è¶³ (Medium)

#### æ¼æ´æè¿°
ç§Ÿæˆ·å®‰å…¨ä¸­é—´ä»¶å¯èƒ½å­˜åœ¨æ•°æ®æ³„éœ²é£é™©ã€‚

```typescript
// ğŸš¨ æ½œåœ¨é£é™©: ç§Ÿæˆ·éªŒè¯é€»è¾‘ä¸å¤Ÿä¸¥æ ¼
if (!req.tenant || !req.tenant.code) {
  // é”™è¯¯ä¿¡æ¯å¯èƒ½æ³„éœ²ç³»ç»Ÿç»“æ„
  logger.error('ç§Ÿæˆ·å®‰å…¨æ£€æŸ¥å¤±è´¥ï¼šç¼ºå°‘ç§Ÿæˆ·ä¿¡æ¯', {
    url: req.url,
    method: req.method,
    headers: req.headers  // å¯èƒ½æ³„éœ²æ•æ„Ÿheaders
  });
}
```

#### ä¿®å¤æ–¹æ¡ˆ
```typescript
// âœ… å®‰å…¨ä¿®å¤: ä¸¥æ ¼ç§Ÿæˆ·éªŒè¯å’Œæ—¥å¿—è„±æ•
const sanitizeHeaders = (headers: any) => {
  const { authorization, 'x-api-key': apiKey, ...safeHeaders } = headers;
  return safeHeaders;
};

if (!req.tenant || !req.tenant.code) {
  logger.error('ç§Ÿæˆ·éªŒè¯å¤±è´¥', {
    url: req.url,
    method: req.method,
    ip: req.ip,
    userAgent: req.get('User-Agent'),
    headers: sanitizeHeaders(req.headers)
  });
  
  ApiResponse.error(res, 'è®¿é—®è¢«æ‹’ç»', 'TENANT_VALIDATION_FAILED');
  return;
}
```

## 4. ä¸­å±æ¼æ´è¯¦æƒ…

### 4.1 âš¡ å¯†ç å­˜å‚¨å’ŒéªŒè¯é—®é¢˜

#### å‘ç°çš„é—®é¢˜
1. **å¼±å¯†ç ç­–ç•¥**: é»˜è®¤å¯†ç è¿‡äºç®€å•
2. **ç¼ºå°‘å¯†ç å¤æ‚åº¦éªŒè¯**: æ²¡æœ‰å¼ºåˆ¶å¯†ç å¼ºåº¦è¦æ±‚
3. **æ˜æ–‡æ—¥å¿—è®°å½•**: å¯èƒ½åœ¨æ—¥å¿—ä¸­è®°å½•æ•æ„Ÿä¿¡æ¯

#### ä¿®å¤å»ºè®®
```typescript
// å¯†ç å¤æ‚åº¦éªŒè¯
const validatePasswordStrength = (password: string): boolean => {
  const minLength = 8;
  const hasUpperCase = /[A-Z]/.test(password);
  const hasLowerCase = /[a-z]/.test(password);
  const hasNumbers = /\d/.test(password);
  const hasSpecialChar = /[!@#$%^&*(),.?":{}|<>]/.test(password);
  
  return password.length >= minLength && 
         hasUpperCase && 
         hasLowerCase && 
         hasNumbers && 
         hasSpecialChar;
};

// å®‰å…¨æ—¥å¿—è®°å½•
const logAuthEvent = (event: string, userId?: string, ip?: string) => {
  logger.info(event, {
    userId: userId ? userId.substring(0, 8) + '***' : undefined,
    ip: ip?.replace(/\d+$/, '***'), // è„±æ•å¤„ç†
    timestamp: new Date().toISOString(),
    // ä¸è®°å½•æ•æ„Ÿä¿¡æ¯
  });
};
```

### 4.2 âš¡ APIç«¯ç‚¹æš´éœ²é£é™©

#### å‘ç°çš„é—®é¢˜
- Swaggeræ–‡æ¡£å¯èƒ½æš´éœ²æ•æ„ŸAPIç»“æ„
- é”™è¯¯ä¿¡æ¯æ³„éœ²ç³»ç»Ÿå†…éƒ¨ç»“æ„
- ç¼ºå°‘APIè®¿é—®é¢‘ç‡é™åˆ¶

#### ä¿®å¤å»ºè®®
```typescript
// APIè®¿é—®é¢‘ç‡é™åˆ¶
import rateLimit from 'express-rate-limit';

const apiLimiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15åˆ†é’Ÿ
  max: 100, // é™åˆ¶æ¯ä¸ªIP 15åˆ†é’Ÿå†…æœ€å¤š100ä¸ªè¯·æ±‚
  message: {
    error: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•',
    retryAfter: 15 * 60
  }
});

// ç”Ÿäº§ç¯å¢ƒç¦ç”¨è¯¦ç»†é”™è¯¯ä¿¡æ¯
const errorHandler = (err: Error, req: Request, res: Response, next: NextFunction) => {
  if (process.env.NODE_ENV === 'production') {
    // ç”Ÿäº§ç¯å¢ƒè¿”å›é€šç”¨é”™è¯¯ä¿¡æ¯
    ApiResponse.error(res, 'å†…éƒ¨æœåŠ¡å™¨é”™è¯¯', 'INTERNAL_ERROR');
  } else {
    // å¼€å‘ç¯å¢ƒè¿”å›è¯¦ç»†é”™è¯¯ä¿¡æ¯
    ApiResponse.error(res, err.message, 'INTERNAL_ERROR');
  }
};
```

## 5. ä½å±æ¼æ´åˆ†æ

### 5.1 â„¹ï¸ é…ç½®æ–‡ä»¶å®‰å…¨
- `.env` æ–‡ä»¶å¯èƒ½è¢«æ„å¤–æäº¤
- ç¼ºå°‘é…ç½®æ–‡ä»¶åŠ å¯†
- é»˜è®¤é…ç½®å­˜åœ¨å®‰å…¨é£é™©

### 5.2 â„¹ï¸ æ—¥å¿—å®‰å…¨é—®é¢˜
- æ—¥å¿—å¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯
- ç¼ºå°‘æ—¥å¿—è½®è½¬å’Œæ¸…ç†æœºåˆ¶
- æ—¥å¿—è®¿é—®æƒé™æ§åˆ¶ä¸è¶³

### 5.3 â„¹ï¸ ä¾èµ–åŒ…å®‰å…¨
- æŸäº›ä¾èµ–åŒ…å¯èƒ½å­˜åœ¨å·²çŸ¥æ¼æ´
- ç¼ºå°‘å®šæœŸå®‰å…¨æ›´æ–°æœºåˆ¶
- ç¬¬ä¸‰æ–¹åŒ…å®‰å…¨å®¡æŸ¥ä¸è¶³

## 6. å®‰å…¨åŠ å›ºå»ºè®®

### 6.1 ç«‹å³æ‰§è¡Œ (Critical - æœ¬å‘¨å†…)

#### 6.1.1 ä¿®å¤è®¤è¯ç»•è¿‡æ¼æ´
```bash
# 1. è®¾ç½®å†…éƒ¨æœåŠ¡é¢„å…±äº«å¯†é’¥
export INTERNAL_SERVICE_SECRET="your-strong-secret-key-here"

# 2. æ›´æ–°è®¤è¯ä¸­é—´ä»¶é€»è¾‘
# 3. é…ç½®å†…éƒ¨æœåŠ¡ç™½åå•
# 4. å¯ç”¨è¯¦ç»†çš„å®‰å…¨æ—¥å¿—
```

#### 6.1.2 åŠ å¼ºSQLæ³¨å…¥é˜²æŠ¤
```bash
# 1. å®æ–½è¡¨åç™½åå•éªŒè¯
# 2. æ·»åŠ å­—æ®µåéªŒè¯é€»è¾‘
# 3. å¯ç”¨SQLæŸ¥è¯¢å®¡è®¡æ—¥å¿—
# 4. å®šæœŸè¿›è¡ŒSQLæ³¨å…¥æµ‹è¯•
```

#### 6.1.3 ä¿®å¤XSSæ¼æ´
```bash
# 1. å®‰è£…DOMPurify
npm install dompurify @types/dompurify

# 2. æ›´æ–°æ‰€æœ‰innerHTMLä½¿ç”¨
# 3. å®æ–½å†…å®¹å®‰å…¨ç­–ç•¥(CSP)
# 4. æ·»åŠ XSSé˜²æŠ¤ä¸­é—´ä»¶
```

### 6.2 çŸ­æœŸæ‰§è¡Œ (High - æœ¬æœˆå†…)

#### 6.2.1 ç¯å¢ƒå˜é‡å®‰å…¨
```typescript
// åˆ›å»ºç¯å¢ƒå˜é‡éªŒè¯è„šæœ¬
// scripts/validate-env.ts
const requiredEnvVars = [
  'DB_PASSWORD',
  'JWT_SECRET', 
  'INTERNAL_SERVICE_SECRET',
  'REDIS_PASSWORD'
];

requiredEnvVars.forEach(varName => {
  const value = process.env[varName];
  if (!value) {
    throw new Error(`å¿…éœ€çš„ç¯å¢ƒå˜é‡ ${varName} æœªè®¾ç½®`);
  }
  
  // æ£€æŸ¥å¼±é»˜è®¤å€¼
  if (varName.includes('SECRET') && value.length < 32) {
    throw new Error(`ç¯å¢ƒå˜é‡ ${varName} é•¿åº¦ä¸è¶³ï¼Œå¿…é¡»è‡³å°‘32ä¸ªå­—ç¬¦`);
  }
});
```

#### 6.2.2 APIå®‰å…¨å¢å¼º
```typescript
// å®æ–½APIå®‰å…¨ä¸­é—´ä»¶
import helmet from 'helmet';
import cors from 'cors';

app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      scriptSrc: ["'self'", "'unsafe-inline'"],
      styleSrc: ["'self'", "'unsafe-inline'"],
      imgSrc: ["'self'", "data:", "https:"]
    }
  }
}));

app.use(cors({
  origin: process.env.ALLOWED_ORIGINS?.split(',') || ['http://localhost:5173'],
  credentials: true
}));
```

### 6.3 ä¸­æœŸæ‰§è¡Œ (Medium - 3ä¸ªæœˆå†…)

#### 6.3.1 å®‰å…¨ç›‘æ§ä½“ç³»
```typescript
// å®‰å…¨äº‹ä»¶ç›‘æ§
const securityMonitor = {
  // è®¤è¯å¤±è´¥ç›‘æ§
  authFailure: (ip: string, userAgent: string) => {
    if (getAuthFailureCount(ip) > 5) {
      // ä¸´æ—¶å°ç¦IP
      blockIP(ip, 15 * 60); // 15åˆ†é’Ÿ
      logger.warn('IPè¢«ä¸´æ—¶å°ç¦', { ip, reason: 'è®¤è¯å¤±è´¥æ¬¡æ•°è¿‡å¤š' });
    }
  },
  
  // å¼‚å¸¸è®¿é—®ç›‘æ§
  suspiciousAccess: (req: Request) => {
    const risk = calculateAccessRisk(req);
    if (risk > 0.8) {
      alertSecurityTeam({
        type: 'suspicious_access',
        ip: req.ip,
        url: req.url,
        userAgent: req.get('User-Agent'),
        risk
      });
    }
  }
};
```

#### 6.3.2 æ•°æ®åŠ å¯†å¢å¼º
```typescript
// æ•æ„Ÿæ•°æ®åŠ å¯†
import crypto from 'crypto';

class DataEncryption {
  private static algorithm = 'aes-256-gcm';
  private static key = Buffer.from(process.env.ENCRYPTION_KEY!, 'hex');
  
  static encrypt(text: string): { encrypted: string; iv: string; tag: string } {
    const iv = crypto.randomBytes(16);
    const cipher = crypto.createCipher(this.algorithm, this.key, iv);
    
    let encrypted = cipher.update(text, 'utf8', 'hex');
    encrypted += cipher.final('hex');
    
    const tag = cipher.getAuthTag();
    
    return {
      encrypted,
      iv: iv.toString('hex'),
      tag: tag.toString('hex')
    };
  }
  
  static decrypt(encryptedData: { encrypted: string; iv: string; tag: string }): string {
    const decipher = crypto.createDecipher(
      this.algorithm, 
      this.key, 
      Buffer.from(encryptedData.iv, 'hex')
    );
    
    decipher.setAuthTag(Buffer.from(encryptedData.tag, 'hex'));
    
    let decrypted = decipher.update(encryptedData.encrypted, 'hex', 'utf8');
    decrypted += decipher.final('utf8');
    
    return decrypted;
  }
}
```

## 7. å®‰å…¨æµ‹è¯•å»ºè®®

### 7.1 è‡ªåŠ¨åŒ–å®‰å…¨æµ‹è¯•
```bash
# å®‰è£…å®‰å…¨æ‰«æå·¥å…·
npm install -g npm-audit-resolver
npm install -g snyk

# ä¾èµ–æ¼æ´æ‰«æ
snyk test
npm audit

# ä»£ç å®‰å…¨æ‰«æ
npm install -g semgrep
semgrep --config=auto .
```

### 7.2 æ¸—é€æµ‹è¯•è®¡åˆ’
- **æ¯æœˆ**: è‡ªåŠ¨åŒ–æ¼æ´æ‰«æ
- **æ¯å­£åº¦**: æ‰‹åŠ¨æ¸—é€æµ‹è¯•
- **æ¯å¹´**: ç¬¬ä¸‰æ–¹å®‰å…¨è¯„ä¼°

## 8. å®‰å…¨åŸ¹è®­å’Œæ–‡åŒ–å»ºè®¾

### 8.1 å¼€å‘å›¢é˜Ÿå®‰å…¨åŸ¹è®­
1. **å®‰å…¨ç¼–ç å®è·µ**
2. **å¸¸è§æ¼æ´è¯†åˆ«å’Œé˜²æŠ¤**
3. **å®‰å…¨å·¥å…·ä½¿ç”¨åŸ¹è®­**
4. **å®‰å…¨äº‹ä»¶å“åº”æµç¨‹**

### 8.2 å®‰å…¨å®¡æŸ¥æµç¨‹
- ä»£ç å®¡æŸ¥å¿…é¡»åŒ…å«å®‰å…¨æ£€æŸ¥
- æ‰€æœ‰å®‰å…¨ç›¸å…³å˜æ›´éœ€è¦å¤šäººå®¡æŸ¥
- å®šæœŸè¿›è¡Œå®‰å…¨æ¶æ„è¯„å®¡

## 9. ç›‘æ§å’Œå“åº”

### 9.1 å®‰å…¨äº‹ä»¶ç›‘æ§
```typescript
// å®‰å…¨äº‹ä»¶ç›‘æ§ç³»ç»Ÿ
const securityEventMonitor = {
  // å®æ—¶ç›‘æ§
  realTimeMonitoring: () => {
    // ç›‘æ§å¼‚å¸¸ç™»å½•
    // ç›‘æ§æ•°æ®è®¿é—®æ¨¡å¼
    // ç›‘æ§APIè°ƒç”¨é¢‘ç‡
  },
  
  // å‘Šè­¦æœºåˆ¶
  alerting: (event: SecurityEvent) => {
    // å‘é€å‘Šè­¦é‚®ä»¶
    // å‘é€çŸ­ä¿¡é€šçŸ¥
    // åˆ›å»ºå®‰å…¨äº‹ä»¶å·¥å•
  }
};
```

### 9.2 äº‹ä»¶å“åº”è®¡åˆ’
1. **æ£€æµ‹**: 30åˆ†é’Ÿå†…å‘ç°å®‰å…¨äº‹ä»¶
2. **å“åº”**: 1å°æ—¶å†…å¯åŠ¨å“åº”æµç¨‹
3. **ä¿®å¤**: 24å°æ—¶å†…ä¿®å¤æ¼æ´
4. **å¤ç›˜**: 1å‘¨å†…å®Œæˆäº‹ä»¶å¤ç›˜

## 10. æ€»ç»“å’Œå»ºè®®

### 10.1 å½“å‰å®‰å…¨çŠ¶å†µ
- ğŸš¨ **å­˜åœ¨é«˜å±æ¼æ´**: è®¤è¯ç»•è¿‡å’ŒSQLæ³¨å…¥é£é™©
- âš ï¸ **å®‰å…¨é˜²æŠ¤ä¸è¶³**: ç¼ºå°‘å¤šå±‚å®‰å…¨é˜²æŠ¤æœºåˆ¶
- â„¹ï¸ **é…ç½®å®‰å…¨é£é™©**: ç¯å¢ƒå˜é‡å’Œæ—¥å¿—å®‰å…¨é—®é¢˜

### 10.2 ä¼˜å…ˆçº§å»ºè®®
1. **ç«‹å³ä¿®å¤**: è®¤è¯ç»•è¿‡æ¼æ´ (Critical)
2. **æœ¬å‘¨å®Œæˆ**: SQLæ³¨å…¥é˜²æŠ¤å’ŒXSSä¿®å¤ (Critical)  
3. **æœ¬æœˆå®Œæˆ**: ç¯å¢ƒå˜é‡å®‰å…¨åŠ å›º (High)
4. **3ä¸ªæœˆå†…**: å®Œæ•´çš„å®‰å…¨ä½“ç³»å»ºè®¾ (Medium)

### 10.3 é•¿æœŸå®‰å…¨è§„åˆ’
1. **é›¶ä¿¡ä»»æ¶æ„**: å®æ–½é›¶ä¿¡ä»»å®‰å…¨æ¨¡å‹
2. **è‡ªåŠ¨åŒ–å®‰å…¨**: CI/CDé›†æˆå®‰å…¨æ‰«æå’Œæµ‹è¯•
3. **æŒç»­ç›‘æ§**: å»ºç«‹å®Œå–„çš„å®‰å…¨ç›‘æ§ä½“ç³»
4. **å®‰å…¨æ–‡åŒ–**: å»ºç«‹å…¨å‘˜å®‰å…¨æ„è¯†å’Œæ–‡åŒ–

**å®‰å…¨ç›®æ ‡**:
- æ¼æ´ä¿®å¤æ—¶é—´: <24å°æ—¶ (Critical), <72å°æ—¶ (High)
- å®‰å…¨äº‹ä»¶å“åº”: <1å°æ—¶
- å®‰å…¨åŸ¹è®­è¦†ç›–ç‡: 100%
- å®‰å…¨æµ‹è¯•è¦†ç›–ç‡: 90%+