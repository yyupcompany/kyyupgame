# å·¥å…·è°ƒç”¨äº‹ä»¶æµåˆ†ææŠ¥å‘Š

## ğŸ“‹ å½“å‰å®ç°åˆ†æ

åŸºäºå¯¹åç«¯ä»£ç çš„æ£€æŸ¥ï¼Œæˆ‘å‘ç°å½“å‰çš„å·¥å…·è°ƒç”¨äº‹ä»¶æµå·²ç»å®ç°äº†ä½ æœŸæœ›çš„åŠŸèƒ½ï¼Œä½†å¯èƒ½åœ¨å‰ç«¯å¤„ç†ä¸Šæœ‰ä¸€äº›ä¼˜åŒ–ç©ºé—´ã€‚

## ğŸ”„ å½“å‰äº‹ä»¶æµç¨‹

### åç«¯äº‹ä»¶å‘é€é¡ºåº (unified-intelligence.service.ts)

```typescript
// ğŸ¯ ç¬¬1æ­¥ï¼šå‘é€å·¥å…·æ„å›¾æè¿°
sendSSE('tool_intent', {
  message: toolIntent,
  toolName: toolCall.function?.name
});

// ğŸ¯ ç¬¬2æ­¥ï¼šå‘é€thinkingäº‹ä»¶ï¼Œæ˜¾ç¤ºå½“å‰æ­£åœ¨åšä»€ä¹ˆ
const thinkingMessage = toolDescription.replace(/^[ğŸ”ğŸ“ŠğŸ“ˆğŸ”ğŸ“‹ğŸ§­ğŸ“¸âœï¸âœ…ğŸ‘†ğŸ“âœï¸ğŸ”§â³ğŸ¨ğŸš€ğŸ“¥ğŸ’¡ğŸ‘¥ğŸŒğŸ“„ğŸ“œğŸ“¦]\s*/, '');
sendSSE('thinking', thinkingMessage);

// ğŸ¯ ç¬¬3æ­¥ï¼šå‘é€å·¥å…·è°ƒç”¨å¼€å§‹äº‹ä»¶
sendSSE('tool_call_start', {
  name: toolCall.function?.name,
  arguments: toolCall.function?.arguments,
  intent: toolIntent,  // ğŸ¯ æ·»åŠ å·¥å…·æ„å›¾
  description: toolDescription  // ğŸ¯ æ·»åŠ å·¥å…·æè¿°
});

// ğŸ¯ ç¬¬4æ­¥ï¼šæ‰§è¡Œå·¥å…·
const result = await this.executeFunctionTool(toolCall, request, progressCallback);

// ğŸ¯ ç¬¬5æ­¥ï¼šå‘é€å·¥å…·è°ƒç”¨å®Œæˆäº‹ä»¶
sendSSE('tool_call_complete', { 
  name: toolCall.function?.name, 
  result, 
  success: true 
});
```

### å‰ç«¯äº‹ä»¶å¤„ç† (AIAssistant.vue)

```typescript
switch (event.type) {
  case 'tool_intent':
    // å·¥å…·æ„å›¾æè¿°
    if (event.data?.message) {
      console.log('ğŸ’­ [æ„å›¾] å·¥å…·è°ƒç”¨æ„å›¾:', event.data.message)
      // å¯ä»¥åœ¨è¿™é‡Œæ˜¾ç¤ºæ„å›¾æè¿°ï¼Œæˆ–è€…ç­‰å¾…tool_call_startæ—¶ä¸€èµ·æ˜¾ç¤º
    }
    break

  case 'thinking':
    // AIæ€è€ƒè¿‡ç¨‹
    if (event.data?.content || event.message) {
      const thinkingText = event.data?.content || event.message || ''
      showToolThinkingWithTyping(thinkingText)
    }
    break

  case 'tool_call_start':
    // å·¥å…·è°ƒç”¨å¼€å§‹
    if (event.data) {
      const toolDisplayName = getToolDisplayName(event.data.name || 'unknown_tool')
      const toolIntent = event.data.intent || ''
      const toolDescription = event.data.description || `ğŸ”§ ${toolDisplayName}`
      
      // æ·»åŠ å·¥å…·è°ƒç”¨åˆ°åˆ—è¡¨ï¼ŒçŠ¶æ€ä¸ºè¿è¡Œä¸­
      showFunctionCall({
        name: event.data.name,
        description: toolDescription,
        params: event.data.arguments || {},
        status: 'running'
      })
    }
    break

  case 'tool_call_complete':
    // å·¥å…·è°ƒç”¨å®Œæˆ
    // æ›´æ–°å·¥å…·è°ƒç”¨çŠ¶æ€ä¸ºå®Œæˆ
    break
}
```

## ğŸ“Š äº‹ä»¶æµæ—¶åºå›¾

```
ç”¨æˆ·å‘é€æ¶ˆæ¯
    â”‚
    â–¼
AIå¼€å§‹å¤„ç†
    â”‚
    â–¼
æ£€æµ‹åˆ°å·¥å…·è°ƒç”¨éœ€æ±‚
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å•ä¸ªå·¥å…·è°ƒç”¨æµç¨‹                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1ï¸âƒ£ tool_intent äº‹ä»¶                                       â”‚
â”‚     â”œâ”€ å‘é€ï¼šå·¥å…·è°ƒç”¨æ„å›¾è¯´æ˜                                â”‚
â”‚     â””â”€ å‰ç«¯ï¼šå¯æ˜¾ç¤ºAIçš„å·¥å…·è°ƒç”¨æ„å›¾                          â”‚
â”‚                                                             â”‚
â”‚  2ï¸âƒ£ thinking äº‹ä»¶                                          â”‚
â”‚     â”œâ”€ å‘é€ï¼šå·¥å…·æè¿°å’Œæ‰§è¡Œè¯´æ˜                              â”‚
â”‚     â””â”€ å‰ç«¯ï¼šæ˜¾ç¤ºæ€è€ƒè¿‡ç¨‹ï¼Œæ‰“å­—æœºæ•ˆæœ                        â”‚
â”‚                                                             â”‚
â”‚  3ï¸âƒ£ tool_call_start äº‹ä»¶                                   â”‚
â”‚     â”œâ”€ å‘é€ï¼šå·¥å…·åç§°ã€å‚æ•°ã€æ„å›¾ã€æè¿°                      â”‚
â”‚     â””â”€ å‰ç«¯ï¼šæ˜¾ç¤ºå·¥å…·è°ƒç”¨å¡ç‰‡ï¼ŒçŠ¶æ€ä¸º"è¿è¡Œä¸­"                â”‚
â”‚                                                             â”‚
â”‚  4ï¸âƒ£ å·¥å…·æ‰§è¡Œè¿‡ç¨‹                                            â”‚
â”‚     â”œâ”€ åç«¯ï¼šå®é™…æ‰§è¡Œå·¥å…·é€»è¾‘                                â”‚
â”‚     â””â”€ å‰ç«¯ï¼šæ˜¾ç¤ºæ‰§è¡Œä¸­çŠ¶æ€                                  â”‚
â”‚                                                             â”‚
â”‚  5ï¸âƒ£ tool_call_complete äº‹ä»¶                                â”‚
â”‚     â”œâ”€ å‘é€ï¼šæ‰§è¡Œç»“æœå’ŒæˆåŠŸçŠ¶æ€                              â”‚
â”‚     â””â”€ å‰ç«¯ï¼šæ›´æ–°å·¥å…·è°ƒç”¨çŠ¶æ€ä¸º"å®Œæˆ"                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
å¦‚æœæœ‰å¤šä¸ªå·¥å…·è°ƒç”¨ï¼Œé‡å¤ä¸Šè¿°æµç¨‹
    â”‚
    â–¼
æ‰€æœ‰å·¥å…·è°ƒç”¨å®Œæˆ
    â”‚
    â–¼
AIç”Ÿæˆæœ€ç»ˆå›ç­”
```

## âœ… å·²å®ç°çš„åŠŸèƒ½

### 1. å·¥å…·è°ƒç”¨å‰çš„è¯´æ˜æœºåˆ¶ âœ…
- **tool_intent äº‹ä»¶**: å‘é€å·¥å…·è°ƒç”¨çš„æ„å›¾è¯´æ˜
- **thinking äº‹ä»¶**: å‘é€å·¥å…·çš„è¯¦ç»†æè¿°å’Œæ‰§è¡Œè¯´æ˜
- **å‰ç«¯å¤„ç†**: åœ¨å·¥å…·è°ƒç”¨å‰æ˜¾ç¤ºAIçš„æ€è€ƒè¿‡ç¨‹

### 2. æ¯ä¸ªå·¥å…·éƒ½æœ‰è¯´æ˜ âœ…
- **å·¥å…·æè¿°è·å–**: ä»å·¥å…·å®šä¹‰ä¸­è·å–æè¿°ä¿¡æ¯
- **æ„å›¾ç”Ÿæˆ**: æ ¹æ®å·¥å…·å’Œå‚æ•°ç”Ÿæˆè°ƒç”¨æ„å›¾
- **å‰ç«¯æ˜¾ç¤º**: æ¯ä¸ªå·¥å…·è°ƒç”¨éƒ½æœ‰å¯¹åº”çš„è¯´æ˜å¡ç‰‡

### 3. å¤šè½®å·¥å…·è°ƒç”¨æ”¯æŒ âœ…
- **å¾ªç¯å¤„ç†**: æ”¯æŒå¤šä¸ªå·¥å…·çš„é¡ºåºè°ƒç”¨
- **çŠ¶æ€ç®¡ç†**: æ¯ä¸ªå·¥å…·è°ƒç”¨éƒ½æœ‰ç‹¬ç«‹çš„çŠ¶æ€è·Ÿè¸ª
- **äº‹ä»¶æµ**: æ¯ä¸ªå·¥å…·éƒ½ä¼šç»å†å®Œæ•´çš„äº‹ä»¶æµç¨‹

## ğŸ” å½“å‰å®ç°çš„ä¼˜åŠ¿

### 1. å®Œæ•´çš„äº‹ä»¶æµ
- ä»æ„å›¾è¯´æ˜åˆ°æ‰§è¡Œå®Œæˆçš„å®Œæ•´æµç¨‹
- æ¯ä¸ªé˜¶æ®µéƒ½æœ‰å¯¹åº”çš„å‰ç«¯åé¦ˆ
- ç”¨æˆ·å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°AIåœ¨åšä»€ä¹ˆ

### 2. è¯¦ç»†çš„å·¥å…·ä¿¡æ¯
- å·¥å…·åç§°ã€å‚æ•°ã€æ„å›¾ã€æè¿°éƒ½ä¼šä¼ é€’ç»™å‰ç«¯
- å‰ç«¯å¯ä»¥å±•ç¤ºä¸°å¯Œçš„å·¥å…·è°ƒç”¨ä¿¡æ¯
- æ”¯æŒå·¥å…·è°ƒç”¨çš„é‡è¯•å’Œè¯¦æƒ…æŸ¥çœ‹

### 3. è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ
- æ€è€ƒè¿‡ç¨‹çš„æ‰“å­—æœºæ•ˆæœ
- å·¥å…·è°ƒç”¨çš„å®æ—¶çŠ¶æ€æ›´æ–°
- æ¸…æ™°çš„è§†è§‰åé¦ˆå’Œè¿›åº¦æŒ‡ç¤º

## ğŸ¯ å¯èƒ½çš„ä¼˜åŒ–ç‚¹

### 1. å‰ç«¯äº‹ä»¶å¤„ç†ä¼˜åŒ–
å½“å‰å‰ç«¯å¯¹ `tool_intent` äº‹ä»¶çš„å¤„ç†æ¯”è¾ƒç®€å•ï¼š
```typescript
case 'tool_intent':
  // å·¥å…·æ„å›¾æè¿°
  if (event.data?.message) {
    console.log('ğŸ’­ [æ„å›¾] å·¥å…·è°ƒç”¨æ„å›¾:', event.data.message)
    // å¯ä»¥åœ¨è¿™é‡Œæ˜¾ç¤ºæ„å›¾æè¿°ï¼Œæˆ–è€…ç­‰å¾…tool_call_startæ—¶ä¸€èµ·æ˜¾ç¤º
  }
  break
```

**å»ºè®®ä¼˜åŒ–**ï¼š
- å¯ä»¥åœ¨æ€è€ƒè¿‡ç¨‹ä¸­æ˜¾ç¤ºå·¥å…·æ„å›¾
- æˆ–è€…åœ¨å·¥å…·è°ƒç”¨å¡ç‰‡ä¸­æ˜¾ç¤ºæ„å›¾ä¿¡æ¯

### 2. å·¥å…·è¯´æ˜çš„å±•ç¤ºæ–¹å¼
å½“å‰å·¥å…·è¯´æ˜ä¸»è¦é€šè¿‡ `thinking` äº‹ä»¶æ˜¾ç¤ºï¼Œå¯ä»¥è€ƒè™‘ï¼š
- åœ¨å·¥å…·è°ƒç”¨å¡ç‰‡ä¸­æ˜¾ç¤ºæ›´è¯¦ç»†çš„è¯´æ˜
- æ·»åŠ å·¥å…·è°ƒç”¨çš„é¢„æœŸæ•ˆæœè¯´æ˜
- æä¾›å·¥å…·è°ƒç”¨çš„è¿›åº¦æŒ‡ç¤º

### 3. å¤šå·¥å…·è°ƒç”¨çš„è§†è§‰ä¼˜åŒ–
- å¯ä»¥æ·»åŠ å·¥å…·è°ƒç”¨çš„åºå·æ˜¾ç¤º
- æä¾›æ•´ä½“è¿›åº¦æŒ‡ç¤º
- ä¼˜åŒ–å¤šå·¥å…·è°ƒç”¨æ—¶çš„å¸ƒå±€

## ğŸ” æ·±åº¦åˆ†æï¼šå·¥å…·æè¿°ç”Ÿæˆæœºåˆ¶

### åç«¯å·¥å…·æè¿°ç”Ÿæˆå™¨ (tool-description-generator.service.ts)

#### 1. å·¥å…·æ„å›¾ç”Ÿæˆ (TOOL_INTENTS)
```typescript
// ä¸ºæ¯ä¸ªå·¥å…·å®šä¹‰"æˆ‘å°†è¦åšä»€ä¹ˆ"çš„æ„å›¾æè¿°
const TOOL_INTENTS: Record<string, ToolDescriptionGenerator> = {
  'analyze_task_complexity': (args) => {
    return 'æˆ‘å°†åˆ†æä»»åŠ¡å¤æ‚åº¦ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦åˆ›å»ºå¾…åŠæ¸…å•æ¥åˆ†è§£ä»»åŠ¡';
  },
  'query_past_activities': (args) => {
    if (args.activityType) {
      return `æˆ‘å°†æŸ¥è¯¢${args.activityType}ç±»å‹çš„å†å²æ´»åŠ¨æ•°æ®`;
    }
    return 'æˆ‘å°†æŸ¥è¯¢å†å²æ´»åŠ¨æ•°æ®ï¼Œåˆ†ææ´»åŠ¨è¶‹åŠ¿';
  },
  // ... æ›´å¤šå·¥å…·æ„å›¾å®šä¹‰
}
```

#### 2. å·¥å…·æè¿°ç”Ÿæˆ (TOOL_DESCRIPTIONS)
```typescript
// æ¯ä¸ªå·¥å…·éƒ½æœ‰ä¸€ä¸ªæè¿°ç”Ÿæˆå‡½æ•°ï¼Œæ ¹æ®å·¥å…·å‚æ•°ç”Ÿæˆæœ‰æ„ä¹‰çš„æè¿°
const TOOL_DESCRIPTIONS: Record<string, ToolDescriptionGenerator> = {
  'analyze_task_complexity': (args) => {
    const input = args.userInput || args.user_input || '';
    const preview = input.substring(0, 30);
    return `ğŸ” æ­£åœ¨åˆ†æä»»åŠ¡å¤æ‚åº¦: "${preview}${input.length > 30 ? '...' : ''}"`;
  },
  'query_past_activities': (args) => {
    if (args.activityType) {
      return `ğŸ“Š æ­£åœ¨æŸ¥è¯¢${args.activityType}ç±»å‹çš„å†å²æ´»åŠ¨æ•°æ®`;
    }
    return 'ğŸ“Š æ­£åœ¨æŸ¥è¯¢å†å²æ´»åŠ¨æ•°æ®';
  },
  // ... æ›´å¤šå·¥å…·æè¿°å®šä¹‰
}
```

### å‰ç«¯äº‹ä»¶å¤„ç†è¯¦ç»†åˆ†æ

#### å½“å‰å¤„ç†é€»è¾‘ (AIAssistant.vue ç¬¬3386-3452è¡Œ)
```typescript
case 'tool_intent':
  // ğŸ¯ å·¥å…·æ„å›¾æè¿° - å½“å‰åªæ˜¯console.log
  if (event.data?.message) {
    console.log('ğŸ’­ [æ„å›¾] å·¥å…·è°ƒç”¨æ„å›¾:', event.data.message)
    // âŒ é—®é¢˜ï¼šæ²¡æœ‰åœ¨UIä¸­æ˜¾ç¤ºæ„å›¾æè¿°
  }
  break

case 'tool_call_start':
  // ğŸ¯ å·¥å…·è°ƒç”¨å¼€å§‹ - åˆ›å»ºå·¥å…·è°ƒç”¨å¡ç‰‡
  const toolIntent = event.data.intent || ''
  const toolDescription = event.data.description || `ğŸ”§ ${toolDisplayName}`

  // âœ… æ­£ç¡®ï¼šä½¿ç”¨å·¥å…·æè¿°åˆ›å»ºæ‰§è¡Œæ­¥éª¤
  const callData = {
    callId,
    name: event.data.name,
    description: toolDisplayName,
    details: toolDescription,  // ğŸ¯ ä½¿ç”¨å·¥å…·æè¿°
    status: 'running',
    executionSteps: [
      toolDescription,  // ğŸ¯ ä½¿ç”¨å·¥å…·æè¿°
      `âš™ï¸ å·¥å…·åç§°: ${toolDisplayName}`
    ]
  }
```

## ğŸ¯ å‘ç°çš„ä¼˜åŒ–æœºä¼š

### 1. tool_intent äº‹ä»¶å¤„ç†ä¸å……åˆ† âŒ
**å½“å‰é—®é¢˜**ï¼š
- `tool_intent` äº‹ä»¶åªåœ¨consoleä¸­è¾“å‡ºï¼Œæ²¡æœ‰åœ¨UIä¸­å±•ç¤º
- ç”¨æˆ·çœ‹ä¸åˆ°AIçš„å·¥å…·è°ƒç”¨æ„å›¾

**ä¼˜åŒ–å»ºè®®**ï¼š
```typescript
case 'tool_intent':
  if (event.data?.message) {
    // ğŸ¯ åœ¨æ€è€ƒè¿‡ç¨‹ä¸­æ˜¾ç¤ºå·¥å…·æ„å›¾
    const intentText = `ğŸ’­ ${event.data.message}`
    showToolThinkingWithTyping(intentText)

    // æˆ–è€…å­˜å‚¨æ„å›¾ï¼Œåœ¨tool_call_startæ—¶ä¸€èµ·æ˜¾ç¤º
    pendingToolIntent = event.data.message
  }
  break
```

### 2. å·¥å…·è¯´æ˜å±•ç¤ºå¯ä»¥æ›´ä¸°å¯Œ ğŸ“ˆ
**å½“å‰å®ç°**ï¼š
- å·¥å…·æè¿°ä¸»è¦é€šè¿‡ `thinking` äº‹ä»¶æ˜¾ç¤º
- å·¥å…·è°ƒç”¨å¡ç‰‡ä¸­çš„ä¿¡æ¯ç›¸å¯¹ç®€å•

**ä¼˜åŒ–å»ºè®®**ï¼š
```typescript
// åœ¨å·¥å…·è°ƒç”¨å¡ç‰‡ä¸­æ˜¾ç¤ºæ›´è¯¦ç»†ä¿¡æ¯
const callData = {
  // ... ç°æœ‰å­—æ®µ
  intent: toolIntent,           // ğŸ¯ æ·»åŠ å·¥å…·æ„å›¾
  description: toolDescription, // ğŸ¯ è¯¦ç»†æè¿°
  friendlyName: toolDisplayName,// ğŸ¯ å‹å¥½åç§°
  expectedOutcome: getExpectedOutcome(event.data.name), // ğŸ¯ é¢„æœŸç»“æœ
}
```

### 3. å¤šå·¥å…·è°ƒç”¨çš„è§†è§‰ä¼˜åŒ– ğŸ¨
**å½“å‰å®ç°**ï¼š
- æ¯ä¸ªå·¥å…·è°ƒç”¨éƒ½æ˜¯ç‹¬ç«‹çš„å¡ç‰‡
- ç¼ºå°‘æ•´ä½“è¿›åº¦æŒ‡ç¤º

**ä¼˜åŒ–å»ºè®®**ï¼š
```typescript
// æ·»åŠ å·¥å…·è°ƒç”¨åºå·å’Œæ€»æ•°
const callData = {
  // ... ç°æœ‰å­—æ®µ
  sequence: currentToolIndex + 1,  // ğŸ¯ å½“å‰åºå·
  total: totalToolCount,           // ğŸ¯ æ€»å·¥å…·æ•°
  overallProgress: (currentToolIndex / totalToolCount) * 100 // ğŸ¯ æ•´ä½“è¿›åº¦
}
```

## ğŸ“Š å…·ä½“ä¼˜åŒ–å®ç°å»ºè®®

### ä¼˜åŒ–1ï¼šå……åˆ†åˆ©ç”¨ tool_intent äº‹ä»¶
```typescript
// åœ¨å‰ç«¯æ·»åŠ æ„å›¾æ˜¾ç¤ºé€»è¾‘
case 'tool_intent':
  if (event.data?.message) {
    // æ–¹æ¡ˆ1ï¼šåœ¨æ€è€ƒè¿‡ç¨‹ä¸­æ˜¾ç¤ºæ„å›¾
    const intentText = `ğŸ’­ å·¥å…·è°ƒç”¨æ„å›¾ï¼š${event.data.message}`
    showToolThinkingWithTyping(intentText)

    // æ–¹æ¡ˆ2ï¼šå­˜å‚¨æ„å›¾ï¼Œåœ¨å·¥å…·å¡ç‰‡ä¸­æ˜¾ç¤º
    currentToolIntent.value = event.data.message
  }
  break
```

### ä¼˜åŒ–2ï¼šå¢å¼ºå·¥å…·è°ƒç”¨å¡ç‰‡ä¿¡æ¯
```typescript
// åœ¨tool_call_startä¸­ä½¿ç”¨æ›´å¤šä¿¡æ¯
case 'tool_call_start':
  const callData = {
    callId,
    name: event.data.name,
    friendlyName: toolDisplayName,
    intent: event.data.intent || currentToolIntent.value, // ğŸ¯ æ˜¾ç¤ºæ„å›¾
    description: event.data.description,                  // ğŸ¯ è¯¦ç»†æè¿°
    status: 'running',
    params: event.data.arguments || {},
    executionSteps: [
      `ğŸ’­ æ„å›¾ï¼š${event.data.intent}`,           // ğŸ¯ æ·»åŠ æ„å›¾æ­¥éª¤
      `ğŸ”§ æè¿°ï¼š${event.data.description}`,      // ğŸ¯ æ·»åŠ æè¿°æ­¥éª¤
      `âš™ï¸ å¼€å§‹æ‰§è¡Œï¼š${toolDisplayName}`         // ğŸ¯ æ‰§è¡Œæ­¥éª¤
    ],
    startTime: Date.now()
  }
```

### ä¼˜åŒ–3ï¼šæ·»åŠ æ•´ä½“è¿›åº¦ç®¡ç†
```typescript
// åœ¨å¤šå·¥å…·è°ƒç”¨å¼€å§‹æ—¶è®¾ç½®æ€»æ•°
case 'tools_start': // å¦‚æœæœ‰è¿™ä¸ªäº‹ä»¶
  totalToolsCount.value = event.data.count
  currentToolIndex.value = 0
  break

case 'tool_call_start':
  currentToolIndex.value++
  const callData = {
    // ... ç°æœ‰å­—æ®µ
    sequence: currentToolIndex.value,
    total: totalToolsCount.value,
    progress: (currentToolIndex.value / totalToolsCount.value) * 100
  }
```

## ğŸ“‹ ç»“è®º

**å½“å‰å®ç°å·²ç»æ»¡è¶³ä½ çš„éœ€æ±‚**ï¼š
1. âœ… å·¥å…·è°ƒç”¨å‰æœ‰AIè¯´æ˜ (tool_intent + thinking äº‹ä»¶)
2. âœ… æ¯ä¸ªå·¥å…·éƒ½æœ‰è¯¦ç»†æè¿° (å®Œå–„çš„æè¿°ç”Ÿæˆå™¨)
3. âœ… æ”¯æŒå¤šè½®å·¥å…·è°ƒç”¨ (å®Œæ•´çš„äº‹ä»¶æµç¨‹)
4. âœ… å®Œæ•´çš„äº‹ä»¶æµç¨‹ (5æ­¥äº‹ä»¶æµ)

**ä¸»è¦ä¼˜åŒ–æœºä¼š**ï¼š
1. ğŸ¯ **tool_intent äº‹ä»¶å¤„ç†ä¸å……åˆ†** - åªåœ¨consoleè¾“å‡ºï¼Œæœªåœ¨UIå±•ç¤º
2. ğŸ“ˆ **å·¥å…·è¯´æ˜å±•ç¤ºå¯ä»¥æ›´ä¸°å¯Œ** - å¯ä»¥åœ¨å¡ç‰‡ä¸­æ˜¾ç¤ºæ›´å¤šä¿¡æ¯
3. ğŸ¨ **å¤šå·¥å…·è°ƒç”¨çš„è§†è§‰ä¼˜åŒ–** - æ·»åŠ åºå·ã€è¿›åº¦ã€æ•´ä½“çŠ¶æ€

**ä¼˜å…ˆçº§å»ºè®®**ï¼š
1. **é«˜ä¼˜å…ˆçº§**ï¼šå……åˆ†åˆ©ç”¨ tool_intent äº‹ä»¶ï¼Œåœ¨UIä¸­æ˜¾ç¤ºå·¥å…·æ„å›¾
2. **ä¸­ä¼˜å…ˆçº§**ï¼šå¢å¼ºå·¥å…·è°ƒç”¨å¡ç‰‡çš„ä¿¡æ¯å±•ç¤º
3. **ä½ä¼˜å…ˆçº§**ï¼šæ·»åŠ å¤šå·¥å…·è°ƒç”¨çš„æ•´ä½“è¿›åº¦æŒ‡ç¤º

**å®æ–½å»ºè®®**ï¼š
- å½“å‰çš„åç«¯äº‹ä»¶æµç¨‹å·²ç»å¾ˆå®Œå–„ï¼Œä¸éœ€è¦ä¿®æ”¹
- é‡ç‚¹ä¼˜åŒ–å‰ç«¯çš„äº‹ä»¶å¤„ç†å’ŒUIå±•ç¤º
- å¯ä»¥åˆ†é˜¶æ®µå®æ–½ï¼Œå…ˆè§£å†³ tool_intent äº‹ä»¶çš„å±•ç¤ºé—®é¢˜

---

**åˆ†ææ—¶é—´**: 2025-01-10
**åˆ†æèŒƒå›´**: åç«¯äº‹ä»¶å‘é€ + å‰ç«¯äº‹ä»¶å¤„ç† + å·¥å…·æè¿°ç”Ÿæˆå™¨
**ç»“è®º**: âœ… åŠŸèƒ½å®Œæ•´å®ç°ï¼Œæœ‰æ˜ç¡®çš„ä¼˜åŒ–æ–¹å‘
