# æ•™å¸ˆåŠŸèƒ½è¡¥å……å¼€å‘å»ºè®®

## ğŸ“‹ é¡¹ç›®ç°çŠ¶åˆ†æ

### ğŸ¯ å·²å¼€å‘åŠŸèƒ½æ¨¡å—
åŸºäºå¯¹ç°æœ‰ä»£ç çš„åˆ†æï¼Œæ•™å¸ˆè§’è‰²ç³»ç»Ÿå·²ç»å…·å¤‡äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

#### âœ… å·²å®Œæˆçš„é¡µé¢å’Œç»„ä»¶
**å‰ç«¯é¡µé¢ç»“æ„ï¼š** `/client/src/pages/teacher-center/`
- **ğŸ“Š å·¥ä½œå°ï¼ˆDashboardï¼‰**ï¼š`/dashboard/index.vue`
  - ä»»åŠ¡æ¦‚è§ˆå¡ç‰‡ï¼š`TaskOverviewCard.vue`
  - ç­çº§æ¦‚è§ˆå¡ç‰‡ï¼š`ClassOverviewCard.vue`
  - æ´»åŠ¨æé†’å¡ç‰‡ï¼š`ActivityReminderCard.vue`
  - é€šçŸ¥å¡ç‰‡ï¼š`NotificationCard.vue`
  - å¿«æ·æ“ä½œé¢æ¿ï¼š`QuickActionsPanel.vue`

- **âœ… ä»»åŠ¡ä¸­å¿ƒ**ï¼š`/tasks/index.vue`
  - ä»»åŠ¡ç»Ÿè®¡å¡ç‰‡ï¼š`TaskStatCard.vue`
  - ä»»åŠ¡è¯¦æƒ…ï¼š`TaskDetail.vue`

- **ğŸª æ´»åŠ¨ä¸­å¿ƒ**ï¼š`/activities/index.vue`
  - æ´»åŠ¨ç»Ÿè®¡å¡ç‰‡ï¼š`ActivityStatCard.vue`

- **ğŸ“š æ•™å­¦ä¸­å¿ƒ**ï¼š`/teaching/index.vue`
  - ç­çº§ç®¡ç†ï¼š`ClassManagement.vue`
  - å­¦ç”Ÿç®¡ç†ï¼š`StudentManagement.vue`
  - æ•™å­¦è®°å½•ï¼š`TeachingRecord.vue`
  - æ•™å­¦è®°å½•å¯¹è¯æ¡†ï¼š`TeachingRecordDialog.vue`
  - æ•™å­¦è¿›åº¦ï¼š`TeachingProgress.vue`
  - æ•™å­¦ç»Ÿè®¡å¡ç‰‡ï¼š`TeachingStatCard.vue`
  - åª’ä½“ä¸Šä¼ ï¼š`MediaUpload.vue`

- **ğŸ“¢ é€šçŸ¥ä¸­å¿ƒ**ï¼š`/notifications/index.vue`
  - é€šçŸ¥ç»Ÿè®¡å¡ç‰‡ï¼š`NotificationStatCard.vue`
  - é€šçŸ¥è¯¦æƒ…ï¼š`NotificationDetail.vue`

- **ğŸ¯ æ‹›ç”Ÿä¸­å¿ƒ**ï¼š`/enrollment/index.vue`

#### ğŸ”§ åç«¯æ”¯æŒ
**APIå’ŒæœåŠ¡ï¼š**
- æ•™å¸ˆä»ªè¡¨æ¿æœåŠ¡ï¼š`/server/src/services/teacher-dashboard.service.ts`
- æ•™å¸ˆAPIæ¨¡å—ï¼š`/client/src/api/modules/teacher.ts`
- æ•™å¸ˆä»ªè¡¨æ¿APIï¼š`/client/src/api/modules/teacher-dashboard.ts`
- æ•™å¸ˆç±»å‹å®šä¹‰ï¼š`/client/src/types/teacher.ts`
- æ•™å¸ˆMockæ•°æ®ï¼š`/client/src/mock/teacher.js`

## ğŸš€ æ ¸å¿ƒä¼˜åŒ–å»ºè®®

### 1. ğŸ¯ æƒé™ç²’åº¦ä¼˜åŒ–

#### å½“å‰é—®é¢˜
- æ•™å¸ˆå¯ä»¥çœ‹åˆ°æ‰€æœ‰åŠŸèƒ½æ¨¡å—ï¼Œä½†æƒé™æ§åˆ¶ä¸å¤Ÿç²¾ç»†
- éƒ¨åˆ†åŠŸèƒ½å¯¹æ•™å¸ˆè§’è‰²æ„ä¹‰ä¸å¤§ï¼ˆå¦‚ä¸šåŠ¡ä¸­å¿ƒã€æ–°åª’ä½“ä¸­å¿ƒï¼‰

#### è§£å†³æ–¹æ¡ˆ
**A. æ•°æ®åº“å±‚é¢æƒé™è¿‡æ»¤**
```sql
-- å®¢æˆ·æ± ï¼šåªæ˜¾ç¤ºåˆ†é…ç»™å½“å‰æ•™å¸ˆçš„å®¢æˆ·
SELECT * FROM customer_pool
WHERE assigned_teacher_id = {current_teacher_id}
   OR is_public = 1;

-- æ´»åŠ¨ï¼šæ˜¾ç¤ºå…¨éƒ¨æ´»åŠ¨ä½†æ ‡æ³¨å‚ä¸çŠ¶æ€
SELECT a.*,
       CASE WHEN ap.teacher_id IS NOT NULL THEN 1 ELSE 0 END as is_participant
FROM activities a
LEFT JOIN activity_participants ap ON a.id = ap.activity_id
   AND ap.teacher_id = {current_teacher_id};

-- ä»»åŠ¡ï¼šåªæ˜¾ç¤ºåˆ†é…ç»™å½“å‰æ•™å¸ˆçš„ä»»åŠ¡
SELECT * FROM tasks
WHERE assigned_teacher_id = {current_teacher_id};
```

**B. å‰ç«¯æƒé™æ§åˆ¶ä¼˜åŒ–**
ä¿®æ”¹æ–‡ä»¶ï¼š`/client/src/stores/permissions.ts`
```typescript
// æ·»åŠ æ•™å¸ˆç‰¹å®šæƒé™æ£€æŸ¥
const teacherPermissions = {
  canViewAllCustomers: false,
  canEditAllActivities: false,
  canViewFinancialData: false,
  canManageStaff: false,
  // æ•™å¸ˆä¸“æœ‰æƒé™
  canManageOwnClasses: true,
  canViewAssignedCustomers: true,
  canParticipateActivities: true
}
```

### 2. ğŸ’¼ å®¢æˆ·æ± åŠŸèƒ½å¢å¼º

#### ç›®æ ‡ï¼šå®ç°"è·Ÿè¿›çŠ¶æ€é€æ˜åŒ–"
**ä¿®æ”¹æ–‡ä»¶ï¼š** `/client/src/pages/centers/CustomerPool.vue`

**åŠŸèƒ½å¢å¼ºï¼š**
```vue
<template>
  <div class="customer-pool-teacher">
    <!-- æ·»åŠ ç­›é€‰æ ‡ç­¾ -->
    <el-tabs v-model="activeTab">
      <el-tab-pane label="æˆ‘è·Ÿè¿›çš„å®¢æˆ·" name="my-customers">
        <CustomerList :customers="myCustomers" :editable="true" />
      </el-tab-pane>
      <el-tab-pane label="å›¢é˜Ÿå®¢æˆ·" name="team-customers">
        <CustomerList :customers="teamCustomers" :editable="false" />
      </el-tab-pane>
    </el-tabs>
  </div>
</template>

<script setup lang="ts">
// æ·»åŠ å®¢æˆ·è·Ÿè¿›çŠ¶æ€æ˜¾ç¤º
const customerColumns = [
  { prop: 'name', label: 'å®¢æˆ·å§“å' },
  { prop: 'phone', label: 'è”ç³»ç”µè¯' },
  { prop: 'followTeacher', label: 'è·Ÿè¿›æ•™å¸ˆ' },
  { prop: 'lastContact', label: 'æœ€åè”ç³»' },
  { prop: 'status', label: 'è·Ÿè¿›çŠ¶æ€' }
]
</script>
```

### 3. ğŸ“Š æ´»åŠ¨ä¸­å¿ƒæƒé™åˆ†å±‚

#### ç›®æ ‡ï¼šå‚ä¸ vs ç®¡ç†æƒé™åˆ†ç¦»
**ä¿®æ”¹æ–‡ä»¶ï¼š** `/client/src/pages/teacher-center/activities/index.vue`

```vue
<template>
  <div class="teacher-activities">
    <!-- æˆ‘å‚ä¸çš„æ´»åŠ¨ -->
    <el-card class="mb-4">
      <template #header>
        <div class="flex justify-between">
          <span>æˆ‘å‚ä¸çš„æ´»åŠ¨</span>
          <el-badge :value="myActivitiesCount" type="primary" />
        </div>
      </template>
      <ActivityList :activities="myActivities" :show-management="true" />
    </el-card>

    <!-- å…¨å›­æ´»åŠ¨ï¼ˆåªè¯»ï¼‰ -->
    <el-card>
      <template #header>
        <div class="flex justify-between">
          <span>å…¨å›­æ´»åŠ¨</span>
          <el-tag size="small">ä»…æŸ¥çœ‹</el-tag>
        </div>
      </template>
      <ActivityList :activities="allActivities" :show-management="false" />
    </el-card>
  </div>
</template>
```

### 4. ğŸ“ æ•™å­¦ä¸­å¿ƒæ•°æ®å…³è”

#### ç›®æ ‡ï¼šä¸ç­çº§å­¦ç”Ÿæ•°æ®æ·±åº¦é›†æˆ
**å¢å¼ºæ–‡ä»¶ï¼š** `/client/src/pages/teacher-center/teaching/index.vue`

**æ·»åŠ åŠŸèƒ½ï¼š**
```typescript
// è·å–æ•™å¸ˆè´Ÿè´£çš„ç­çº§å’Œå­¦ç”Ÿ
const teacherClasses = await teacherAPI.getTeacherClasses(teacherId)
const teacherStudents = await teacherAPI.getTeacherStudents(teacherId)

// æ·»åŠ å®¶é•¿æ²Ÿé€šè®°å½•
const parentCommunications = await teacherAPI.getParentCommunications(teacherId)
```

### 5. ğŸ“± ç§»é™¤ä¸å¿…è¦çš„åŠŸèƒ½æ¨¡å—

#### å»ºè®®éšè—çš„åŠŸèƒ½ï¼ˆé’ˆå¯¹æ•™å¸ˆè§’è‰²ï¼‰
**ä¿®æ”¹æ–‡ä»¶ï¼š** `/client/src/layouts/components/Sidebar.vue`

```typescript
// æ•™å¸ˆè§’è‰²èœå•è¿‡æ»¤
const teacherHiddenMenus = [
  'business-center',     // ä¸šåŠ¡ä¸­å¿ƒ
  'media-center',        // æ–°åª’ä½“ä¸­å¿ƒ
  'finance-center',      // è´¢åŠ¡ä¸­å¿ƒï¼ˆå¦‚æœå­˜åœ¨ï¼‰
  'system-management'    // ç³»ç»Ÿç®¡ç†
]

const filteredMenus = computed(() => {
  if (userRole.value === 'teacher') {
    return menuItems.value.filter(menu =>
      !teacherHiddenMenus.includes(menu.code)
    )
  }
  return menuItems.value
})
```

## ğŸ”§ å…·ä½“å®ç°è®¡åˆ’

### é˜¶æ®µä¸€ï¼šæƒé™æ§åˆ¶ä¼˜åŒ–ï¼ˆ1-2å¤©ï¼‰
1. **åç«¯APIæƒé™è¿‡æ»¤**
   - ä¿®æ”¹ `/server/src/routes/customer-pool.routes.ts`
   - ä¿®æ”¹ `/server/src/routes/activities.routes.ts`
   - æ·»åŠ æ•™å¸ˆIDè¿‡æ»¤é€»è¾‘

2. **å‰ç«¯èœå•æƒé™æ§åˆ¶**
   - ä¿®æ”¹ `/client/src/layouts/components/Sidebar.vue`
   - æ›´æ–° `/client/src/stores/permissions.ts`

### é˜¶æ®µäºŒï¼šå®¢æˆ·æ± åŠŸèƒ½å¢å¼ºï¼ˆ2-3å¤©ï¼‰
1. **æ•°æ®åº“è¡¨è°ƒæ•´**
```sql
-- å®¢æˆ·æ± è¡¨æ·»åŠ å­—æ®µ
ALTER TABLE customer_pool
ADD COLUMN assigned_teacher_id INT,
ADD COLUMN is_public BOOLEAN DEFAULT 0,
ADD COLUMN follow_status ENUM('å¾…è·Ÿè¿›', 'è·Ÿè¿›ä¸­', 'å·²è½¬åŒ–', 'å·²æ”¾å¼ƒ') DEFAULT 'å¾…è·Ÿè¿›';
```

2. **å‰ç«¯ç•Œé¢ä¼˜åŒ–**
   - å¢å¼º `/client/src/pages/centers/CustomerPool.vue`
   - æ·»åŠ å®¢æˆ·åˆ†é…å’ŒçŠ¶æ€ç®¡ç†åŠŸèƒ½

### é˜¶æ®µä¸‰ï¼šæ´»åŠ¨å‚ä¸æƒé™åˆ†å±‚ï¼ˆ2å¤©ï¼‰
1. **æ´»åŠ¨å‚ä¸è€…è¡¨**
```sql
-- åˆ›å»ºæ´»åŠ¨å‚ä¸è€…å…³è”è¡¨
CREATE TABLE activity_participants (
  id INT PRIMARY KEY AUTO_INCREMENT,
  activity_id INT NOT NULL,
  teacher_id INT NOT NULL,
  role ENUM('å‚ä¸è€…', 'è´Ÿè´£äºº') DEFAULT 'å‚ä¸è€…',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

2. **å‰ç«¯æ´»åŠ¨å±•ç¤ºä¼˜åŒ–**
   - ä¿®æ”¹ `/client/src/pages/teacher-center/activities/index.vue`
   - æ·»åŠ å‚ä¸çŠ¶æ€æ ‡è¯†

### é˜¶æ®µå››ï¼šæ•™å­¦æ•°æ®æ·±åº¦é›†æˆï¼ˆ3-4å¤©ï¼‰
1. **ç­çº§å­¦ç”Ÿå…³è”**
   - å®Œå–„æ•™å¸ˆ-ç­çº§-å­¦ç”Ÿçš„æ•°æ®å…³è”
   - æ·»åŠ å®¶é•¿æ²Ÿé€šè®°å½•åŠŸèƒ½

2. **æ•™å­¦è®°å½•å®Œå–„**
   - å¢å¼ºç°æœ‰çš„æ•™å­¦è®°å½•åŠŸèƒ½
   - æ·»åŠ å­¦ç”Ÿå‡ºå‹¤ã€è¡¨ç°è®°å½•

## ğŸ“ æ–‡ä»¶ç»“æ„æ€»ç»“

### å‰ç«¯ä¸»è¦æ–‡ä»¶ä½ç½®
```
/client/src/
â”œâ”€â”€ pages/teacher-center/           # æ•™å¸ˆä¸“ç”¨é¡µé¢ï¼ˆå·²å¼€å‘ï¼‰
â”‚   â”œâ”€â”€ dashboard/                  # å·¥ä½œå°
â”‚   â”œâ”€â”€ tasks/                      # ä»»åŠ¡ä¸­å¿ƒ
â”‚   â”œâ”€â”€ activities/                 # æ´»åŠ¨ä¸­å¿ƒ
â”‚   â”œâ”€â”€ teaching/                   # æ•™å­¦ä¸­å¿ƒ
â”‚   â”œâ”€â”€ notifications/              # é€šçŸ¥ä¸­å¿ƒ
â”‚   â””â”€â”€ enrollment/                 # æ‹›ç”Ÿä¸­å¿ƒ
â”œâ”€â”€ pages/centers/                  # é€šç”¨ä¸­å¿ƒé¡µé¢ï¼ˆéœ€è¦æƒé™ä¼˜åŒ–ï¼‰
â”‚   â”œâ”€â”€ CustomerPool.vue            # å®¢æˆ·æ± ï¼ˆéœ€è¦å¢å¼ºï¼‰
â”‚   â””â”€â”€ ...
â”œâ”€â”€ api/modules/
â”‚   â”œâ”€â”€ teacher.ts                  # æ•™å¸ˆAPI
â”‚   â””â”€â”€ teacher-dashboard.ts        # æ•™å¸ˆä»ªè¡¨æ¿API
â””â”€â”€ stores/permissions.ts           # æƒé™ç®¡ç†ï¼ˆéœ€è¦ä¼˜åŒ–ï¼‰
```

### åç«¯ä¸»è¦æ–‡ä»¶ä½ç½®
```
/server/src/
â”œâ”€â”€ services/teacher-dashboard.service.ts    # æ•™å¸ˆä»ªè¡¨æ¿æœåŠ¡
â”œâ”€â”€ routes/                                  # è·¯ç”±ï¼ˆéœ€è¦æ·»åŠ æƒé™è¿‡æ»¤ï¼‰
â”œâ”€â”€ models/                                  # æ•°æ®æ¨¡å‹
â””â”€â”€ validations/teacher.validation.ts        # æ•™å¸ˆæ•°æ®éªŒè¯
```

## âš¡ ä¼˜åŒ–åçš„æ•ˆæœé¢„æœŸ

### ğŸ¯ ç”¨æˆ·ä½“éªŒæå‡
1. **ç•Œé¢ç®€æ´**ï¼šç§»é™¤ä¸ç›¸å…³åŠŸèƒ½ï¼Œæ•™å¸ˆç•Œé¢æ›´åŠ æ¸…çˆ½
2. **æƒé™æ˜ç¡®**ï¼šæ•°æ®è®¿é—®æƒé™æ¸…æ™°ï¼Œé¿å…è¶Šæƒæ“ä½œ
3. **å·¥ä½œæ•ˆç‡**ï¼šçªå‡ºæ•™å¸ˆæ ¸å¿ƒå·¥ä½œï¼Œå‡å°‘æ— å…³å¹²æ‰°

### ğŸ”’ æ•°æ®å®‰å…¨æå‡
1. **ç»†ç²’åº¦æƒé™**ï¼šæ•™å¸ˆåªèƒ½è®¿é—®ç›¸å…³çš„æ•°æ®
2. **é€æ˜åŒ–ç®¡ç†**ï¼šå®¢æˆ·è·Ÿè¿›çŠ¶æ€å¯¹å›¢é˜Ÿé€æ˜ï¼Œé¿å…é‡å¤è”ç³»
3. **è§’è‰²è¾¹ç•Œ**ï¼šæ˜ç¡®æ•™å¸ˆä¸ç®¡ç†å±‚çš„åŠŸèƒ½è¾¹ç•Œ

### ğŸ“ˆ ä¸šåŠ¡ä»·å€¼æå‡
1. **æ‹›ç”Ÿåä½œ**ï¼šæ•™å¸ˆèƒ½å¤Ÿæœ‰æ•ˆå‚ä¸æ‹›ç”Ÿå·¥ä½œ
2. **å®¢æˆ·ç®¡ç†**ï¼šå®¢æˆ·è·Ÿè¿›çŠ¶æ€æ¸…æ™°ï¼Œæé«˜è½¬åŒ–ç‡
3. **å›¢é˜Ÿåä½œ**ï¼šæ´»åŠ¨å‚ä¸çŠ¶æ€é€æ˜ï¼Œæé«˜åä½œæ•ˆç‡

## ğŸ”„ åç»­ç»´æŠ¤å»ºè®®

1. **å®šæœŸæƒé™å®¡æŸ¥**ï¼šæ¯æœˆæ£€æŸ¥æ•™å¸ˆæƒé™æ˜¯å¦åˆç†
2. **ç”¨æˆ·åé¦ˆæ”¶é›†**ï¼šæ”¶é›†æ•™å¸ˆç”¨æˆ·çš„ä½¿ç”¨åé¦ˆ
3. **åŠŸèƒ½è¿­ä»£ä¼˜åŒ–**ï¼šæ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µç»§ç»­ä¼˜åŒ–åŠŸèƒ½
4. **åŸ¹è®­æ”¯æŒ**ï¼šä¸ºæ•™å¸ˆæä¾›ç³»ç»Ÿä½¿ç”¨åŸ¹è®­

---

*æœ¬å»ºè®®åŸºäºç°æœ‰ç³»ç»Ÿæ¶æ„ï¼Œæœ€å¤§åŒ–åˆ©ç”¨å·²å¼€å‘çš„åŠŸèƒ½æ¨¡å—ï¼Œé€šè¿‡æƒé™ä¼˜åŒ–å’ŒåŠŸèƒ½å¢å¼ºï¼Œä¸ºæ•™å¸ˆè§’è‰²æä¾›æ›´åŠ è´´åˆå®é™…å·¥ä½œéœ€æ±‚çš„ç³»ç»Ÿä½“éªŒã€‚*