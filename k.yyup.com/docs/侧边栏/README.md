# 侧边栏文档中心

欢迎来到幼儿园管理系统侧边栏文档中心！这里包含了侧边栏组件的完整技术文档和使用指南。

---

## 📚 文档导航

### 核心文档

| 文档 | 描述 | 适用人群 |
|------|------|---------|
| [侧边栏页面说明](./侧边栏页面说明.md) | 完整的技术文档，包含架构设计、核心功能、开发指南 | 开发人员、架构师 |
| [快速参考](./快速参考.md) | 常用操作、SQL查询、故障排查的速查手册 | 所有人员 |

### 修复报告

| 文档 | 描述 | 日期 |
|------|------|------|
| [侧边栏英文名称问题最终修复报告](./侧边栏英文名称问题最终修复报告.md) | 侧边栏英文名称显示问题的完整修复过程 | 2025-10-07 |
| 中心名称修复报告 | 中心名称修复记录（已归档） | 2025-10-07 |

### 工具脚本

| 脚本 | 功能 | 使用方法 |
|------|------|---------|
| [check-chinese-names.js](./check-chinese-names.js) | 检查所有中心的中文名称 | `cd docs/侧边栏 && node check-chinese-names.js` |
| [check-disabled-centers.js](./check-disabled-centers.js) | 检查已禁用中心的状态 | `cd docs/侧边栏 && node check-disabled-centers.js` |
| [cleanup-disabled-centers.js](./cleanup-disabled-centers.js) | 清理已禁用中心的权限关联 | `cd docs/侧边栏 && node cleanup-disabled-centers.js` |
| [clear-permission-cache.js](./clear-permission-cache.js) | 清除Redis权限缓存 | `cd docs/侧边栏 && node clear-permission-cache.js` |

### 相关文档

| 文档 | 位置 | 描述 |
|------|------|------|
| 动态路由说明 | `../路由/动态路由说明.md` | 路由系统文档 |
| 权限系统说明 | `../权限/权限系统说明.md` | 权限控制文档 |

---

## 🎯 快速开始

### 新手入门

1. **了解侧边栏** - 阅读 [侧边栏页面说明](./侧边栏页面说明.md) 的"概述"部分
2. **查看当前配置** - 运行 `cd server && node check-center-names.js`
3. **学习基本操作** - 参考 [快速参考](./快速参考.md)

### 常见任务

#### 添加新中心
👉 参考: [快速参考 - 添加新中心](./快速参考.md#添加新中心完整流程)

#### 修改中心名称
👉 参考: [快速参考 - 修改中心名称](./快速参考.md#修改中心名称)

#### 调整中心排序
👉 参考: [快速参考 - 调整中心排序](./快速参考.md#调整中心排序)

#### 故障排查
👉 参考: [快速参考 - 故障排查](./快速参考.md#故障排查)

---

## 🏗️ 系统架构

### 核心组件

```
侧边栏系统
├── 前端组件 (Sidebar.vue)
│   ├── 动态菜单生成
│   ├── 权限过滤
│   ├── 路由集成
│   └── 图标系统
├── 权限管理 (permissions.ts)
│   ├── 菜单权限
│   ├── 页面权限
│   └── 按钮权限
├── 路由系统 (dynamic-routes.ts)
│   ├── 动态路由生成
│   ├── 组件映射
│   └── 路由守卫
└── 后端API
    ├── 权限查询
    ├── 菜单生成
    └── 权限验证
```

### 数据流程

```
用户登录 → 获取权限 → 生成菜单 → 渲染侧边栏 → 路由跳转
```

详细流程请参考: [侧边栏页面说明 - 数据流程](./侧边栏页面说明.md#数据流程)

---

## 📊 当前配置

### 活跃中心 (12个)

1. 人员中心
2. 活动中心
3. 营销中心
4. 业务中心
5. 客户池中心
6. 系统中心
7. 财务中心
8. 招生中心
9. 任务中心
10. 教学中心
11. 话术中心
12. 新媒体中心

完整配置请参考: [快速参考 - 当前中心列表](./快速参考.md#当前中心列表)

---

## 🔧 开发工具

### 检查脚本

```bash
# 检查所有中心配置
cd docs/侧边栏 && node check-chinese-names.js

# 检查已禁用中心的状态
cd docs/侧边栏 && node check-disabled-centers.js
```

### 清理脚本

```bash
# 清理已禁用中心的权限关联
cd docs/侧边栏 && node cleanup-disabled-centers.js

# 清除Redis权限缓存
cd docs/侧边栏 && node clear-permission-cache.js
```

---

## 📖 技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| Vue 3 | 3.x | 组件框架 |
| TypeScript | 5.x | 类型系统 |
| Pinia | 2.x | 状态管理 |
| Vue Router | 4.x | 路由管理 |
| Element Plus | 2.x | UI组件库 |
| Lucide Icons | - | 图标库 |

---

## 🐛 常见问题

### Q: 侧边栏不显示某个中心？

**A**: 检查以下几点：
1. 数据库中该中心的 `status` 是否为 1
2. 用户角色是否有该中心的权限
3. 前端缓存是否需要清除

详细解决方案: [侧边栏页面说明 - 常见问题](./侧边栏页面说明.md#常见问题)

### Q: 如何添加新中心？

**A**: 按照以下步骤：
1. 在数据库中插入中心分类
2. 插入中心页面记录
3. 创建Vue组件
4. 配置路由映射
5. 配置图标映射

详细步骤: [快速参考 - 添加新中心](./快速参考.md#添加新中心完整流程)

### Q: 中心名称显示为英文？

**A**: 更新数据库中的 `chinese_name` 字段：
```sql
UPDATE permissions 
SET chinese_name = '正确的中文名称' 
WHERE code = 'CENTER_CODE';
```

更多问题: [侧边栏页面说明 - 常见问题](./侧边栏页面说明.md#常见问题)

---

## 📝 更新日志

### 2025-10-07
- ✅ 创建完整的侧边栏文档体系
- ✅ 修复所有中心名称为纯中文
- ✅ 移除3个不需要的中心
- ✅ 最终保留12个核心业务中心
- ✅ 修复侧边栏英文名称显示问题
- ✅ 创建完整的工具脚本集
- ✅ 整理所有文档和脚本到 `docs/侧边栏/` 目录

### 2025-01-25
- ✅ 重构侧边栏为动态权限驱动
- ✅ 实现角色自适应菜单
- ✅ 优化图标系统

---

## 🤝 贡献指南

### 文档更新

如果你发现文档有错误或需要补充，请：

1. 直接编辑对应的Markdown文件
2. 确保格式规范、内容准确
3. 更新"更新日志"部分
4. 提交变更

### 代码贡献

如果你要修改侧边栏相关代码，请：

1. 阅读 [侧边栏页面说明](./侧边栏页面说明.md)
2. 遵循现有的代码规范
3. 添加必要的注释
4. 更新相关文档

---

## 📞 技术支持

### 文档问题
- 查看 [侧边栏页面说明](./侧边栏页面说明.md)
- 查看 [快速参考](./快速参考.md)

### 代码问题
- 查看源代码注释
- 运行检查脚本诊断
- 查看浏览器控制台日志

### 数据库问题
- 运行 `cd docs/侧边栏 && node check-chinese-names.js` 检查配置
- 查看 [快速参考 - 常用SQL查询](./快速参考.md#常用sql查询)

---

## 📂 文件结构

```
docs/侧边栏/
├── README.md                                    # 本文件 - 文档索引
├── 侧边栏页面说明.md                            # 完整技术文档
├── 快速参考.md                                  # 速查手册
├── 侧边栏英文名称问题最终修复报告.md            # 修复报告
├── check-chinese-names.js                       # 检查中文名称脚本
├── check-disabled-centers.js                    # 检查已禁用中心脚本
├── cleanup-disabled-centers.js                  # 清理已禁用中心脚本
└── clear-permission-cache.js                    # 清除权限缓存脚本

相关文件:
├── client/src/
│   ├── layouts/components/Sidebar.vue           # 侧边栏组件
│   ├── stores/permissions.ts                    # 权限状态
│   └── router/dynamic-routes.ts                 # 动态路由
└── server/src/
    ├── services/route-cache.service.ts          # 路由缓存服务
    └── controllers/auth-permissions.controller.ts  # 权限控制器
```

---

## 🎓 学习路径

### 初级 (了解基础)
1. 阅读 [侧边栏页面说明 - 概述](./侧边栏页面说明.md#概述)
2. 查看 [当前中心列表](./快速参考.md#当前中心列表)
3. 运行检查脚本了解配置

### 中级 (掌握使用)
1. 学习 [核心功能](./侧边栏页面说明.md#核心功能)
2. 练习 [常见任务](./快速参考.md#快速开始)
3. 了解 [权限控制](./侧边栏页面说明.md#权限控制)

### 高级 (深入开发)
1. 研究 [架构设计](./侧边栏页面说明.md#架构设计)
2. 学习 [数据流程](./侧边栏页面说明.md#数据流程)
3. 阅读源代码实现

---

**文档维护**: AI Assistant (Augment Agent)  
**最后更新**: 2025-10-07  
**版本**: 1.0.0

