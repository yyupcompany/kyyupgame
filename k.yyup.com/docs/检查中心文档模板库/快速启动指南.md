# æ£€æŸ¥ä¸­å¿ƒ - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨

### æ­¥éª¤1: è¿è¡Œæ•°æ®åº“è¿ç§»ï¼ˆ2åˆ†é’Ÿï¼‰

```bash
# è¿›å…¥serverç›®å½•
cd server

# è¿è¡Œè¿ç§»
npx sequelize-cli db:migrate

# çœ‹åˆ°è¿™ä¸ªè¾“å‡ºè¯´æ˜æˆåŠŸï¼š
# âœ… æˆåŠŸæ·»åŠ 47ä¸ªæ–°å­—æ®µåˆ°kindergartensè¡¨
```

### æ­¥éª¤2: å¯åŠ¨æœåŠ¡å™¨ï¼ˆ1åˆ†é’Ÿï¼‰

```bash
# ç¼–è¯‘TypeScript
npm run build

# å¯åŠ¨æœåŠ¡å™¨
npm run dev

# çœ‹åˆ°è¿™ä¸ªè¾“å‡ºè¯´æ˜æˆåŠŸï¼š
# Server is running on port 3000
```

### æ­¥éª¤3: æµ‹è¯•APIï¼ˆ2åˆ†é’Ÿï¼‰

```bash
# è·å–ä¿¡æ¯å®Œæ•´åº¦ï¼ˆéœ€è¦å…ˆç™»å½•è·å–tokenï¼‰
curl -X GET http://localhost:3000/api/kindergarten/completeness \
  -H "Authorization: Bearer YOUR_TOKEN"

# é¢„æœŸå“åº”ï¼š
{
  "success": true,
  "data": {
    "score": 45,
    "level": "incomplete",
    "canUseAdvancedFeatures": false
  }
}
```

---

## ğŸ“‹ è¯¦ç»†æ­¥éª¤

### å‰ç½®æ¡ä»¶

- âœ… Node.js >= 18.0.0
- âœ… MySQL >= 8.0
- âœ… npm >= 8.0.0

### 1. å®‰è£…ä¾èµ–

```bash
cd server
npm install
```

### 2. é…ç½®æ•°æ®åº“

ç¡®ä¿ `server/.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®æ­£ç¡®ï¼š

```env
DB_HOST=localhost
DB_PORT=3306
DB_NAME=kindergarten_management
DB_USER=root
DB_PASSWORD=your_password
```

### 3. è¿è¡Œè¿ç§»

```bash
npx sequelize-cli db:migrate
```

**éªŒè¯è¿ç§»æˆåŠŸ**:
```bash
mysql -u root -p -e "
USE kindergarten_management;
SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 'kindergartens' 
AND COLUMN_NAME = 'license_number';
"
```

### 4. æ›´æ–°è·¯ç”±æ³¨å†Œ

åœ¨ `server/src/app.ts` æˆ– `server/src/routes/index.ts` ä¸­æ·»åŠ æ–°è·¯ç”±ï¼š

```typescript
import kindergartenCompletenessRoutes from './routes/kindergarten-completeness.routes';

// æ³¨å†Œè·¯ç”±
app.use('/api/kindergarten', kindergartenCompletenessRoutes);
```

### 5. å¯åŠ¨æœåŠ¡å™¨

```bash
npm run dev
```

### 6. æµ‹è¯•åŠŸèƒ½

#### æµ‹è¯•1: è·å–å®Œæ•´åº¦

```bash
curl -X GET http://localhost:3000/api/kindergarten/completeness \
  -H "Authorization: Bearer YOUR_TOKEN"
```

#### æµ‹è¯•2: è·å–ç¼ºå¤±å­—æ®µ

```bash
curl -X GET http://localhost:3000/api/kindergarten/missing-fields \
  -H "Authorization: Bearer YOUR_TOKEN"
```

#### æµ‹è¯•3: æ›´æ–°åŸºç¡€ä¿¡æ¯

```bash
curl -X PUT http://localhost:3000/api/kindergarten/base-info/batch \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "licenseNumber": "äº¬æ•™è®¸å­—[2020]001å·",
    "licenseIssueDate": "2020-01-01",
    "licenseExpiryDate": "2025-12-31",
    "principalQualification": "å›­é•¿è¯123456",
    "cityLevel": "tier1",
    "educationBureau": "åŒ—äº¬å¸‚æœé˜³åŒºæ•™è‚²å±€"
  }'
```

---

## ğŸ¯ åŠŸèƒ½æ¼”ç¤º

### åœºæ™¯1: æ–°å¹¼å„¿å›­é¦–æ¬¡ä½¿ç”¨

**åˆå§‹çŠ¶æ€**:
- å®Œæ•´åº¦: 40åˆ†
- ç­‰çº§: incomplete
- ç¼ºå¤±å¿…å¡«å­—æ®µ: 9ä¸ª

**æ“ä½œ**:
1. è®¿é—®æ£€æŸ¥ä¸­å¿ƒ
2. çœ‹åˆ°æç¤ºï¼š"è¯·å®Œå–„9ä¸ªå¿…å¡«å­—æ®µåä½¿ç”¨é«˜çº§åŠŸèƒ½"
3. ç‚¹å‡»"ç«‹å³å®Œå–„"
4. å¡«å†™ç¼ºå¤±å­—æ®µ
5. å®Œæ•´åº¦æå‡åˆ°90åˆ†
6. è§£é”é«˜çº§åŠŸèƒ½

### åœºæ™¯2: æ‰¹é‡æ›´æ–°ä¿¡æ¯

```typescript
// å‰ç«¯ä»£ç 
const completeBaseInfo = async () => {
  // 1. è·å–ç¼ºå¤±å­—æ®µ
  const missing = await fetch('/api/kindergarten/missing-fields');
  const { data } = await missing.json();
  
  console.log('ç¼ºå¤±å­—æ®µ:', data.missingRequired);
  
  // 2. æ‰¹é‡æ›´æ–°
  const update = await fetch('/api/kindergarten/base-info/batch', {
    method: 'PUT',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${token}`
    },
    body: JSON.stringify({
      licenseNumber: 'äº¬æ•™è®¸å­—[2020]001å·',
      licenseIssueDate: '2020-01-01',
      licenseExpiryDate: '2025-12-31',
      principalQualification: 'å›­é•¿è¯123456',
      qualifiedTeacherCount: 20,
      cityLevel: 'tier1',
      educationBureau: 'åŒ—äº¬å¸‚æœé˜³åŒºæ•™è‚²å±€'
    })
  });
  
  const result = await update.json();
  console.log('æ›´æ–°ç»“æœ:', result.data.completeness);
  // { score: 90, level: 'excellent', canUseAdvancedFeatures: true }
};
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: è¿ç§»å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A**: æ£€æŸ¥æ•°æ®åº“è¿æ¥å’Œæƒé™

```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
mysql -u root -p -e "SHOW DATABASES;"

# æ£€æŸ¥è¡¨æ˜¯å¦å­˜åœ¨
mysql -u root -p -e "USE kindergarten_management; SHOW TABLES;"
```

### Q2: APIè¿”å›401æ€ä¹ˆåŠï¼Ÿ

**A**: æ£€æŸ¥JWT Token

```bash
# å…ˆç™»å½•è·å–token
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "password"}'

# ä½¿ç”¨è¿”å›çš„token
export TOKEN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

### Q3: å®Œæ•´åº¦è®¡ç®—ä¸å‡†ç¡®ï¼Ÿ

**A**: æ‰‹åŠ¨è§¦å‘é‡æ–°è®¡ç®—

```bash
curl -X POST http://localhost:3000/api/kindergarten/calculate-completeness \
  -H "Authorization: Bearer $TOKEN"
```

### Q4: å¦‚ä½•å›æ»šè¿ç§»ï¼Ÿ

**A**: è¿è¡Œå›æ»šå‘½ä»¤

```bash
npx sequelize-cli db:migrate:undo
```

---

## ğŸ“š ä¸‹ä¸€æ­¥

### 1. å¼€å‘å‰ç«¯ç•Œé¢

åˆ›å»ºä»¥ä¸‹é¡µé¢ï¼š
- æ£€æŸ¥ä¸­å¿ƒä¸»é¡µï¼ˆå¸¦å®Œæ•´åº¦æç¤ºï¼‰
- åŸºç¡€ä¿¡æ¯å®Œå–„é¡µé¢
- æ¨¡æ¿åˆ—è¡¨é¡µé¢

### 2. ç»§ç»­Week 1å¼€å‘

- åˆ›å»ºdocument_templatesè¡¨
- å¯¼å…¥73ä¸ªæ¨¡æ¿
- å¼€å‘æ¨¡æ¿ç®¡ç†API

### 3. æŸ¥çœ‹æ–‡æ¡£

- [ç³»ç»Ÿé›†æˆæ–¹æ¡ˆ](./ç³»ç»Ÿé›†æˆæ–¹æ¡ˆ.md)
- [åŸºç¡€ä¿¡æ¯å®Œå–„æ–¹æ¡ˆ](./åŸºç¡€ä¿¡æ¯å®Œå–„æ–¹æ¡ˆ.md)
- [å®Œæ•´å¼€å‘è®¡åˆ’V2](./å®Œæ•´å¼€å‘è®¡åˆ’-V2.md)

---

## ğŸ“ å­¦ä¹ èµ„æº

### APIæ–‡æ¡£

æŸ¥çœ‹å®Œæ•´çš„APIæ–‡æ¡£ï¼š
- [APIæ¥å£æ–‡æ¡£](./APIæ¥å£æ–‡æ¡£.md)

### æ•°æ®åº“è®¾è®¡

æŸ¥çœ‹æ•°æ®åº“è®¾è®¡ï¼š
- [æ•°æ®åº“è®¾è®¡](./æ•°æ®åº“è®¾è®¡.md)

### å¼€å‘è¿›åº¦

æŸ¥çœ‹å¼€å‘è¿›åº¦ï¼š
- [å¼€å‘è¿›åº¦-Week0å®Œæˆ](./å¼€å‘è¿›åº¦-Week0å®Œæˆ.md)

---

## âœ… éªŒæ”¶æ¸…å•

- [ ] æ•°æ®åº“è¿ç§»æˆåŠŸ
- [ ] æ–°å­—æ®µå·²æ·»åŠ 
- [ ] æœåŠ¡å™¨æ­£å¸¸å¯åŠ¨
- [ ] APIæ­£å¸¸å“åº”
- [ ] å®Œæ•´åº¦è®¡ç®—å‡†ç¡®
- [ ] å¯ä»¥æ‰¹é‡æ›´æ–°ä¿¡æ¯

---

**å¿«é€Ÿå¯åŠ¨å®Œæˆï¼** ğŸ‰

ç°åœ¨ä½ å¯ä»¥ï¼š
1. æµ‹è¯•APIåŠŸèƒ½
2. å¼€å‘å‰ç«¯ç•Œé¢
3. ç»§ç»­åç»­å¼€å‘

æœ‰é—®é¢˜éšæ—¶æŸ¥çœ‹æ–‡æ¡£æˆ–æé—®ï¼

