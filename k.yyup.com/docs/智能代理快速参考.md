# ğŸ¤– æ™ºèƒ½ä»£ç†å¿«é€Ÿå‚è€ƒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. è¿è¡Œå®‰å…¨ä¿®å¤
node scripts/å®‰å…¨ä¿®å¤è„šæœ¬.js

# 2. å¯åŠ¨æœåŠ¡
npm run start

# 3. è¿è¡Œæ£€æµ‹
npm run test:smart-agent
```

---

## ğŸ“‹ æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | æ–‡ä»¶ä½ç½® | å…³é”®åŠŸèƒ½ |
|------|---------|---------|
| **ä¸»ç»„ä»¶** | `client/src/components/ai-assistant/AIAssistant.vue` | æ™ºèƒ½ä»£ç†æ§åˆ¶ã€UIæ¸²æŸ“ |
| **è¾“å…¥æ§åˆ¶** | `client/src/components/ai-assistant/InputArea.vue` | æ™ºèƒ½ä»£ç†å¼€å…³ã€æƒé™æ£€æŸ¥ |
| **ç»Ÿä¸€æ™ºèƒ½** | `server/src/services/ai-operator/unified-intelligence.service.ts` | ä¸‰çº§æ£€ç´¢ã€å·¥å…·è°ƒç”¨ |
| **å·¥å…·æœåŠ¡** | `server/src/services/ai-operator/function-tools.service.ts` | å·¥å…·æ‰§è¡Œã€TodoListåˆ›å»º |

---

## ğŸ”§ å…³é”®é…ç½®

### æ™ºèƒ½ä»£ç†å¼€å…³
```typescript
// ä½ç½®: AIAssistant.vue:911
const autoExecute = ref(false)  // æ™ºèƒ½ä»£ç†çŠ¶æ€
const canAutoExecute = computed(() => userStore.isAdmin)  // æƒé™æ§åˆ¶
```

### æƒé™æ£€æŸ¥
```typescript
// å‰ç«¯æƒé™
canAutoExecute: userStore.isAdmin || hasPermission('AI_AGENT_USE')

// åç«¯æƒé™
enableTools: metadata?.enableTools && userRole === 'admin'
```

### ä¸‰çº§æ£€ç´¢é…ç½®
```typescript
// Level 1: ç›´æ¥å“åº” (<50ms)
// Level 2: å¤æ‚åº¦è¯„ä¼° (<2s) 
// Level 3: å®Œæ•´AIå¤„ç† (<30s)
```

---

## ğŸ› ï¸ å¸¸ç”¨API

### å‘é€æ™ºèƒ½ä»£ç†æ¶ˆæ¯
```typescript
POST /api/ai/conversations/{id}/messages
{
  "content": "ç”¨æˆ·æ¶ˆæ¯",
  "metadata": {
    "enableTools": true,
    "userRole": "admin",
    "source": "ai-assistant"
  }
}
```

### ç»Ÿä¸€æ™ºèƒ½æ¥å£
```typescript
POST /api/ai/unified/unified-chat
{
  "message": "ç”¨æˆ·è¯·æ±‚",
  "userId": 1,
  "context": {
    "enableTools": true,
    "enableWebSearch": false
  }
}
```

### å·¥å…·è°ƒç”¨
```typescript
// æ”¯æŒçš„å·¥å…·
- analyze_task_complexity  // å¤æ‚åº¦åˆ†æ
- create_todo_list        // åˆ›å»ºä»»åŠ¡æ¸…å•
- web_search             // ç½‘ç»œæœç´¢
- create_smart_workflow  // æ™ºèƒ½å·¥ä½œæµ
```

---

## ğŸš¨ å®‰å…¨æ£€æŸ¥æ¸…å•

- [ ] é»˜è®¤æƒé™ä¸æ˜¯ADMIN
- [ ] æƒé™æ£€æŸ¥é€»è¾‘ä¸€è‡´
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] è¶…æ—¶æœºåˆ¶å­˜åœ¨
- [ ] æ—¥å¿—è®°å½•è¯¦ç»†

---

## ğŸ” æ•…éšœæ’æŸ¥

### æ™ºèƒ½ä»£ç†æ— æ³•å¯ç”¨
1. æ£€æŸ¥ç”¨æˆ·æƒé™: `userStore.isAdmin`
2. æ£€æŸ¥åç«¯é…ç½®: `enableTools` å‚æ•°
3. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯

### å·¥å…·è°ƒç”¨å¤±è´¥
1. æ£€æŸ¥å·¥å…·æƒé™: ç”¨æˆ·è§’è‰²æ˜¯å¦ä¸ºadmin
2. æ£€æŸ¥ç½‘ç»œè¿æ¥: APIæ˜¯å¦å¯è¾¾
3. æŸ¥çœ‹å·¥å…·æ‰§è¡Œæ—¥å¿—

### æ€§èƒ½é—®é¢˜
1. æ£€æŸ¥å“åº”æ—¶é—´: æ˜¯å¦è¶…è¿‡30ç§’
2. æ£€æŸ¥å¹¶å‘æ•°: æ˜¯å¦è¶…è¿‡3ä¸ªå·¥å…·
3. æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ

---

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

| æŒ‡æ ‡ | æ­£å¸¸èŒƒå›´ | å‘Šè­¦é˜ˆå€¼ |
|------|---------|---------|
| å“åº”æ—¶é—´ | <5s | >30s |
| é”™è¯¯ç‡ | <5% | >10% |
| å·¥å…·è°ƒç”¨æˆåŠŸç‡ | >95% | <90% |
| å†…å­˜ä½¿ç”¨ | <500MB | >1GB |

---

## ğŸ”§ å¿«é€Ÿä¿®å¤å‘½ä»¤

```bash
# å®‰å…¨ä¿®å¤
node scripts/å®‰å…¨ä¿®å¤è„šæœ¬.js

# é‡å¯æœåŠ¡
npm run stop && npm run start

# åŠŸèƒ½æ£€æµ‹
npm run test:smart-agent

# æŸ¥çœ‹æ—¥å¿—
tail -f server/logs/ai-assistant.log

# æ¸…ç†ç¼“å­˜
rm -rf node_modules/.cache
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å®Œæ•´åŠŸèƒ½æ–‡æ¡£](./AIåŠ©æ‰‹ç»„ä»¶å®Œæ•´åŠŸèƒ½æ–‡æ¡£.md) - è¯¦ç»†æŠ€æœ¯è§„æ ¼
- [åŠŸèƒ½æ£€æµ‹æŠ¥å‘Š](./æ™ºèƒ½ä»£ç†åŠŸèƒ½æ£€æµ‹æŠ¥å‘Š.md) - é—®é¢˜åˆ†æå’Œä¿®å¤æ–¹æ¡ˆ
- [å¿«é€Ÿä¿®å¤æŒ‡å—](./å¿«é€Ÿä¿®å¤æŒ‡å—.md) - å…·ä½“æ“ä½œæ­¥éª¤
- [ç³»ç»Ÿåˆ†ææ€»ç»“](./æ™ºèƒ½ä»£ç†ç³»ç»Ÿå®Œæ•´åˆ†ææ€»ç»“.md) - å…¨é¢åˆ†ææŠ¥å‘Š

---

## ğŸ¯ æ ¸å¿ƒæ–‡ä»¶å¿«é€Ÿå®šä½

### å‰ç«¯å…³é”®æ–‡ä»¶
```
client/src/components/ai-assistant/
â”œâ”€â”€ AIAssistant.vue           # ä¸»ç»„ä»¶ (5301è¡Œ)
â”œâ”€â”€ InputArea.vue            # è¾“å…¥æ§åˆ¶
â”œâ”€â”€ ConversationDrawer.vue   # ä¼šè¯ç®¡ç†
â””â”€â”€ ComponentRenderer.vue    # ç»„ä»¶æ¸²æŸ“

client/src/api/endpoints/
â””â”€â”€ function-tools.ts        # APIè°ƒç”¨
```

### åç«¯å…³é”®æ–‡ä»¶
```
server/src/services/ai-operator/
â”œâ”€â”€ unified-intelligence.service.ts  # ç»Ÿä¸€æ™ºèƒ½æœåŠ¡
â”œâ”€â”€ function-tools.service.ts       # å·¥å…·æœåŠ¡
â””â”€â”€ smart-workflow.service.ts       # å·¥ä½œæµæœåŠ¡

server/src/routes/ai/
â”œâ”€â”€ unified-intelligence.routes.ts  # è·¯ç”±é…ç½®
â””â”€â”€ message.routes.ts              # æ¶ˆæ¯è·¯ç”±
```

---

## âš¡ ä¸€è¡Œå‘½ä»¤è§£å†³æ–¹æ¡ˆ

```bash
# å®Œæ•´æ£€æµ‹å’Œä¿®å¤
node scripts/å®‰å…¨ä¿®å¤è„šæœ¬.js && npm run start && npm run test:smart-agent

# å¿«é€Ÿé‡å¯
npm run stop && npm run start

# å®Œæ•´æµ‹è¯•
npm run test:smart-agent:verbose > reports/test-$(date +%Y%m%d-%H%M%S).log
```
