# 集团管理系统 FAQ

## 📋 常见问题解答

---

## 一、功能相关

### Q1: 什么时候需要升级为集团?

**A:** 当您满足以下任一条件时，建议升级为集团:
- ✅ 拥有2个及以上幼儿园
- ✅ 计划开设新的园所
- ✅ 需要统一管理多个园所的数据
- ✅ 需要跨园所的数据对比和分析

---

### Q2: 升级为集团后，原有的单园所数据会受影响吗?

**A:** 不会。升级为集团是**完全无损**的:
- ✅ 所有园所的历史数据完整保留
- ✅ 现有的业务流程不受影响
- ✅ 用户权限保持不变
- ✅ 只是增加了集团层级的管理功能

---

### Q3: 集团和园所的关系是什么?

**A:** 
```
集团 (Group)
  ├── 园所1 (Kindergarten)
  ├── 园所2 (Kindergarten)
  └── 园所3 (Kindergarten)
```

- 一个集团可以包含多个园所
- 一个园所只能属于一个集团
- 园所可以独立运营，也可以退出集团

---

### Q4: 集团总部和普通园所有什么区别?

**A:** 

| 特性 | 集团总部 | 普通园所 |
|------|----------|----------|
| 数量 | 每个集团只有1个 | 可以有多个 |
| 标识 | `is_group_headquarters = 1` | `is_group_headquarters = 0` |
| 权限 | 通常拥有更高权限 | 标准权限 |
| 退出集团 | 不能直接退出 | 可以退出 |

**注意**: 如果要让总部退出集团，需要先设置其他园所为总部。

---

### Q5: 如何选择集团总部?

**A:** 建议选择以下园所作为总部:
- ✅ 规模最大的园所
- ✅ 成立时间最早的园所
- ✅ 管理最规范的园所
- ✅ 地理位置最中心的园所

---

## 二、权限相关

### Q6: 集团有哪些角色?

**A:** 集团支持以下角色:

| 角色 | 代码 | 权限说明 |
|------|------|----------|
| 投资人 | 1 | 最高权限，可以管理集团的所有内容 |
| 集团管理员 | 2 | 可以管理园所、查看数据，但不能删除集团 |
| 财务总监 | 3 | 可以查看和管理财务数据 |
| 运营总监 | 4 | 可以查看运营数据和报表 |
| 人力总监 | 5 | 可以管理人员和组织架构 |

---

### Q7: 投资人和集团管理员有什么区别?

**A:** 

| 功能 | 投资人 | 集团管理员 |
|------|--------|------------|
| 查看集团数据 | ✅ | ✅ |
| 管理园所 | ✅ | ✅ |
| 添加/移除用户 | ✅ | ✅ |
| 修改集团信息 | ✅ | ✅ |
| 删除集团 | ✅ | ❌ |
| 转让集团 | ✅ | ❌ |

---

### Q8: 如何给其他人分配集团权限?

**A:** 步骤如下:
1. 进入 **集团管理中心** → **集团设置** → **权限管理**
2. 点击 **添加用户**
3. 选择用户并分配角色
4. 配置具体权限 (可查看所有园所、可管理园所等)
5. 保存

---

### Q9: 园所管理员和集团管理员有什么区别?

**A:** 

| 特性 | 园所管理员 | 集团管理员 |
|------|------------|------------|
| 管理范围 | 单个园所 | 所有园所 |
| 数据查看 | 本园所数据 | 集团所有数据 |
| 权限来源 | 园所级权限 | 集团级权限 |
| 跨园所操作 | ❌ | ✅ |

---

## 三、数据相关

### Q10: 集团统计数据是实时的吗?

**A:** 是的，集团统计数据是**实时计算**的:
- ✅ 园所数量: 实时统计
- ✅ 学生总数: 实时汇总
- ✅ 教师总数: 实时汇总
- ✅ 班级总数: 实时汇总

**性能优化**: 为了提升查询速度，部分统计数据会在 `groups` 表中冗余存储，并通过数据库触发器自动更新。

---

### Q11: 如何查看单个园所的详细数据?

**A:** 有两种方式:
1. **集团视角**: 集团管理中心 → 园所管理 → 点击园所卡片
2. **园所视角**: 切换到该园所，使用原有的园所管理功能

---

### Q12: 集团数据和园所数据有什么关系?

**A:** 

```
集团数据 = 所有园所数据的汇总
```

例如:
- 集团总学生数 = 园所1学生数 + 园所2学生数 + ...
- 集团总收入 = 园所1收入 + 园所2收入 + ...

**注意**: 集团数据不包括已退出集团的园所数据。

---

### Q13: 园所退出集团后，数据会丢失吗?

**A:** 不会。园所退出集团后:
- ✅ 园所的所有历史数据完整保留
- ✅ 园所可以继续独立运营
- ✅ 只是不再计入集团统计数据
- ✅ 可以随时重新加入集团

---

## 四、操作相关

### Q14: 如何升级为集团?

**A:** 步骤如下:

1. **检测资格**: 系统会自动检测您是否有2个及以上园所
2. **填写信息**: 填写集团名称、品牌信息等
3. **选择园所**: 选择要加入集团的园所
4. **设置总部**: 选择一个园所作为集团总部
5. **完成升级**: 系统自动创建集团并关联园所

**时间**: 整个过程约需 **2-3分钟**

---

### Q15: 升级为集团后可以撤销吗?

**A:** 可以，但需要谨慎:
- ✅ 可以删除集团 (软删除)
- ✅ 删除后所有园所恢复为独立状态
- ⚠️ 集团级的配置和权限会丢失
- ⚠️ 建议在删除前导出重要数据

---

### Q16: 如何添加新园所到集团?

**A:** 有两种方式:

**方式1: 创建新园所时直接加入**
1. 创建新园所
2. 在创建表单中选择所属集团
3. 保存

**方式2: 将现有园所加入集团**
1. 进入集团管理中心 → 园所管理
2. 点击 **添加园所**
3. 选择要加入的园所
4. 确认

---

### Q17: 如何将园所从集团中移除?

**A:** 步骤如下:
1. 进入集团管理中心 → 园所管理
2. 找到要移除的园所
3. 点击 **移除** 按钮
4. 确认操作

**注意**: 
- ⚠️ 集团总部不能直接移除，需要先设置其他园所为总部
- ⚠️ 移除后该园所不再计入集团统计

---

### Q18: 如何切换集团总部?

**A:** 步骤如下:
1. 进入集团管理中心 → 集团设置
2. 找到 **集团总部** 设置
3. 选择新的总部园所
4. 保存

**注意**: 每个集团只能有一个总部。

---

## 五、技术相关

### Q19: 集团功能对系统性能有影响吗?

**A:** 影响很小:
- ✅ 使用了数据库索引优化查询
- ✅ 统计数据使用冗余字段缓存
- ✅ 大数据量查询使用分页
- ✅ 前端使用虚拟滚动优化渲染

**性能测试结果**:
- 100个园所: 查询时间 < 100ms
- 1000个园所: 查询时间 < 500ms

---

### Q20: 集团数据是如何保证一致性的?

**A:** 使用了多种机制:
- ✅ **数据库事务**: 所有关键操作都在事务中执行
- ✅ **外键约束**: 保证数据引用完整性
- ✅ **触发器**: 自动更新统计数据
- ✅ **乐观锁**: 防止并发更新冲突

---

### Q21: 集团功能支持多租户吗?

**A:** 是的，完全支持:
- ✅ 每个集团的数据完全隔离
- ✅ 不同集团的用户互不干扰
- ✅ 支持一个用户属于多个集团
- ✅ 权限控制精确到集团级别

---

### Q22: 如何备份集团数据?

**A:** 建议使用以下方式:

**方式1: 数据库备份**
```bash
mysqldump -u root -p kindergarten_db > backup.sql
```

**方式2: 导出功能**
1. 进入集团管理中心 → 数据分析
2. 点击 **导出数据**
3. 选择导出格式 (Excel/CSV)
4. 下载

---

## 六、故障排查

### Q23: 升级为集团时提示"园所已属于其他集团"怎么办?

**A:** 这说明该园所已经加入了其他集团。解决方法:
1. 检查该园所当前所属的集团
2. 如果需要转移，先从原集团中移除
3. 然后再加入新集团

---

### Q24: 集团统计数据不准确怎么办?

**A:** 可以尝试以下方法:

**方法1: 刷新统计数据**
1. 进入集团管理中心
2. 点击 **刷新数据** 按钮

**方法2: 手动重新计算**
```sql
CALL sp_update_group_statistics(集团ID);
```

**方法3: 联系技术支持**
如果问题仍然存在，请联系技术支持团队。

---

### Q25: 无法访问集团管理中心怎么办?

**A:** 请检查以下几点:
1. ✅ 是否已登录
2. ✅ 是否有集团权限 (至少属于一个集团)
3. ✅ 集团状态是否正常 (未被禁用)
4. ✅ 浏览器是否支持 (建议使用Chrome/Edge)

如果都正常，请清除浏览器缓存后重试。

---

## 七、最佳实践

### Q26: 集团管理的最佳实践是什么?

**A:** 建议遵循以下原则:

**1. 组织架构**
- ✅ 明确集团总部
- ✅ 合理分配园所角色 (旗舰园、标准园等)
- ✅ 建立清晰的汇报关系

**2. 权限管理**
- ✅ 遵循最小权限原则
- ✅ 定期审查用户权限
- ✅ 及时移除离职人员权限

**3. 数据管理**
- ✅ 定期备份数据
- ✅ 定期检查数据一致性
- ✅ 建立数据质量标准

**4. 运营管理**
- ✅ 定期查看集团报表
- ✅ 进行跨园所对比分析
- ✅ 及时发现和解决问题

---

### Q27: 如何高效管理多个园所?

**A:** 推荐以下方法:

**1. 使用集团仪表板**
- 一目了然查看所有园所的关键指标
- 快速发现异常数据

**2. 设置数据预警**
- 设置招生率、出勤率等关键指标的预警线
- 自动提醒异常情况

**3. 定期对比分析**
- 每月进行园所对比分析
- 学习优秀园所的经验
- 帮助落后园所改进

**4. 标准化管理**
- 制定统一的管理标准
- 推广最佳实践
- 提升整体运营水平

---

## 八、联系支持

### Q28: 遇到问题如何获取帮助?

**A:** 可以通过以下方式:

**1. 在线文档**
- 查看完整的开发文档
- 查看API文档
- 查看组件文档

**2. 技术支持**
- 邮箱: support@yyup.cc
- 电话: 400-xxx-xxxx
- 工作时间: 周一至周五 9:00-18:00

**3. 社区论坛**
- 访问官方论坛
- 查看其他用户的问题和解答
- 分享您的经验

---

**文档版本**: 1.0.0  
**最后更新**: 2025-01-10  
**维护者**: 开发团队

