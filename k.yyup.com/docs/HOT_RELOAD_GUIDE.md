# çƒ­é‡è½½å¼€å‘æŒ‡å—

## ğŸ”¥ çƒ­é‡è½½æŠ€æœ¯æ¦‚è¿°

æœ¬é¡¹ç›®å‰åç«¯éƒ½å·²é…ç½®çƒ­é‡è½½æŠ€æœ¯ï¼Œä¿®æ”¹ä»£ç åè‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€æ‰‹åŠ¨é‡å¯æœåŠ¡ã€‚

---

## ğŸ“‹ é…ç½®çŠ¶æ€

| ç»„ä»¶ | æŠ€æœ¯ | çŠ¶æ€ | æ›´æ–°é€Ÿåº¦ |
|------|------|------|----------|
| å‰ç«¯ | Vite HMR | âœ… å·²é…ç½® | æ¯«ç§’çº§ |
| åç«¯ | Nodemon + ts-node | âœ… å·²é…ç½® | 3ç§’å»¶è¿Ÿ |

---

## ğŸš€ å¯åŠ¨æ–¹å¼

### æ–¹å¼1: ä¸€é”®å¯åŠ¨ï¼ˆçƒ­é‡è½½ï¼‰ - æ¨è â­

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm run dev
# æˆ–
npm run start:all:watch
```

**æ•ˆæœ**:
- âœ… åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯
- âœ… å‰ç«¯è‡ªåŠ¨çƒ­é‡è½½ï¼ˆVite HMRï¼‰
- âœ… åç«¯è‡ªåŠ¨çƒ­é‡è½½ï¼ˆNodemonï¼‰
- âœ… å½©è‰²æ—¥å¿—è¾“å‡ºï¼ˆè“è‰²=åç«¯ï¼Œç»¿è‰²=å‰ç«¯ï¼‰
- âœ… è¿›ç¨‹åç§°æ ‡è¯†

**æ§åˆ¶å°è¾“å‡ºç¤ºä¾‹**:
```
[backend] [nodemon] watching: src/**/*.ts
[backend] Server running on port 3000
[frontend] VITE v5.x.x ready in 500 ms
[frontend] âœ Local: http://localhost:5173/
```

---

### æ–¹å¼2: åˆ†åˆ«å¯åŠ¨

**ç»ˆç«¯1 - å‰ç«¯**:
```bash
cd client
npm run dev
```

**ç»ˆç«¯2 - åç«¯ï¼ˆçƒ­é‡è½½ï¼‰**:
```bash
cd server
npm run dev:watch
```

**ç»ˆç«¯2 - åç«¯ï¼ˆè°ƒè¯•+çƒ­é‡è½½ï¼‰**:
```bash
cd server
npm run dev:debug:watch
```

---

### æ–¹å¼3: ä¼ ç»Ÿå¯åŠ¨ï¼ˆæ— çƒ­é‡è½½ï¼‰

```bash
# æ ¹ç›®å½•
npm run start:all

# æˆ–åˆ†åˆ«å¯åŠ¨
npm run start:frontend  # å‰ç«¯æœ‰çƒ­é‡è½½
npm run start:backend   # åç«¯æ— çƒ­é‡è½½
```

---

## âš™ï¸ å‰ç«¯çƒ­é‡è½½é…ç½®

### æŠ€æœ¯: Vite HMR

**é…ç½®æ–‡ä»¶**: `client/vite.config.ts`

```typescript
server: {
  port: 5173,
  host: '0.0.0.0',
  hmr: {
    port: 24678,  // HMR WebSocketç«¯å£
  },
  // é¢„çƒ­å¸¸ç”¨æ–‡ä»¶ï¼Œæå‡é¦–æ¬¡åŠ è½½é€Ÿåº¦
  warmup: {
    clientFiles: [
      './src/main.ts',
      './src/App.vue',
      './src/router/index.ts'
    ]
  }
}
```

### ç‰¹æ€§

- âœ… **æ¯«ç§’çº§æ›´æ–°**: ä¿®æ”¹ä»£ç åç«‹å³çœ‹åˆ°æ•ˆæœ
- âœ… **ä¿æŒçŠ¶æ€**: ç»„ä»¶çŠ¶æ€ä¸ä¸¢å¤±
- âœ… **CSSçƒ­æ›´æ–°**: ä¿®æ”¹æ ·å¼ç«‹å³ç”Ÿæ•ˆ
- âœ… **Vueç»„ä»¶çƒ­æ›´æ–°**: ä¿®æ”¹ç»„ä»¶ç«‹å³ç”Ÿæ•ˆ
- âœ… **é¢„çƒ­ä¼˜åŒ–**: å¸¸ç”¨æ–‡ä»¶é¢„åŠ è½½

### æ”¯æŒçš„æ–‡ä»¶ç±»å‹

- `.vue` - Vueç»„ä»¶
- `.ts` / `.js` - TypeScript/JavaScript
- `.scss` / `.css` - æ ·å¼æ–‡ä»¶
- `.json` - é…ç½®æ–‡ä»¶

---

## âš™ï¸ åç«¯çƒ­é‡è½½é…ç½®

### æŠ€æœ¯: Nodemon + ts-node

**é…ç½®æ–‡ä»¶**: `server/nodemon.json`

```json
{
  "ignore": [
    "node_modules",
    "dist",
    "*.test.ts",
    "*.test.js",
    "*.log"
  ],
  "watch": ["src/**/*.ts"],
  "ext": "ts",
  "delay": "3000",
  "execMap": {
    "ts": "ts-node"
  },
  "legacyWatch": true
}
```

### ç‰¹æ€§

- âœ… **è‡ªåŠ¨é‡å¯**: æ£€æµ‹åˆ°æ–‡ä»¶å˜åŒ–åè‡ªåŠ¨é‡å¯æœåŠ¡å™¨
- âœ… **3ç§’å»¶è¿Ÿ**: é¿å…é¢‘ç¹é‡å¯ï¼Œç­‰å¾…å¤šä¸ªæ–‡ä»¶ä¿å­˜å®Œæˆ
- âœ… **æ™ºèƒ½å¿½ç•¥**: å¿½ç•¥æµ‹è¯•æ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶ã€node_modules
- âœ… **TypeScriptæ”¯æŒ**: ç›´æ¥è¿è¡Œ.tsæ–‡ä»¶ï¼Œæ— éœ€ç¼–è¯‘

### ç›‘å¬çš„æ–‡ä»¶

- `src/**/*.ts` - æ‰€æœ‰TypeScriptæºæ–‡ä»¶

### å¿½ç•¥çš„æ–‡ä»¶

- `node_modules/` - ä¾èµ–åŒ…
- `dist/` - ç¼–è¯‘è¾“å‡º
- `*.test.ts` - æµ‹è¯•æ–‡ä»¶
- `*.log` - æ—¥å¿—æ–‡ä»¶

---

## ğŸ“Š çƒ­é‡è½½å·¥ä½œæµç¨‹

### å‰ç«¯ (Vite HMR)

```
ä¿®æ”¹ .vue æ–‡ä»¶
  â†“
Vite æ£€æµ‹åˆ°å˜åŒ–
  â†“
ç¼–è¯‘å˜åŒ–çš„æ¨¡å—
  â†“
é€šè¿‡ WebSocket æ¨é€æ›´æ–°
  â†“
æµè§ˆå™¨æ¥æ”¶æ›´æ–°
  â†“
æ›¿æ¢æ¨¡å—ï¼ˆä¿æŒçŠ¶æ€ï¼‰
  â†“
é¡µé¢ç«‹å³æ›´æ–° âœ…
```

**æ—¶é—´**: < 100ms

---

### åç«¯ (Nodemon)

```
ä¿®æ”¹ .ts æ–‡ä»¶
  â†“
Nodemon æ£€æµ‹åˆ°å˜åŒ–
  â†“
ç­‰å¾… 3 ç§’ï¼ˆå»¶è¿Ÿï¼‰
  â†“
æ€æ­»æ—§è¿›ç¨‹
  â†“
å¯åŠ¨æ–°è¿›ç¨‹
  â†“
ts-node ç¼–è¯‘å¹¶è¿è¡Œ
  â†“
æœåŠ¡å™¨é‡æ–°å¯åŠ¨ âœ…
```

**æ—¶é—´**: 3-5ç§’

---

## ğŸ¯ å¼€å‘æœ€ä½³å®è·µ

### 1. ä½¿ç”¨çƒ­é‡è½½æ¨¡å¼å¼€å‘

```bash
# æ¨è
npm run dev

# ä¸æ¨èï¼ˆéœ€è¦æ‰‹åŠ¨é‡å¯ï¼‰
npm run start:all
```

### 2. ä¿®æ”¹ä»£ç åç­‰å¾…

- **å‰ç«¯**: ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€ç­‰å¾…
- **åç«¯**: ç­‰å¾…3-5ç§’ï¼Œçœ‹åˆ° "Server running" åå†æµ‹è¯•

### 3. æ‰¹é‡ä¿®æ”¹æ–‡ä»¶

å¦‚æœéœ€è¦ä¿®æ”¹å¤šä¸ªæ–‡ä»¶ï¼š
1. å¿«é€Ÿä¿å­˜æ‰€æœ‰æ–‡ä»¶
2. ç­‰å¾…Nodemoné‡å¯å®Œæˆ
3. é¿å…åœ¨é‡å¯è¿‡ç¨‹ä¸­ç»§ç»­ä¿®æ”¹

### 4. æŸ¥çœ‹æ—¥å¿—

çƒ­é‡è½½æ¨¡å¼ä¸‹çš„æ—¥å¿—è¾“å‡ºï¼š

```bash
# å‰ç«¯æ—¥å¿—ï¼ˆç»¿è‰²ï¼‰
[frontend] âœ“ built in 123ms

# åç«¯æ—¥å¿—ï¼ˆè“è‰²ï¼‰
[backend] [nodemon] restarting due to changes...
[backend] [nodemon] starting `ts-node src/app.ts`
[backend] Server running on port 3000
```

### 5. è°ƒè¯•æ¨¡å¼

å¦‚æœéœ€è¦è°ƒè¯•åç«¯ï¼š

```bash
cd server
npm run dev:debug:watch
```

ç„¶ååœ¨VSCodeä¸­é™„åŠ è°ƒè¯•å™¨ï¼ˆç«¯å£9339ï¼‰ã€‚

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1: å‰ç«¯ä¿®æ”¹åæ²¡æœ‰æ›´æ–°

**åŸå› **: HMRè¿æ¥æ–­å¼€

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨
Ctrl + Shift + R

# 2. é‡å¯å‰ç«¯æœåŠ¡
cd client
npm run dev
```

### é—®é¢˜2: åç«¯ä¿®æ”¹åæ²¡æœ‰é‡å¯

**åŸå› **: Nodemonæ²¡æœ‰æ£€æµ‹åˆ°æ–‡ä»¶å˜åŒ–

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åœ¨ç›‘å¬èŒƒå›´å†…
# åªç›‘å¬ src/**/*.ts

# 2. æ‰‹åŠ¨é‡å¯
rs + Enter

# 3. é‡å¯Nodemon
cd server
npm run dev:watch
```

### é—®é¢˜3: åç«¯é¢‘ç¹é‡å¯

**åŸå› **: æ–‡ä»¶é¢‘ç¹å˜åŒ–ï¼ˆå¦‚æ—¥å¿—æ–‡ä»¶ï¼‰

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥ nodemon.json çš„ ignore é…ç½®
# 2. ç¡®ä¿æ—¥å¿—æ–‡ä»¶è¢«å¿½ç•¥
# 3. å¢åŠ  delay æ—¶é—´
```

### é—®é¢˜4: ç«¯å£è¢«å ç”¨

**åŸå› **: æ—§è¿›ç¨‹æ²¡æœ‰æ­£ç¡®å…³é—­

**è§£å†³æ–¹æ¡ˆ**:
```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
npm run stop

# æˆ–æ‰‹åŠ¨æ€æ­»è¿›ç¨‹
# Linux/Mac
lsof -ti:3000 | xargs kill -9
lsof -ti:5173 | xargs kill -9

# Windows
netstat -ano | findstr :3000
taskkill /PID <PID> /F
```

---

## ğŸ“ é…ç½®æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| Viteé…ç½® | `client/vite.config.ts` | å‰ç«¯çƒ­é‡è½½é…ç½® |
| Nodemoné…ç½® | `server/nodemon.json` | åç«¯çƒ­é‡è½½é…ç½® |
| æ ¹ç›®å½•è„šæœ¬ | `package.json` | å¯åŠ¨è„šæœ¬ |
| å‰ç«¯è„šæœ¬ | `client/package.json` | å‰ç«¯å¯åŠ¨è„šæœ¬ |
| åç«¯è„šæœ¬ | `server/package.json` | åç«¯å¯åŠ¨è„šæœ¬ |

---

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹åç«¯å»¶è¿Ÿæ—¶é—´

ç¼–è¾‘ `server/nodemon.json`:

```json
{
  "delay": "5000"  // æ”¹ä¸º5ç§’
}
```

### ä¿®æ”¹HMRç«¯å£

ç¼–è¾‘ `client/vite.config.ts`:

```typescript
server: {
  hmr: {
    port: 24679  // æ”¹ä¸ºå…¶ä»–ç«¯å£
  }
}
```

### æ·»åŠ ç›‘å¬æ–‡ä»¶

ç¼–è¾‘ `server/nodemon.json`:

```json
{
  "watch": [
    "src/**/*.ts",
    "config/**/*.json"  // æ·»åŠ é…ç½®æ–‡ä»¶ç›‘å¬
  ]
}
```

---

## âœ… éªŒè¯çƒ­é‡è½½æ˜¯å¦å·¥ä½œ

### å‰ç«¯éªŒè¯

1. å¯åŠ¨å‰ç«¯: `npm run dev`
2. æ‰“å¼€æµè§ˆå™¨: http://localhost:5173
3. ä¿®æ”¹ä»»æ„ `.vue` æ–‡ä»¶
4. ä¿å­˜æ–‡ä»¶
5. **é¢„æœŸ**: æµè§ˆå™¨ç«‹å³æ›´æ–°ï¼Œæ— éœ€åˆ·æ–°

### åç«¯éªŒè¯

1. å¯åŠ¨åç«¯: `cd server && npm run dev:watch`
2. ä¿®æ”¹ `src/app.ts` æ·»åŠ ä¸€è¡Œæ—¥å¿—
3. ä¿å­˜æ–‡ä»¶
4. **é¢„æœŸ**: æ§åˆ¶å°æ˜¾ç¤º "restarting due to changes..."
5. **é¢„æœŸ**: 3-5ç§’åæ˜¾ç¤º "Server running on port 3000"

---

## ğŸ‰ æ€»ç»“

- âœ… å‰ç«¯: Vite HMRï¼Œæ¯«ç§’çº§æ›´æ–°
- âœ… åç«¯: Nodemonï¼Œ3-5ç§’é‡å¯
- âœ… ä¸€é”®å¯åŠ¨: `npm run dev`
- âœ… å½©è‰²æ—¥å¿—: è“è‰²=åç«¯ï¼Œç»¿è‰²=å‰ç«¯
- âœ… æ™ºèƒ½å»¶è¿Ÿ: é¿å…é¢‘ç¹é‡å¯
- âœ… çŠ¶æ€ä¿æŒ: å‰ç«¯ç»„ä»¶çŠ¶æ€ä¸ä¸¢å¤±

**æ¨èå¼€å‘æµç¨‹**:
```bash
# 1. å¯åŠ¨çƒ­é‡è½½æ¨¡å¼
npm run dev

# 2. ä¿®æ”¹ä»£ç 
# å‰ç«¯: ç«‹å³çœ‹åˆ°æ•ˆæœ
# åç«¯: ç­‰å¾…3-5ç§’

# 3. æµ‹è¯•åŠŸèƒ½

# 4. åœæ­¢æœåŠ¡
Ctrl + C
```

---

**æœ€åæ›´æ–°**: 2025-01-XX  
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

