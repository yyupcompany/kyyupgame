# PCç«¯å››è§’è‰²å®Œæ•´æµ‹è¯•å®æ–½æŒ‡å—

## ğŸ¯ æµ‹è¯•ç›®æ ‡

ä¸ºå¹¼å„¿å›­ç®¡ç†ç³»ç»Ÿçš„PCç«¯å››ä¸ªè§’è‰²ï¼ˆADMIN/TEACHER/PRINCIPAL/PARENTï¼‰å»ºç«‹100%è¦†ç›–ç‡çš„å®Œæ•´æµ‹è¯•ä½“ç³»ï¼Œç¡®ä¿æ‰€æœ‰åŠŸèƒ½ã€é¡µé¢ã€APIç«¯ç‚¹éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œç³»ç»Ÿå¯ä»¥æ­£å¼æŠ•å…¥ç”Ÿäº§ä½¿ç”¨ã€‚

## ğŸ“‹ æµ‹è¯•è¦†ç›–èŒƒå›´

### 1. è§’è‰²å…¨è¦†ç›–
- **ç³»ç»Ÿç®¡ç†å‘˜ (ADMIN)**: å…¨å±€æƒé™ï¼Œç³»ç»Ÿè®¾ç½®ï¼Œç”¨æˆ·ç®¡ç†ï¼Œæƒé™ç®¡ç†
- **æ•™å¸ˆ (TEACHER)**: ç­çº§ç®¡ç†ï¼Œå­¦ç”Ÿç®¡ç†ï¼Œæ•™å­¦å·¥å…·ï¼Œæ´»åŠ¨ç®¡ç†
- **å›­é•¿ (PRINCIPAL)**: æ‹›ç”Ÿç®¡ç†ï¼Œå‘˜å·¥ç®¡ç†ï¼Œè´¢åŠ¡ç®¡ç†ï¼Œå®¡æ‰¹æµç¨‹
- **å®¶é•¿ (PARENT)**: å­©å­ä¿¡æ¯ï¼Œæ´»åŠ¨æŠ¥åï¼Œå®¶æ ¡æ²Ÿé€šï¼Œæˆé•¿è®°å½•

### 2. é¡µé¢è¦†ç›–ç›®æ ‡
- **9ä¸ªä¸€çº§ç±»ç›®** â†’ **74ä¸ªäºŒçº§é¡µé¢** â†’ **2ä¸ªä¸‰çº§ç»„ä»¶**
- **100%é¡µé¢æ¸²æŸ“éªŒè¯**
- **100%æ•°æ®åŠ è½½éªŒè¯**
- **100%æƒé™æ§åˆ¶éªŒè¯**

### 3. APIè¦†ç›–ç›®æ ‡
- **155+ APIç«¯ç‚¹**å®Œæ•´æµ‹è¯•
- **100%æ•°æ®ç»“æ„éªŒè¯**
- **100%é”™è¯¯å¤„ç†éªŒè¯**
- **æ€§èƒ½åŸºå‡†æµ‹è¯•**

## ğŸ—ï¸ æµ‹è¯•æ¶æ„è®¾è®¡

```
client/tests/e2e-pc-complete/
â”œâ”€â”€ config/                    # æµ‹è¯•é…ç½®
â”‚   â”œâ”€â”€ test-users.ts         # æµ‹è¯•ç”¨æˆ·é…ç½®
â”‚   â”œâ”€â”€ api-endpoints.ts      # APIç«¯ç‚¹é…ç½®
â”‚   â”œâ”€â”€ page-routes.ts        # é¡µé¢è·¯ç”±é…ç½®
â”‚   â””â”€â”€ test-data.ts          # æµ‹è¯•æ•°æ®é…ç½®
â”œâ”€â”€ utils/                     # æµ‹è¯•å·¥å…·
â”‚   â”œâ”€â”€ auth-helpers.ts       # è®¤è¯è¾…åŠ©å‡½æ•°
â”‚   â”œâ”€â”€ api-validators.ts     # APIéªŒè¯å·¥å…·
â”‚   â”œâ”€â”€ ui-checkers.ts        # UIæ£€æŸ¥å·¥å…·
â”‚   â””â”€â”€ report-generators.ts  # æŠ¥å‘Šç”Ÿæˆå·¥å…·
â”œâ”€â”€ tests/                     # æµ‹è¯•ç”¨ä¾‹
â”‚   â”œâ”€â”€ auth/                 # è®¤è¯æµ‹è¯•
â”‚   â”‚   â””â”€â”€ login.spec.ts     # ç™»å½•åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ admin/                # ç®¡ç†å‘˜æµ‹è¯•
â”‚   â”œâ”€â”€ teacher/              # æ•™å¸ˆæµ‹è¯•
â”‚   â”œâ”€â”€ principal/            # å›­é•¿æµ‹è¯•
â”‚   â”œâ”€â”€ parent/               # å®¶é•¿æµ‹è¯•
â”‚   â””â”€â”€ common/               # é€šç”¨æµ‹è¯•
â”‚       â””â”€â”€ navigation.spec.ts # å¯¼èˆªåŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ fixtures/                  # æµ‹è¯•æ•°æ®
â”œâ”€â”€ reports/                   # æµ‹è¯•æŠ¥å‘Šè¾“å‡º
â”œâ”€â”€ playwright.config.ts      # Playwrighté…ç½®
â”œâ”€â”€ global-setup.ts           # å…¨å±€è®¾ç½®
â””â”€â”€ global-teardown.ts        # å…¨å±€æ¸…ç†
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶
1. **ç³»ç»Ÿç¯å¢ƒ**: Node.js >= 18.0.0
2. **æœåŠ¡çŠ¶æ€**: å‰ç«¯(5173)å’Œåç«¯(3000)æœåŠ¡æ­£å¸¸è¿è¡Œ
3. **æ•°æ®åº“**: MySQLæœåŠ¡æ­£å¸¸ä¸”å·²åˆå§‹åŒ–æµ‹è¯•æ•°æ®

### å®‰è£…ä¾èµ–
```bash
# ç¡®ä¿Playwrightå·²å®‰è£…
npx playwright install

# éªŒè¯å®‰è£…
npx playwright --version
```

### æ¸…ç†æ—§æµ‹è¯•ç”¨ä¾‹
```bash
# é¢„è§ˆæ¨¡å¼ï¼ˆå®‰å…¨ï¼‰
node scripts/cleanup-pc-tests.js

# å¼ºåˆ¶æ‰§è¡Œæ¸…ç†
node scripts/cleanup-pc-tests.js --force
```

### æ‰§è¡Œå®Œæ•´æµ‹è¯•
```bash
# æ‰§è¡Œæ‰€æœ‰PCç«¯æµ‹è¯•
npm run test:e2e-pc-complete

# æ‰§è¡Œç‰¹å®šè§’è‰²æµ‹è¯•
npm run test:e2e-pc-complete:admin      # ç®¡ç†å‘˜æµ‹è¯•
npm run test:e2e-pc-complete:teacher    # æ•™å¸ˆæµ‹è¯•
npm run test:e2e-pc-complete:principal  # å›­é•¿æµ‹è¯•
npm run test:e2e-pc-complete:parent     # å®¶é•¿æµ‹è¯•

# æ‰§è¡Œç‰¹å®šåŠŸèƒ½æµ‹è¯•
npm run test:e2e-pc-complete:auth        # è®¤è¯åŠŸèƒ½
npm run test:e2e-pc-complete:navigation  # å¯¼èˆªåŠŸèƒ½
```

### è°ƒè¯•å’Œå¼€å‘
```bash
# UIæ¨¡å¼è°ƒè¯•
npm run test:e2e-pc-complete:ui

# è°ƒè¯•æ¨¡å¼
npm run test:e2e-pc-complete:debug

# æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
npm run test:e2e-pc-complete:report
```

## ğŸ“Š æµ‹è¯•æ‰§è¡Œæ ‡å‡†

### è´¨é‡é—¨æ§
- âœ… **é¡µé¢è¦†ç›–ç‡**: 100% (æ‰€æœ‰74ä¸ªé¡µé¢)
- âœ… **APIè¦†ç›–ç‡**: 100% (æ‰€æœ‰155ä¸ªç«¯ç‚¹)
- âœ… **åŠŸèƒ½è¦†ç›–ç‡**: 100% (æ‰€æœ‰CRUDæ“ä½œ)
- âœ… **æƒé™è¦†ç›–ç‡**: 100% (æ‰€æœ‰è§’è‰²æƒé™)
- âœ… **é€šè¿‡ç‡**: 100% (é›¶å¤±è´¥ç”¨ä¾‹)

### æ€§èƒ½åŸºå‡†
- **é¡µé¢åŠ è½½æ—¶é—´**: < 3ç§’
- **APIå“åº”æ—¶é—´**: < 2ç§’
- **æµ‹è¯•æ‰§è¡Œæ—¶é—´**: < 30åˆ†é’Ÿ
- **å†…å­˜ä½¿ç”¨**: < 512MB

### é”™è¯¯ç‡æ ‡å‡†
- **åŠŸèƒ½é”™è¯¯ç‡**: 0%
- **UIé”™è¯¯ç‡**: 0%
- **æƒé™é”™è¯¯ç‡**: 0%
- **ç½‘ç»œé”™è¯¯ç‡**: < 1%

## ğŸ” æµ‹è¯•éªŒè¯æ¸…å•

### ç™»å½•è®¤è¯éªŒè¯
- [ ] æ‰€æœ‰è§’è‰²èƒ½å¤ŸæˆåŠŸç™»å½•
- [ ] é”™è¯¯çš„ç”¨æˆ·å/å¯†ç è¢«æ­£ç¡®æ‹’ç»
- [ ] ç™»å½•åæ­£ç¡®è·³è½¬åˆ°ä»ªè¡¨æ¿
- [ ] ç”¨æˆ·ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º
- [ ] ç™»å‡ºåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] ä¼šè¯è¶…æ—¶æ­£ç¡®å¤„ç†

### æƒé™æ§åˆ¶éªŒè¯
- [ ] æ¯ä¸ªè§’è‰²åªèƒ½è®¿é—®æˆæƒé¡µé¢
- [ ] æœªæˆæƒé¡µé¢æ˜¾ç¤ºè®¿é—®æ‹’ç»
- [ ] èœå•å¯¼èˆªæ ¹æ®è§’è‰²åŠ¨æ€æ˜¾ç¤º
- [ ] APIæƒé™æ§åˆ¶æ­£ç¡®æ‰§è¡Œ
- [ ] è§’è‰²åˆ‡æ¢åŠŸèƒ½æ­£å¸¸

### é¡µé¢åŠŸèƒ½éªŒè¯
- [ ] æ‰€æœ‰é¡µé¢èƒ½å¤Ÿæ­£å¸¸æ¸²æŸ“
- [ ] æ•°æ®ä»APIæ­£ç¡®åŠ è½½å’Œæ˜¾ç¤º
- [ ] è¡¨å•éªŒè¯å’Œæ•°æ®æäº¤æ­£å¸¸
- [ ] æœç´¢ã€ç­›é€‰ã€åˆ†é¡µåŠŸèƒ½æ­£å¸¸
- [ ] CRUDæ“ä½œå®Œæ•´å¯ç”¨

### UI/UXä¸€è‡´æ€§éªŒè¯
- [ ] é¡µé¢å¸ƒå±€åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹æ­£å¸¸
- [ ] ä¸»é¢˜è‰²å½©å’Œæ ·å¼ä¿æŒä¸€è‡´
- [ ] å¯¼èˆªå’Œäº¤äº’ä½“éªŒæµç•…
- [ ] é”™è¯¯æç¤ºå’Œç”¨æˆ·åé¦ˆæ¸…æ™°
- [ ] æ— éšœç¢æ€§æ”¯æŒè‰¯å¥½

## ğŸ“ˆ ç›‘æ§å’ŒæŠ¥å‘Š

### å®æ—¶ç›‘æ§
```bash
# è¿è¡Œæµ‹è¯•æ—¶å®æ—¶æŸ¥çœ‹è¿›åº¦
npm run test:e2e-pc-complete -- --reporter=list

# ç”Ÿæˆè¯¦ç»†HTMLæŠ¥å‘Š
npm run test:e2e-pc-complete && npm run test:e2e-pc-complete:report
```

### æµ‹è¯•æŠ¥å‘Šè§£è¯»
1. **HTMLæŠ¥å‘Š**: `client/tests/e2e-pc-complete/reports/html/index.html`
2. **JSONç»“æœ**: `client/tests/e2e-pc-complete/reports/results.json`
3. **JUnitæ ¼å¼**: `client/tests/e2e-pc-complete/reports/junit.xml`
4. **æµ‹è¯•æ‘˜è¦**: `client/tests/e2e-pc-complete/reports/test-summary.json`

### æŒç»­é›†æˆé…ç½®
```yaml
# GitHub Actionsç¤ºä¾‹
name: PCç«¯å®Œæ•´æµ‹è¯•
on: [push, pull_request]
jobs:
  e2e-pc-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install
      - run: npm run start:all &
      - run: npm run test:e2e-pc-complete
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. æœåŠ¡è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
npm run status

# é‡å¯æœåŠ¡
npm run stop && npm run start:all
```

#### 2. æ•°æ®åº“è¿æ¥é—®é¢˜
```bash
# æ£€æŸ¥æ•°æ®åº“é…ç½®
cat server/.env

# é‡æ–°åˆå§‹åŒ–æ•°æ®
npm run seed-data:complete
```

#### 3. æµ‹è¯•ç”¨ä¾‹å¤±è´¥
```bash
# è¯¦ç»†é”™è¯¯ä¿¡æ¯
npm run test:e2e-pc-complete:debug

# å•ç‹¬è¿è¡Œå¤±è´¥ç”¨ä¾‹
npx playwright test tests/auth/login.spec.ts --debug
```

#### 4. æƒé™é—®é¢˜
```bash
# æ£€æŸ¥æƒé™API
curl http://localhost:3000/api/dynamic-permissions/user-permissions

# é‡æ–°ç”Ÿæˆæƒé™æ•°æ®
node scripts/fix-center-permissions.js
```

## ğŸ“‹ æœ€ä½³å®è·µ

### æµ‹è¯•ç¼–å†™è§„èŒƒ
1. **ä½¿ç”¨data-testid**: ä¸ºå…³é”®å…ƒç´ æ·»åŠ æµ‹è¯•ä¸“ç”¨å±æ€§
2. **é¿å…ç¡¬ç¼–ç ç­‰å¾…**: ä½¿ç”¨æ™ºèƒ½ç­‰å¾…ç­–ç•¥
3. **ç‹¬ç«‹æµ‹è¯•æ•°æ®**: æ¯ä¸ªæµ‹è¯•ä½¿ç”¨ç‹¬ç«‹çš„æµ‹è¯•æ•°æ®
4. **å®Œæ•´æ–­è¨€**: éªŒè¯çŠ¶æ€ã€æ•°æ®ã€UIç­‰å¤šæ–¹é¢
5. **æ¸…ç†æœºåˆ¶**: æµ‹è¯•åæ¸…ç†ä¸´æ—¶æ•°æ®

### æŒç»­æ”¹è¿›
1. **å®šæœŸæ›´æ–°**: æ ¹æ®åŠŸèƒ½å˜åŒ–æ›´æ–°æµ‹è¯•ç”¨ä¾‹
2. **æ€§èƒ½ç›‘æ§**: ç›‘æ§æµ‹è¯•æ‰§è¡Œæ—¶é—´è¶‹åŠ¿
3. **è¦†ç›–ç‡åˆ†æ**: ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡ä¿æŒ100%
4. **åé¦ˆæ”¶é›†**: æ”¶é›†ç”¨æˆ·ä½“éªŒå’Œé—®é¢˜åé¦ˆ

## ğŸ¯ å®æ–½è·¯çº¿å›¾

### é˜¶æ®µ1: åŸºç¡€å»ºè®¾ (å·²å®Œæˆ)
- [x] æµ‹è¯•æ¶æ„è®¾è®¡
- [x] æµ‹è¯•å·¥å…·å¼€å‘
- [x] æ•°æ®ç®¡ç†ç³»ç»Ÿ
- [x] è®¤è¯å’Œæƒé™éªŒè¯

### é˜¶æ®µ2: åŠŸèƒ½æµ‹è¯• (è¿›è¡Œä¸­)
- [x] ç™»å½•è®¤è¯æµ‹è¯•
- [x] å¯¼èˆªåŠŸèƒ½æµ‹è¯•
- [ ] è§’è‰²ä¸“é¡¹æµ‹è¯•
- [ ] APIé›†æˆæµ‹è¯•

### é˜¶æ®µ3: å®Œæ•´è¦†ç›–
- [ ] CRUDæ“ä½œæµ‹è¯•
- [ ] UI/UXä¸€è‡´æ€§æµ‹è¯•
- [ ] æ€§èƒ½å’Œç¨³å®šæ€§æµ‹è¯•
- [ ] è·¨æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•

### é˜¶æ®µ4: ç”Ÿäº§å°±ç»ª
- [ ] å›å½’æµ‹è¯•è‡ªåŠ¨åŒ–
- [ ] ç›‘æ§å’ŒæŠ¥è­¦ç³»ç»Ÿ
- [ ] æ–‡æ¡£å’ŒåŸ¹è®­
- [ ] æŒç»­é›†æˆæµæ°´çº¿

## ğŸ“ æ”¯æŒå’Œè”ç³»

å¦‚é‡åˆ°é—®é¢˜æˆ–éœ€è¦æ”¯æŒï¼Œè¯·ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥æµ‹è¯•æŠ¥å‘Šä¸­çš„é”™è¯¯ä¿¡æ¯
3. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æŠ€æœ¯æ”¯æŒ

---

**æœ€åæ›´æ–°**: 2025-11-24
**ç‰ˆæœ¬**: 1.0.0
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ