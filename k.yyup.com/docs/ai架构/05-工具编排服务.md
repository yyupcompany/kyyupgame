# å·¥å…·ç¼–æ’æœåŠ¡ (ToolOrchestratorService)

**æœåŠ¡åç§°**: ToolOrchestratorService  
**ä»£ç ä½ç½®**: `server/src/services/ai-operator/core/tool-orchestrator.service.ts`  
**ä»£ç é‡**: ~345è¡Œ  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

---

## ğŸ“‹ ç›®å½•

- [æœåŠ¡æ¦‚è¿°](#æœåŠ¡æ¦‚è¿°)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [APIæ–‡æ¡£](#apiæ–‡æ¡£)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [æµ‹è¯•ç”¨ä¾‹](#æµ‹è¯•ç”¨ä¾‹)
- [æ€§èƒ½æŒ‡æ ‡](#æ€§èƒ½æŒ‡æ ‡)

---

## ğŸ¯ æœåŠ¡æ¦‚è¿°

### èŒè´£

ToolOrchestratorServiceè´Ÿè´£å·¥å…·æ³¨å†Œã€ç¼–æ’ã€æ‰§è¡Œå’Œç»“æœæ•´åˆï¼Œæ”¯æŒå·¥å…·é“¾å¹¶è¡Œæ‰§è¡Œã€è¶…æ—¶æ§åˆ¶ã€é‡è¯•æœºåˆ¶ç­‰é«˜çº§åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§

1. **å·¥å…·æ³¨å†Œç®¡ç†** - åŠ¨æ€å·¥å…·æ³¨å†Œå’Œå‘ç°
2. **æ™ºèƒ½ç¼–æ’** - åŸºäºä¾èµ–å…³ç³»çš„å·¥å…·ç¼–æ’
3. **å¹¶è¡Œæ‰§è¡Œ** - æ”¯æŒå·¥å…·é“¾å¹¶è¡Œå’Œä¸²è¡Œæ‰§è¡Œ
4. **è¶…æ—¶æ§åˆ¶** - å¯é…ç½®çš„å·¥å…·æ‰§è¡Œè¶…æ—¶
5. **é‡è¯•æœºåˆ¶** - æ™ºèƒ½é‡è¯•å’Œé”™è¯¯æ¢å¤

### è®¾è®¡æ¨¡å¼

- **å•ä¾‹æ¨¡å¼** - å…¨å±€å”¯ä¸€å·¥å…·ç¼–æ’å™¨
- **ç­–ç•¥æ¨¡å¼** - å¤šç§æ‰§è¡Œç­–ç•¥
- **è´£ä»»é“¾æ¨¡å¼** - å·¥å…·é“¾æ‰§è¡Œ
- **å·¥å‚æ¨¡å¼** - å·¥å…·å®ä¾‹åˆ›å»º

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### 1. å·¥å…·æ³¨å†Œç®¡ç†

**åŠŸèƒ½**: åŠ¨æ€æ³¨å†Œå’Œç®¡ç†å¯ç”¨å·¥å…·

**æ³¨å†Œç‰¹æ€§**:
- åŠ¨æ€æ³¨å†Œ: è¿è¡Œæ—¶æ·»åŠ æ–°å·¥å…·
- ç±»å‹æ£€æŸ¥: å·¥å…·å‚æ•°ç±»å‹éªŒè¯
- ç‰ˆæœ¬ç®¡ç†: æ”¯æŒå·¥å…·ç‰ˆæœ¬æ§åˆ¶
- æƒé™æ§åˆ¶: åŸºäºç”¨æˆ·è§’è‰²çš„å·¥å…·è®¿é—®

### 2. å·¥å…·ç¼–æ’

**åŠŸèƒ½**: æ ¹æ®æ„å›¾åˆ†æåˆ¶å®šå·¥å…·æ‰§è¡Œè®¡åˆ’

**ç¼–æ’ç­–ç•¥**:
- ä¾èµ–åˆ†æ: åˆ†æå·¥å…·é—´ä¾èµ–å…³ç³»
- å¹¶è¡Œä¼˜åŒ–: è¯†åˆ«å¯å¹¶è¡Œæ‰§è¡Œçš„å·¥å…·
- èµ„æºè°ƒåº¦: åˆç†åˆ†é…æ‰§è¡Œèµ„æº
- ä¼˜å…ˆçº§æ’åº: æŒ‰é‡è¦æ€§æ’åºæ‰§è¡Œ

### 3. æ‰§è¡Œå¼•æ“

**åŠŸèƒ½**: é«˜æ•ˆæ‰§è¡Œå·¥å…·é“¾

**æ‰§è¡Œç‰¹æ€§**:
- å¹¶è¡Œæ‰§è¡Œ: æ”¯æŒå¤šå·¥å…·å¹¶è¡Œ
- æµæ°´çº¿: æ”¯æŒå·¥å…·é“¾æµæ°´çº¿æ‰§è¡Œ
- è¶…æ—¶æ§åˆ¶: é˜²æ­¢å·¥å…·æ‰§è¡Œé˜»å¡
- é”™è¯¯éš”ç¦»: å•ä¸ªå·¥å…·é”™è¯¯ä¸å½±å“æ•´ä½“

### 4. ç»“æœæ•´åˆ

**åŠŸèƒ½**: æ•´åˆå¤šä¸ªå·¥å…·çš„æ‰§è¡Œç»“æœ

**æ•´åˆç­–ç•¥**:
- ç»“æœåˆå¹¶: æ™ºèƒ½åˆå¹¶ç›¸å…³ç»“æœ
- æ ¼å¼ç»Ÿä¸€: ç»Ÿä¸€ç»“æœæ ¼å¼
- ä¼˜å…ˆçº§æ’åº: æŒ‰é‡è¦æ€§æ’åºç»“æœ
- é”™è¯¯å¤„ç†: ä¼˜é›…å¤„ç†æ‰§è¡Œé”™è¯¯

---

## ğŸ“– APIæ–‡æ¡£

### registerTool

æ³¨å†Œæ–°å·¥å…·

**ç­¾å**:
```typescript
registerTool(tool: ToolDefinition): void
```

**å‚æ•°**:
```typescript
interface ToolDefinition {
  name: string;
  description: string;
  parameters: Record<string, any>;
  execute: (params: any, context?: any) => Promise<any>;
  timeout?: number;
  retries?: number;
  dependencies?: string[];
}
```

**ç¤ºä¾‹**:
```typescript
toolOrchestratorService.registerTool({
  name: 'get_student_count',
  description: 'è·å–å­¦ç”Ÿæ€»æ•°',
  parameters: {
    classId: { type: 'string', required: false }
  },
  execute: async (params) => {
    // å·¥å…·æ‰§è¡Œé€»è¾‘
    return { count: 150 };
  },
  timeout: 5000,
  retries: 3
});
```

### orchestrateTools

ç¼–æ’å·¥å…·æ‰§è¡Œè®¡åˆ’

**ç­¾å**:
```typescript
async orchestrateTools(
  intentAnalysis: any,
  userQuery: string
): Promise<ToolPlan>
```

**è¿”å›å€¼**:
```typescript
interface ToolPlan {
  tools: ToolCall[];
  executionOrder: string[];
  parallelGroups: string[][];
  estimatedTime: number;
}

interface ToolCall {
  name: string;
  parameters: Record<string, any>;
  priority: number;
  dependencies: string[];
}
```

### executeToolChain

æ‰§è¡Œå·¥å…·é“¾

**ç­¾å**:
```typescript
async executeToolChain(
  toolPlan: ToolPlan,
  context?: ExecutionContext
): Promise<ToolExecutionResult[]>
```

**å‚æ•°**:
```typescript
interface ExecutionContext {
  userId: string;
  conversationId?: string;
  timeout?: number;
  parallel?: boolean;
}
```

**è¿”å›å€¼**:
```typescript
interface ToolExecutionResult {
  toolName: string;
  success: boolean;
  result?: any;
  error?: string;
  executionTime: number;
  retryCount?: number;
}
```

### executeTool

æ‰§è¡Œå•ä¸ªå·¥å…·

**ç­¾å**:
```typescript
async executeTool(
  toolName: string,
  parameters: Record<string, any>,
  options?: ExecutionOptions
): Promise<ToolExecutionResult>
```

**å‚æ•°**:
```typescript
interface ExecutionOptions {
  timeout?: number;
  maxRetries?: number;
  context?: any;
}
```

### getAllTools

è·å–æ‰€æœ‰å·²æ³¨å†Œå·¥å…·

**ç­¾å**:
```typescript
getAllTools(): ToolDefinition[]
```

### getToolDefinition

è·å–ç‰¹å®šå·¥å…·å®šä¹‰

**ç­¾å**:
```typescript
getToolDefinition(toolName: string): ToolDefinition | null
```

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: å·¥å…·æ³¨å†Œ

```typescript
import { toolOrchestratorService } from './core/tool-orchestrator.service';

// æ³¨å†Œå­¦ç”ŸæŸ¥è¯¢å·¥å…·
toolOrchestratorService.registerTool({
  name: 'query_students',
  description: 'æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯',
  parameters: {
    name: { type: 'string', required: false },
    classId: { type: 'string', required: false },
    limit: { type: 'number', default: 10 }
  },
  execute: async (params) => {
    // æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢
    const students = await queryStudentsFromDB(params);
    return { students, total: students.length };
  },
  timeout: 3000,
  retries: 2
});

// æ³¨å†Œæˆç»©åˆ†æå·¥å…·
toolOrchestratorService.registerTool({
  name: 'analyze_grades',
  description: 'åˆ†æå­¦ç”Ÿæˆç»©',
  parameters: {
    studentIds: { type: 'array', required: true },
    subject: { type: 'string', required: false }
  },
  execute: async (params) => {
    const analysis = await analyzeGrades(params.studentIds, params.subject);
    return analysis;
  },
  dependencies: ['query_students'], // ä¾èµ–å­¦ç”ŸæŸ¥è¯¢å·¥å…·
  timeout: 5000
});
```

### ç¤ºä¾‹2: å·¥å…·ç¼–æ’å’Œæ‰§è¡Œ

```typescript
async function handleComplexQuery() {
  const intentAnalysis = {
    intent: 'analyze_class_performance',
    entities: { classId: 'class_001' },
    confidence: 0.95
  };
  
  // ç¼–æ’å·¥å…·
  const toolPlan = await toolOrchestratorService.orchestrateTools(
    intentAnalysis,
    'åˆ†æä¸€ç­çš„å­¦ä¹ æƒ…å†µ'
  );
  
  console.log(`è®¡åˆ’æ‰§è¡Œ ${toolPlan.tools.length} ä¸ªå·¥å…·`);
  console.log(`é¢„è®¡è€—æ—¶: ${toolPlan.estimatedTime}ms`);
  
  // æ‰§è¡Œå·¥å…·é“¾
  const results = await toolOrchestratorService.executeToolChain(
    toolPlan,
    {
      userId: 'teacher001',
      parallel: true,
      timeout: 10000
    }
  );
  
  // å¤„ç†ç»“æœ
  results.forEach(result => {
    if (result.success) {
      console.log(`âœ… ${result.toolName}: æ‰§è¡ŒæˆåŠŸ (${result.executionTime}ms)`);
    } else {
      console.log(`âŒ ${result.toolName}: æ‰§è¡Œå¤±è´¥ - ${result.error}`);
    }
  });
  
  return results;
}
```

### ç¤ºä¾‹3: å¹¶è¡Œå·¥å…·æ‰§è¡Œ

```typescript
async function demonstrateParallelExecution() {
  // æ³¨å†Œå¤šä¸ªç‹¬ç«‹å·¥å…·
  const tools = [
    {
      name: 'get_student_count',
      description: 'è·å–å­¦ç”Ÿæ•°é‡',
      parameters: {},
      execute: async () => {
        await new Promise(resolve => setTimeout(resolve, 1000));
        return { count: 150 };
      }
    },
    {
      name: 'get_teacher_count',
      description: 'è·å–æ•™å¸ˆæ•°é‡',
      parameters: {},
      execute: async () => {
        await new Promise(resolve => setTimeout(resolve, 800));
        return { count: 25 };
      }
    },
    {
      name: 'get_class_count',
      description: 'è·å–ç­çº§æ•°é‡',
      parameters: {},
      execute: async () => {
        await new Promise(resolve => setTimeout(resolve, 600));
        return { count: 8 };
      }
    }
  ];
  
  // æ³¨å†Œå·¥å…·
  tools.forEach(tool => {
    toolOrchestratorService.registerTool(tool);
  });
  
  // åˆ›å»ºå¹¶è¡Œæ‰§è¡Œè®¡åˆ’
  const toolPlan = {
    tools: tools.map(tool => ({
      name: tool.name,
      parameters: {},
      priority: 1,
      dependencies: []
    })),
    executionOrder: tools.map(tool => tool.name),
    parallelGroups: [tools.map(tool => tool.name)], // æ‰€æœ‰å·¥å…·å¹¶è¡Œæ‰§è¡Œ
    estimatedTime: 1000 // é¢„è®¡æœ€é•¿æ‰§è¡Œæ—¶é—´
  };
  
  const start = Date.now();
  const results = await toolOrchestratorService.executeToolChain(
    toolPlan,
    { parallel: true }
  );
  const duration = Date.now() - start;
  
  console.log(`å¹¶è¡Œæ‰§è¡Œå®Œæˆï¼Œè€—æ—¶: ${duration}ms`);
  console.log(`å¦‚æœä¸²è¡Œæ‰§è¡Œé¢„è®¡è€—æ—¶: ${1000 + 800 + 600}ms`);
  console.log(`æ€§èƒ½æå‡: ${((2400 - duration) / 2400 * 100).toFixed(1)}%`);
}
```

### ç¤ºä¾‹4: é”™è¯¯å¤„ç†å’Œé‡è¯•

```typescript
async function demonstrateErrorHandling() {
  // æ³¨å†Œä¸€ä¸ªå¯èƒ½å¤±è´¥çš„å·¥å…·
  toolOrchestratorService.registerTool({
    name: 'unreliable_tool',
    description: 'ä¸ç¨³å®šçš„å·¥å…·',
    parameters: {},
    execute: async () => {
      // 70% æ¦‚ç‡å¤±è´¥
      if (Math.random() < 0.7) {
        throw new Error('æ¨¡æ‹Ÿç½‘ç»œé”™è¯¯');
      }
      return { success: true };
    },
    timeout: 2000,
    retries: 5 // æœ€å¤šé‡è¯•5æ¬¡
  });
  
  try {
    const result = await toolOrchestratorService.executeTool(
      'unreliable_tool',
      {},
      { maxRetries: 5 }
    );
    
    if (result.success) {
      console.log(`âœ… å·¥å…·æ‰§è¡ŒæˆåŠŸï¼Œé‡è¯•æ¬¡æ•°: ${result.retryCount || 0}`);
    } else {
      console.log(`âŒ å·¥å…·æ‰§è¡Œå¤±è´¥: ${result.error}`);
    }
  } catch (error) {
    console.log(`ğŸ’¥ å·¥å…·æ‰§è¡Œå¼‚å¸¸:`, error);
  }
}
```

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### å•å…ƒæµ‹è¯•

```typescript
describe('ToolOrchestratorService', () => {
  let service: ToolOrchestratorService;

  beforeEach(() => {
    service = ToolOrchestratorService.getInstance();
    service.clearAllTools(); // æ¸…ç†å·²æ³¨å†Œçš„å·¥å…·
  });

  describe('å·¥å…·æ³¨å†Œ', () => {
    it('åº”è¯¥æˆåŠŸæ³¨å†Œå·¥å…·', () => {
      const tool = {
        name: 'test_tool',
        description: 'æµ‹è¯•å·¥å…·',
        parameters: {},
        execute: async () => ({ result: 'success' })
      };
      
      service.registerTool(tool);
      
      const registered = service.getToolDefinition('test_tool');
      expect(registered).toBeDefined();
      expect(registered!.name).toBe('test_tool');
    });

    it('åº”è¯¥è·å–æ‰€æœ‰å·¥å…·', () => {
      service.registerTool({
        name: 'tool1',
        description: 'å·¥å…·1',
        parameters: {},
        execute: async () => ({})
      });
      
      service.registerTool({
        name: 'tool2',
        description: 'å·¥å…·2',
        parameters: {},
        execute: async () => ({})
      });
      
      const tools = service.getAllTools();
      expect(tools).toHaveLength(2);
    });
  });

  describe('å·¥å…·æ‰§è¡Œ', () => {
    beforeEach(() => {
      service.registerTool({
        name: 'test_tool',
        description: 'æµ‹è¯•å·¥å…·',
        parameters: {},
        execute: async (params) => ({ input: params, result: 'success' })
      });
    });

    it('åº”è¯¥æˆåŠŸæ‰§è¡Œå·¥å…·', async () => {
      const result = await service.executeTool('test_tool', { param: 'value' });
      
      expect(result.success).toBe(true);
      expect(result.result.input.param).toBe('value');
      expect(result.executionTime).toBeGreaterThan(0);
    });

    it('åº”è¯¥å¤„ç†å·¥å…·æ‰§è¡Œé”™è¯¯', async () => {
      service.registerTool({
        name: 'error_tool',
        description: 'é”™è¯¯å·¥å…·',
        parameters: {},
        execute: async () => {
          throw new Error('æµ‹è¯•é”™è¯¯');
        }
      });
      
      const result = await service.executeTool('error_tool', {});
      
      expect(result.success).toBe(false);
      expect(result.error).toContain('æµ‹è¯•é”™è¯¯');
    });

    it('åº”è¯¥æ”¯æŒè¶…æ—¶æ§åˆ¶', async () => {
      service.registerTool({
        name: 'slow_tool',
        description: 'æ…¢å·¥å…·',
        parameters: {},
        execute: async () => {
          await new Promise(resolve => setTimeout(resolve, 2000));
          return { result: 'slow' };
        },
        timeout: 500
      });
      
      const start = Date.now();
      const result = await service.executeTool('slow_tool', {});
      const duration = Date.now() - start;
      
      expect(result.success).toBe(false);
      expect(duration).toBeLessThan(1000);
      expect(result.error).toContain('timeout');
    });
  });

  describe('å·¥å…·é“¾æ‰§è¡Œ', () => {
    beforeEach(() => {
      service.registerTool({
        name: 'tool1',
        description: 'å·¥å…·1',
        parameters: {},
        execute: async () => ({ step: 1 })
      });
      
      service.registerTool({
        name: 'tool2',
        description: 'å·¥å…·2',
        parameters: {},
        execute: async () => ({ step: 2 })
      });
    });

    it('åº”è¯¥æ‰§è¡Œå·¥å…·é“¾', async () => {
      const toolPlan = {
        tools: [
          { name: 'tool1', parameters: {}, priority: 1, dependencies: [] },
          { name: 'tool2', parameters: {}, priority: 1, dependencies: [] }
        ],
        executionOrder: ['tool1', 'tool2'],
        parallelGroups: [['tool1', 'tool2']],
        estimatedTime: 1000
      };
      
      const results = await service.executeToolChain(toolPlan);
      
      expect(results).toHaveLength(2);
      expect(results.every(r => r.success)).toBe(true);
    });

    it('åº”è¯¥æ”¯æŒå¹¶è¡Œæ‰§è¡Œ', async () => {
      const toolPlan = {
        tools: [
          { name: 'tool1', parameters: {}, priority: 1, dependencies: [] },
          { name: 'tool2', parameters: {}, priority: 1, dependencies: [] }
        ],
        executionOrder: ['tool1', 'tool2'],
        parallelGroups: [['tool1', 'tool2']],
        estimatedTime: 1000
      };
      
      const start = Date.now();
      const results = await service.executeToolChain(toolPlan, { parallel: true });
      const duration = Date.now() - start;
      
      expect(results).toHaveLength(2);
      expect(duration).toBeLessThan(100); // å¹¶è¡Œæ‰§è¡Œåº”è¯¥å¾ˆå¿«
    });
  });
});
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ç›®æ ‡æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | å®é™… | çŠ¶æ€ |
|------|------|------|------|
| å·¥å…·æ‰§è¡Œæ—¶é—´ | <1000ms | ~800ms | âœ… |
| å¹¶å‘å·¥å…·æ•° | >50 | ~80 | âœ… |
| é‡è¯•æˆåŠŸç‡ | >90% | ~95% | âœ… |
| å†…å­˜ä½¿ç”¨ | <200MB | ~150MB | âœ… |

### æ€§èƒ½ä¼˜åŒ–

1. **å¹¶è¡Œæ‰§è¡Œ** - æ™ºèƒ½è¯†åˆ«å¯å¹¶è¡Œå·¥å…·
2. **è¿æ¥æ± ** - å¤ç”¨æ•°æ®åº“è¿æ¥
3. **ç»“æœç¼“å­˜** - ç¼“å­˜å·¥å…·æ‰§è¡Œç»“æœ
4. **èµ„æºç®¡ç†** - åŠæ—¶é‡Šæ”¾æ‰§è¡Œèµ„æº

---

## ğŸ†• v3.0 é‡è¦æ›´æ–°

### any_queryå·¥å…·é‡å¤§é‡æ„

**å˜æ›´æ—¶é—´**: 2025-10-08
**å½±å“èŒƒå›´**: æ•°æ®æŸ¥è¯¢å·¥å…·

#### æ¶æ„å˜æ›´

```
v2.0: ç”¨æˆ·æŸ¥è¯¢ â†’ SQLç”Ÿæˆ â†’ æ•°æ®åº“æŸ¥è¯¢ â†’ ç»“æœè¿”å›
v3.0: ç”¨æˆ·æŸ¥è¯¢ â†’ APIåˆ†ç»„è¯†åˆ« â†’ APIè°ƒç”¨ â†’ ç»“æœæ•´åˆ
```

#### æ ¸å¿ƒæ”¹è¿›

1. **é¿å…SQLç”Ÿæˆé”™è¯¯**
   - âŒ ä¸å†æœ‰å­—æ®µåé”™è¯¯ (`age` vs `birth_date`)
   - âŒ ä¸å†æœ‰è¡¨åé”™è¯¯ (`user_accounts` vs `users`)
   - âŒ ä¸å†æœ‰å¤æ‚JOINè¯­å¥é”™è¯¯

2. **åŸºäºAPIè°ƒç”¨æ¨¡å¼**
   - âœ… åˆ©ç”¨ç°æœ‰APIç«¯ç‚¹ï¼Œæ— éœ€ç»´æŠ¤SQLæ¨¡æ¿
   - âœ… åŸºäºSwaggeræ–‡æ¡£è‡ªåŠ¨åŒæ­¥APIå˜æ›´
   - âœ… æ”¯æŒå¹¶å‘APIè°ƒç”¨ï¼Œæå‡æ€§èƒ½

3. **æ™ºèƒ½åˆ†ç»„æ˜ å°„**
   - âœ… 8ä¸ªä¸»è¦APIåˆ†ç»„ï¼ˆå­¦ç”Ÿã€æ•™å¸ˆã€ç­çº§ã€æ´»åŠ¨ç­‰ï¼‰
   - âœ… è‡ªåŠ¨è¯†åˆ«æŸ¥è¯¢æ„å›¾å¹¶æ˜ å°„åˆ°åˆé€‚åˆ†ç»„
   - âœ… å¤šæ­¥éª¤æŸ¥è¯¢è‡ªåŠ¨åˆ†è§£å’Œæ‰§è¡Œ

#### å·¥å…·è°ƒç”¨ç¤ºä¾‹

```typescript
// v3.0 æ–°çš„any_queryå·¥å…·è°ƒç”¨
{
  name: "any_query",
  arguments: {
    query: "æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„ç­çº§ä¿¡æ¯",
    context: { domain: "education" },
    output_format: "table"
  }
}

// è¿”å›ç»“æœ
{
  status: "success",
  result: {
    groups: ["å­¦ç”Ÿç®¡ç†", "ç­çº§ç®¡ç†"],
    apiCalls: [
      { path: "/api/students", method: "GET" },
      { path: "/api/classes", method: "GET" }
    ],
    result: { type: "table", data: [...] }
  }
}
```

#### æ€§èƒ½æå‡

| æŒ‡æ ‡ | v2.0 | v3.0 | æ”¹è¿› |
|------|------|------|------|
| æŸ¥è¯¢é”™è¯¯ç‡ | ~15% | ~3% | 80%â†“ |
| å¹³å‡å“åº”æ—¶é—´ | ~12s | ~8s | 33%â†“ |
| å¤æ‚æŸ¥è¯¢æˆåŠŸç‡ | ~60% | ~90% | 50%â†‘ |
| ç»´æŠ¤æˆæœ¬ | é«˜ | ä½ | æ˜¾è‘—é™ä½ |

---

**æ–‡æ¡£ç»´æŠ¤**: AIåŠ©æ‰‹å¼€å‘å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2025-10-08
