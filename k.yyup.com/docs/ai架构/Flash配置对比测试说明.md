# Flash 0.1 vs Flash 0.7 + think å¯¹æ¯”æµ‹è¯•è¯´æ˜

## ğŸ“‹ æµ‹è¯•ç›®æ ‡

å¯¹æ¯”ä¸¤ç§Flashæ¨¡å‹é…ç½®çš„å·®å¼‚ï¼š
1. **Flash 0.1**ï¼ˆæ— thinkå‚æ•°ï¼‰- å¿«é€Ÿç¨³å®šæ¨¡å¼
2. **Flash 0.7 + think: true** - æ€è€ƒæ¨¡å¼

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### è‡ªåŠ¨åŒ–æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š
```bash
cd server
npx ts-node test-flash-01-vs-07-think.ts
```

### æ‰‹åŠ¨æµ‹è¯•

#### æ–¹æ³•1ï¼šä½¿ç”¨Postmanæˆ–curl

**æµ‹è¯•1: Flash 0.1ï¼ˆæ— thinkï¼‰**
```bash
curl -X POST http://localhost:3000/api/ai/unified/unified-chat \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "message": "å¸®æˆ‘æŸ¥è¯¢ä¸€ä¸‹ç³»ç»Ÿä¸­æœ‰å¤šå°‘ä¸ªå­¦ç”Ÿï¼Ÿ",
    "userId": "121",
    "conversationId": "test-flash-01",
    "context": {
      "enableTools": true
    }
  }'
```

**æµ‹è¯•2: Flash 0.7 + think**
éœ€è¦åœ¨ä»£ç ä¸­ä¸´æ—¶ä¿®æ”¹é…ç½®ï¼Œæˆ–è€…ç›´æ¥è°ƒç”¨AIBridgeServiceã€‚

#### æ–¹æ³•2ï¼šä½¿ç”¨å‰ç«¯AIåŠ©æ‰‹

1. å¯åŠ¨å‰åç«¯æœåŠ¡
2. ç™»å½•ç³»ç»Ÿ
3. æ‰“å¼€AIåŠ©æ‰‹
4. å¼€å¯æ™ºèƒ½ä»£ç†æ¨¡å¼
5. è¾“å…¥æµ‹è¯•é—®é¢˜

## ğŸ“Š é¢„æœŸç»“æœå¯¹æ¯”

### é…ç½®1: Flash 0.1ï¼ˆæ— thinkå‚æ•°ï¼‰

```typescript
{
  model: 'doubao-seed-1-6-flash-250715',
  temperature: 0.1,
  think: undefined  // æ— thinkå‚æ•°
}
```

**é¢„æœŸè¡¨ç°**ï¼š
- âš¡ **å“åº”é€Ÿåº¦**: 0.5-2ç§’
- ğŸ¯ **å·¥å…·è°ƒç”¨**: å‡†ç¡®ã€å¿«é€Ÿ
- ğŸ“ **è¿”å›å†…å®¹**: ç®€æ´ã€ç›´æ¥
- ğŸ§  **æ€è€ƒè¿‡ç¨‹**: æ— ï¼ˆç›´æ¥è¿”å›ç»“æœï¼‰
- ğŸ”„ **ä¸€è‡´æ€§**: æé«˜ï¼ˆç›¸åŒé—®é¢˜è¿”å›ç›¸ä¼¼ç»“æœï¼‰

**ç¤ºä¾‹å“åº”**ï¼š
```json
{
  "choices": [{
    "message": {
      "role": "assistant",
      "content": null,
      "tool_calls": [{
        "function": {
          "name": "query_student_count",
          "arguments": "{}"
        }
      }]
    },
    "finish_reason": "tool_calls"
  }],
  "usage": {
    "prompt_tokens": 150,
    "completion_tokens": 20,
    "total_tokens": 170
  }
}
```

---

### é…ç½®2: Flash 0.7 + think: true

```typescript
{
  model: 'doubao-seed-1-6-flash-250715',
  temperature: 0.7,
  think: true  // å¯ç”¨æ€è€ƒæ¨¡å¼
}
```

**é¢„æœŸè¡¨ç°**ï¼š
- âš¡ **å“åº”é€Ÿåº¦**: 1-3ç§’ï¼ˆå¯èƒ½æ›´æ…¢ï¼‰
- ğŸ¯ **å·¥å…·è°ƒç”¨**: å‡†ç¡®ã€æœ‰æ¨ç†è¿‡ç¨‹
- ğŸ“ **è¿”å›å†…å®¹**: å¯èƒ½åŒ…å«æ€è€ƒè¿‡ç¨‹
- ğŸ§  **æ€è€ƒè¿‡ç¨‹**: æœ‰ï¼ˆå¦‚æœAPIæ”¯æŒï¼‰
- ğŸ”„ **ä¸€è‡´æ€§**: ä¸­ç­‰ï¼ˆtemperatureè¾ƒé«˜ï¼‰

**ç¤ºä¾‹å“åº”ï¼ˆå¦‚æœAPIæ”¯æŒthinkï¼‰**ï¼š
```json
{
  "choices": [{
    "message": {
      "role": "assistant",
      "content": "æ€è€ƒï¼šç”¨æˆ·æƒ³æŸ¥è¯¢å­¦ç”Ÿæ€»æ•°ï¼Œæˆ‘åº”è¯¥è°ƒç”¨query_student_countå·¥å…·ã€‚",
      "tool_calls": [{
        "function": {
          "name": "query_student_count",
          "arguments": "{}"
        }
      }]
    },
    "finish_reason": "tool_calls"
  }],
  "usage": {
    "prompt_tokens": 150,
    "completion_tokens": 35,
    "total_tokens": 185
  }
}
```

---

## ğŸ” å…³é”®å¯¹æ¯”æŒ‡æ ‡

| æŒ‡æ ‡ | Flash 0.1 | Flash 0.7 + think | å·®å¼‚ |
|------|-----------|-------------------|------|
| **å“åº”æ—¶é—´** | 0.5-2ç§’ | 1-3ç§’ | +0.5-1ç§’ |
| **Tokenæ¶ˆè€—** | è¾ƒä½ | è¾ƒé«˜ | +10-30% |
| **æ€è€ƒè¿‡ç¨‹** | âŒ æ—  | âœ… æœ‰ï¼ˆå¦‚æœAPIæ”¯æŒï¼‰ | - |
| **å·¥å…·è°ƒç”¨å‡†ç¡®æ€§** | é«˜ | é«˜ | ç›¸ä¼¼ |
| **ä¸€è‡´æ€§** | æé«˜ | ä¸­ç­‰ | temperatureå½±å“ |
| **æˆæœ¬** | ä½ | ä¸­ç­‰ | +10-30% |

---

## ğŸ¯ æµ‹è¯•åœºæ™¯

### åœºæ™¯1ï¼šç®€å•å·¥å…·è°ƒç”¨

**æµ‹è¯•é—®é¢˜**: "å¸®æˆ‘æŸ¥è¯¢ä¸€ä¸‹ç³»ç»Ÿä¸­æœ‰å¤šå°‘ä¸ªå­¦ç”Ÿï¼Ÿ"

**é¢„æœŸ**ï¼š
- Flash 0.1: ç›´æ¥è°ƒç”¨ `query_student_count`ï¼Œæ— é¢å¤–å†…å®¹
- Flash 0.7+think: å¯èƒ½åŒ…å«æ€è€ƒè¿‡ç¨‹ï¼Œç„¶åè°ƒç”¨å·¥å…·

### åœºæ™¯2ï¼šå¤æ‚å·¥å…·è°ƒç”¨

**æµ‹è¯•é—®é¢˜**: "å¸®æˆ‘åˆ›å»ºä¸€ä¸ªäº²å­æ´»åŠ¨ï¼Œä¸»é¢˜æ˜¯'æ˜¥æ¸¸è¸é’'ï¼Œæ—¶é—´å®šåœ¨ä¸‹å‘¨å…­ï¼Œæ´»åŠ¨å†…å®¹åŒ…æ‹¬æˆ·å¤–æ¸¸æˆå’Œé‡é¤ã€‚"

**é¢„æœŸ**ï¼š
- Flash 0.1: ç›´æ¥è°ƒç”¨ `create_activity`ï¼Œå‚æ•°å‡†ç¡®
- Flash 0.7+think: å¯èƒ½å…ˆæ€è€ƒå¦‚ä½•ç»„ç»‡å‚æ•°ï¼Œç„¶åè°ƒç”¨å·¥å…·

### åœºæ™¯3ï¼šå¤šæ­¥éª¤ä»»åŠ¡

**æµ‹è¯•é—®é¢˜**: "æŸ¥è¯¢å¼ è€å¸ˆçš„ä¿¡æ¯ï¼Œç„¶åç»Ÿè®¡å¥¹ç­çº§çš„å­¦ç”Ÿäººæ•°ã€‚"

**é¢„æœŸ**ï¼š
- Flash 0.1: å¿«é€Ÿè¿ç»­è°ƒç”¨ä¸¤ä¸ªå·¥å…·
- Flash 0.7+think: å¯èƒ½å±•ç¤ºæ€è€ƒè¿‡ç¨‹ï¼Œè¯´æ˜ä¸ºä»€ä¹ˆéœ€è¦ä¸¤æ­¥

---

## ğŸ“ å®é™…æµ‹è¯•è®°å½•æ¨¡æ¿

### æµ‹è¯•1: ç®€å•å·¥å…·è°ƒç”¨

**é—®é¢˜**: "å¸®æˆ‘æŸ¥è¯¢ä¸€ä¸‹ç³»ç»Ÿä¸­æœ‰å¤šå°‘ä¸ªå­¦ç”Ÿï¼Ÿ"

| é…ç½® | å“åº”æ—¶é—´ | Tokenæ¶ˆè€— | å·¥å…·è°ƒç”¨ | æ€è€ƒè¿‡ç¨‹ | å¤‡æ³¨ |
|------|---------|----------|---------|---------|------|
| Flash 0.1 | _____ms | _____ | âœ…/âŒ | âœ…/âŒ | |
| Flash 0.7+think | _____ms | _____ | âœ…/âŒ | âœ…/âŒ | |

**å“åº”å†…å®¹å¯¹æ¯”**:
- Flash 0.1: 
  ```
  [è®°å½•å®é™…å“åº”]
  ```
- Flash 0.7+think:
  ```
  [è®°å½•å®é™…å“åº”]
  ```

---

### æµ‹è¯•2: å¤æ‚å·¥å…·è°ƒç”¨

**é—®é¢˜**: "å¸®æˆ‘åˆ›å»ºä¸€ä¸ªäº²å­æ´»åŠ¨ï¼Œä¸»é¢˜æ˜¯'æ˜¥æ¸¸è¸é’'ï¼Œæ—¶é—´å®šåœ¨ä¸‹å‘¨å…­ã€‚"

| é…ç½® | å“åº”æ—¶é—´ | Tokenæ¶ˆè€— | å·¥å…·è°ƒç”¨ | å‚æ•°å‡†ç¡®æ€§ | å¤‡æ³¨ |
|------|---------|----------|---------|-----------|------|
| Flash 0.1 | _____ms | _____ | âœ…/âŒ | âœ…/âŒ | |
| Flash 0.7+think | _____ms | _____ | âœ…/âŒ | âœ…/âŒ | |

---

## ğŸ¤” å…³é”®é—®é¢˜

### 1. thinkå‚æ•°æ˜¯å¦çœŸçš„æœ‰æ•ˆï¼Ÿ

**éªŒè¯æ–¹æ³•**ï¼š
- æ£€æŸ¥å“åº”ä¸­æ˜¯å¦åŒ…å«æ€è€ƒè¿‡ç¨‹çš„æ–‡æœ¬
- å¯¹æ¯”å“åº”æ—¶é—´ï¼ˆthinkæ¨¡å¼åº”è¯¥æ›´æ…¢ï¼‰
- æŸ¥çœ‹APIæ–‡æ¡£ç¡®è®¤æ˜¯å¦æ”¯æŒthinkå‚æ•°

### 2. temperatureçš„å½±å“

**éªŒè¯æ–¹æ³•**ï¼š
- å¤šæ¬¡è¿è¡Œç›¸åŒé—®é¢˜ï¼Œè§‚å¯Ÿç»“æœä¸€è‡´æ€§
- temperature=0.1 åº”è¯¥æ¯æ¬¡è¿”å›å‡ ä¹ç›¸åŒçš„ç»“æœ
- temperature=0.7 åº”è¯¥æœ‰ä¸€å®šå˜åŒ–

### 3. å“ªç§é…ç½®æ›´é€‚åˆå·¥å…·è°ƒç”¨ï¼Ÿ

**ç»“è®º**ï¼š
- å¦‚æœAPI **ä¸æ”¯æŒ** thinkå‚æ•°ï¼š
  - Flash 0.1 æ›´å¥½ï¼ˆæ›´å¿«ã€æ›´ç¨³å®šï¼‰
  - Flash 0.7+think åªæ˜¯temperatureä¸åŒï¼Œæ— å®é™…thinkæ•ˆæœ
  
- å¦‚æœAPI **æ”¯æŒ** thinkå‚æ•°ï¼š
  - ç®€å•å·¥å…·è°ƒç”¨ â†’ Flash 0.1ï¼ˆæ›´å¿«ï¼‰
  - å¤æ‚æ¨ç† + å·¥å…·è°ƒç”¨ â†’ Flash 0.7+thinkï¼ˆæ›´æ™ºèƒ½ï¼‰

---

## ğŸ’¡ å»ºè®®

### æ¨èä½¿ç”¨åœºæ™¯

**Flash 0.1ï¼ˆgenerateFastChatCompletionï¼‰**:
- âœ… ç®€å•å·¥å…·è°ƒç”¨
- âœ… æ•°æ®æŸ¥è¯¢
- âœ… CRUDæ“ä½œ
- âœ… éœ€è¦å¿«é€Ÿå“åº”çš„åœºæ™¯
- âœ… éœ€è¦é«˜ä¸€è‡´æ€§çš„åœºæ™¯

**Flash 0.7 + thinkï¼ˆgenerateFlashWithThinkï¼‰**:
- âœ… éœ€è¦æ¨ç†çš„å·¥å…·è°ƒç”¨
- âœ… å¤æ‚å¤šæ­¥éª¤ä»»åŠ¡
- âœ… éœ€è¦è§£é‡Šçš„åœºæ™¯
- âš ï¸ å‰æï¼šAPIæ”¯æŒthinkå‚æ•°

**Thinkingæ¨¡å‹ï¼ˆgenerateThinkingChatCompletionï¼‰**:
- âœ… æ·±åº¦åˆ†æä»»åŠ¡
- âœ… ç­–ç•¥è§„åˆ’
- âœ… åˆ›æ„ç”Ÿæˆ
- âœ… ä¸éœ€è¦æé€Ÿå“åº”çš„åœºæ™¯

---

## ğŸ”§ æµ‹è¯•ä»£ç ç¤ºä¾‹

```typescript
import { aiBridgeService } from '@/services/ai/bridge/ai-bridge.service';

// æµ‹è¯•1: Flash 0.1
const response1 = await aiBridgeService.generateFastChatCompletion({
  messages: [{ role: 'user', content: 'æŸ¥è¯¢å­¦ç”Ÿæ€»æ•°' }],
  tools: [...],
  tool_choice: 'auto'
});

// æµ‹è¯•2: Flash 0.7 + think
const response2 = await aiBridgeService.generateFlashWithThink({
  messages: [{ role: 'user', content: 'æŸ¥è¯¢å­¦ç”Ÿæ€»æ•°' }],
  tools: [...],
  tool_choice: 'auto'
});

// å¯¹æ¯”
console.log('Flash 0.1:', response1);
console.log('Flash 0.7+think:', response2);
```

---

**æœ€åæ›´æ–°**: 2025-01-12
**æµ‹è¯•çŠ¶æ€**: å¾…æ‰§è¡Œ

