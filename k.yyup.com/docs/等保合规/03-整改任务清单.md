# 等保三级整改任务清单

**系统名称**: 幼儿园管理系统  
**当前状态**: 技术70分，管理35分，综合52.5分（不符合）  
**目标**: 90分以上，通过等保三级测评  
**整改期限**: 90天

---

## 一、整改任务总览

### 1.1 任务统计
| 优先级 | 任务数 | 预估工时 | 完成状态 |
|-------|--------|---------|---------|
| P0（立即整改） | 4项 | 10天 | 🔄 进行中 |
| P1（30天完成） | 5项 | 15天 | ⏳ 待开始 |
| P2（60天优化） | 4项 | 10天 | ⏳ 待开始 |
| **合计** | **13项** | **35天** | **8%** |

### 1.2 进度总览
```
P0: ██░░░░░░░░ 20%
P1: ░░░░░░░░░░  0%
P2: ░░░░░░░░░░  0%
────────────────────
总体: ██░░░░░░░░ 8%
```

---

## 二、P0：立即整改（1-2周）

### 2.1 数据库敏感字段加密 🔄
**负责人**: [填写]  
**优先级**: P0 - 核心要求  
**预估工时**: 5天  
**状态**: 🔄 20%完成

**任务清单**:
- [x] 创建加密工具类（✅ 已完成）
- [x] 配置加密密钥（✅ 已完成）
- [x] User.phone字段加密（✅ 已完成）
- [ ] Student表加密（id_card, parent_phone, health_info）
- [ ] Teacher表加密（id_card, phone）
- [ ] Parent表加密（id_card, phone）
- [ ] 编写数据迁移脚本
- [ ] 测试验证

**验收标准**:
- ✅ 所有敏感字段使用AES-256加密
- ✅ 数据库中存储密文
- ✅ 查询自动解密
- ✅ 现有数据完成加密迁移

---

### 2.2 数据脱敏机制 ⏳
**负责人**: [填写]  
**优先级**: P0  
**预估工时**: 3天  
**状态**: ⏳ 待开始

**任务清单**:
- [x] 创建脱敏工具类（✅ 已完成）
- [ ] 前端列表页应用脱敏
- [ ] 前端详情页应用脱敏
- [ ] 导出功能应用脱敏
- [ ] 日志打印应用脱敏

**实施位置**:
```
client/src/pages/
├── student-management/  # 学生列表、详情
├── teacher-management/  # 教师列表、详情
├── parent-management/   # 家长列表、详情
└── user-management/     # 用户列表、详情
```

**验收标准**:
- ✅ 列表页敏感字段脱敏展示（138****8000）
- ✅ 详情页根据权限脱敏
- ✅ 导出文件敏感字段脱敏
- ✅ 日志记录不包含明文敏感信息

---

### 2.3 安全管理制度文档 ⏳
**负责人**: [填写]  
**优先级**: P0 - 等保测评必需  
**预估工时**: 7天  
**状态**: ⏳ 待开始

**文档清单**:
1. **《网络安全管理制度》**（2天）
   - 总则、适用范围、管理原则
   - 安全管理组织架构
   - 各岗位安全职责
   - 违规处罚规定

2. **《数据安全管理制度》**（2天）
   - 数据分类分级
   - 数据访问控制
   - 数据备份恢复
   - 数据销毁流程

3. **《应急响应预案》**（1天）
   - 安全事件分级
   - 应急响应流程
   - 联系人清单
   - 演练计划

4. **《安全事件处置流程》**（1天）
   - 事件上报机制
   - 处置流程图
   - 记录模板

5. **《数据备份恢复管理制度》**（1天）
   - 备份策略（每日/每周/每月）
   - 备份介质管理
   - 恢复演练计划

**模板位置**: `docs/等保合规/templates/`

**验收标准**:
- ✅ 5份制度文档完整
- ✅ 经法务审核
- ✅ 经管理层签字批准
- ✅ 全员培训并签署承诺书

---

### 2.4 安全人员管理体系 ⏳
**负责人**: [填写]  
**优先级**: P0  
**预估工时**: 3天  
**状态**: ⏳ 待开始

**任务清单**:
1. **建立安全管理组织**（1天）
   - [ ] 设立信息安全负责人
   - [ ] 设立系统管理员
   - [ ] 设立安全审计员
   - [ ] 明确岗位职责

2. **人员管理流程**（1天）
   - [ ] 制定人员录用审查制度
   - [ ] 制定人员离岗权限回收流程
   - [ ] 制定外部人员访问审批流程

3. **安全培训**（1天）
   - [ ] 制定年度培训计划
   - [ ] 开展首次安全意识培训
   - [ ] 培训记录和签到表
   - [ ] 培训考核和证书

**验收标准**:
- ✅ 安全组织架构图
- ✅ 岗位职责说明书
- ✅ 人员管理流程文档
- ✅ 培训记录和考核成绩

---

## 三、P1：30天内完成

### 3.1 获取云服务商等保证书 ⏳
**负责人**: [填写]  
**优先级**: P1  
**预估工时**: 5天  
**状态**: ⏳ 待开始

**任务清单**:
- [ ] 联系Sealos云平台客服
- [ ] 索取数据中心等保资质证明
- [ ] 签订云服务安全责任协议
- [ ] 归档证明文件

**所需资料**:
1. 数据中心等保三级备案证明
2. 数据中心物理安全资质
3. 云平台安全责任承诺书
4. 服务等级协议（SLA）

---

### 3.2 部署WAF和IDS ⏳
**负责人**: [填写]  
**优先级**: P1  
**预估工时**: 3天  
**状态**: ⏳ 待开始

**技术方案**:
1. **WAF（Web应用防火墙）**
   - 推荐：阿里云WAF / Cloudflare WAF
   - 功能：SQL注入、XSS、恶意爬虫防护
   - 配置：防护规则、白名单

2. **IDS（入侵检测系统）**
   - 推荐：Suricata / Snort
   - 功能：异常流量监测、攻击告警
   - 配置：规则库更新、告警通知

**验收标准**:
- ✅ WAF部署并开启防护
- ✅ IDS运行并配置告警
- ✅ 测试攻击能被拦截
- ✅ 告警通知正常

---

### 3.3 安全培训实施 ⏳
**负责人**: [填写]  
**优先级**: P1  
**预估工时**: 2天  
**状态**: ⏳ 待开始

**培训内容**:
1. **网络安全意识**（1小时）
   - 密码安全
   - 钓鱼邮件识别
   - 社会工程学防范

2. **个人信息保护法**（1小时）
   - 法律要求
   - 违法后果
   - 企业责任

3. **等保制度培训**（1小时）
   - 等保三级要求
   - 公司安全制度
   - 岗位职责

**验收标准**:
- ✅ 培训课件制作
- ✅ 全员参加培训
- ✅ 签到表和培训记录
- ✅ 考核成绩≥80分

---

### 3.4 应急响应预案演练 ⏳
**负责人**: [填写]  
**优先级**: P1  
**预估工时**: 3天  
**状态**: ⏳ 待开始

**演练场景**:
1. **数据库泄露事件**（1天）
   - 模拟：数据库凭证泄露
   - 响应：立即修改密码、排查泄露范围、通知用户

2. **DDoS攻击**（1天）
   - 模拟：网站无法访问
   - 响应：启用DDoS防护、切换备用线路

3. **数据备份恢复**（1天）
   - 模拟：数据库故障
   - 响应：从备份恢复数据、验证数据完整性

**验收标准**:
- ✅ 演练方案制定
- ✅ 演练过程记录
- ✅ 演练总结报告
- ✅ 改进措施落实

---

### 3.5 建立安全巡检机制 ⏳
**负责人**: [填写]  
**优先级**: P1  
**预估工时**: 2天  
**状态**: ⏳ 待开始

**巡检项目**:
1. **每日巡检**
   - [ ] 服务器运行状态
   - [ ] 数据库备份状态
   - [ ] 日志异常告警

2. **每周巡检**
   - [ ] 系统漏洞扫描
   - [ ] 安全日志审查
   - [ ] 账号权限检查

3. **每月巡检**
   - [ ] 安全补丁更新
   - [ ] 备份恢复测试
   - [ ] 密码到期检查

**自动化工具**:
```bash
# 创建巡检脚本
/scripts/security-check.sh
├── daily-check.sh    # 每日巡检
├── weekly-check.sh   # 每周巡检
└── monthly-check.sh  # 每月巡检
```

---

## 四、P2：60天内优化

### 4.1 数据库审计 ⏳
**负责人**: [填写]  
**优先级**: P2  
**预估工时**: 3天  
**状态**: ⏳ 待开始

**实施方案**:
- 工具：Percona Audit Plugin / MySQL Enterprise Audit
- 审计内容：
  - 所有DDL操作（CREATE/ALTER/DROP）
  - 敏感数据访问（SELECT敏感表）
  - 数据修改（INSERT/UPDATE/DELETE）
  - 权限变更（GRANT/REVOKE）

---

### 4.2 代码安全扫描 ⏳
**负责人**: [填写]  
**优先级**: P2  
**预估工时**: 2天  
**状态**: ⏳ 待开始

**工具选型**:
- **Snyk**：依赖漏洞扫描
- **SonarQube**：代码质量和安全扫描
- **ESLint Security Plugin**：前端安全扫描

**集成方式**:
```yaml
# .github/workflows/security-scan.yml
- name: Run Snyk
  run: npm run snyk:test
  
- name: Run SonarQube
  run: npm run sonar:scan
```

---

### 4.3 日志集中管理 ⏳
**负责人**: [填写]  
**优先级**: P2  
**预估工时**: 3天  
**状态**: ⏳ 待开始

**技术方案**:
- **日志采集**：Filebeat / Fluentd
- **日志存储**：Elasticsearch
- **日志可视化**：Kibana
- **日志告警**：ElastAlert

**日志类型**:
- 应用日志（Winston）
- 访问日志（Nginx）
- 数据库日志（MySQL Slow Query）
- 安全日志（登录、权限变更）

---

### 4.4 密钥管理服务 ⏳
**负责人**: [填写]  
**优先级**: P2  
**预估工时**: 2天  
**状态**: ⏳ 待开始

**方案**:
- 使用阿里云KMS（密钥管理服务）
- 加密密钥不再存储在环境变量
- 应用启动时从KMS获取密钥
- 定期自动轮换密钥

---

## 五、验收标准

### 5.1 技术措施验收
| 项目 | 验收标准 | 得分 |
|------|---------|------|
| 数据加密 | 所有敏感字段AES-256加密 | 10分 |
| 数据脱敏 | 前端展示自动脱敏 | 5分 |
| 传输加密 | HTTPS + TLS 1.2+ | 5分 |
| 访问控制 | RBAC权限系统 | 10分 |
| 安全审计 | 操作日志完整 | 10分 |
| 备份恢复 | 每日备份+恢复演练 | 10分 |
| 漏洞防护 | WAF + IDS部署 | 10分 |
| 代码安全 | 定期扫描 | 5分 |
| **技术总分** | | **65分** |

### 5.2 管理措施验收
| 项目 | 验收标准 | 得分 |
|------|---------|------|
| 管理制度 | 5份制度文档完整 | 10分 |
| 安全组织 | 组织架构+岗位职责 | 5分 |
| 人员管理 | 培训+考核记录 | 5分 |
| 应急响应 | 预案+演练记录 | 5分 |
| 安全巡检 | 巡检记录+改进 | 5分 |
| **管理总分** | | **30分** |

### 5.3 总分要求
- **合格线**：90分
- **当前得分**：52.5分
- **整改后预期**：95分

---

## 六、时间计划

### 第1周（P0-1）
- 完成Student/Teacher/Parent表加密
- 编写数据迁移脚本
- 测试验证

### 第2周（P0-2）
- 前端脱敏功能开发
- 前端列表页应用脱敏
- 前端详情页应用脱敏

### 第3周（P0-3）
- 编写网络安全管理制度
- 编写数据安全管理制度
- 法务审核

### 第4周（P0-4）
- 编写应急响应预案
- 建立安全组织架构
- 开展安全培训

### 第5-6周（P1）
- 获取云服务商证书
- 部署WAF和IDS
- 应急响应预案演练
- 建立安全巡检机制

### 第7-8周（P2）
- 数据库审计部署
- 代码安全扫描集成
- 日志集中管理
- 密钥管理服务

### 第9-10周（测评准备）
- 整改验收
- 资料准备
- 联系测评机构

### 第11-12周（等保测评）
- 现场测评
- 整改复测
- 获得等保证书

---

## 七、费用预算

| 项目 | 费用（元） | 备注 |
|------|----------|------|
| 人力成本 | 60,000 | 35人天 × 2000元/天 |
| WAF服务 | 8,000 | 阿里云WAF，1年 |
| IDS工具 | 0 | 开源Suricata |
| 云KMS服务 | 2,000 | 阿里云KMS，1年 |
| 等保咨询 | 15,000 | 咨询机构 |
| 等保测评 | 35,000 | 三级测评费用 |
| 培训费用 | 5,000 | 外部讲师 |
| **合计** | **125,000** | |

---

## 八、风险提示

### 8.1 进度风险
- ⚠️ 密钥管理不当可能导致数据无法解密
- ⚠️ 制度文档审批流程可能延期
- ⚠️ 测评机构档期紧张，需提前预约

### 8.2 技术风险
- ⚠️ 数据加密可能影响性能（60%性能损失）
- ⚠️ 数据迁移可能失败，需做好回滚准备
- ⚠️ WAF误拦截可能影响正常业务

### 8.3 合规风险
- ⚠️ 等保测评不通过，需重新整改
- ⚠️ 未按时备案可能面临处罚
- ⚠️ 数据泄露事件可能导致严重后果

---

**文档版本**: v1.0  
**最后更新**: 2025-12-29  
**下次更新**: 每周更新进度
