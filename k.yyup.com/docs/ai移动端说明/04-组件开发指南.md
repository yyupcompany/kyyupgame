# ğŸ§© å¹¼å„¿å›­ç®¡ç†ç³»ç»Ÿ - ç»„ä»¶å¼€å‘æŒ‡å—

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨å¹¼å„¿å›­ç®¡ç†ç³»ç»Ÿä¸­å¼€å‘å’Œä½¿ç”¨ç»„ä»¶ï¼ŒåŒ…æ‹¬ç»„ä»¶è®¾è®¡åŸåˆ™ã€å¼€å‘è§„èŒƒã€æœ€ä½³å®è·µå’Œç§»åŠ¨ç«¯ä¼˜åŒ–ç­‰å†…å®¹ã€‚

### ğŸ¯ ç»„ä»¶åŒ–ä¼˜åŠ¿
- **ğŸ”„ å¯å¤ç”¨æ€§** - ç»„ä»¶å¯åœ¨å¤šä¸ªé¡µé¢ä¸­å¤ç”¨
- **ğŸ› ï¸ æ˜“ç»´æŠ¤æ€§** - å•ä¸€èŒè´£ï¼Œä¾¿äºä¿®æ”¹å’Œè°ƒè¯•
- **ğŸ“± å“åº”å¼** - é€‚é…å„ç§å±å¹•å°ºå¯¸
- **ğŸ¨ ä¸€è‡´æ€§** - ç»Ÿä¸€çš„UIé£æ ¼å’Œäº¤äº’ä½“éªŒ
- **âš¡ é«˜æ€§èƒ½** - æŒ‰éœ€åŠ è½½ï¼Œä¼˜åŒ–æ¸²æŸ“æ€§èƒ½

## ğŸ—ï¸ ç»„ä»¶æ¶æ„ä½“ç³»

### ç»„ä»¶åˆ†å±‚æ¶æ„

```
ç»„ä»¶å±‚æ¬¡ç»“æ„:

â”Œâ”€ é¡µé¢ç»„ä»¶ (Page Components) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ å®Œæ•´çš„ä¸šåŠ¡é¡µé¢                              â”‚
â”‚  â€¢ è·¯ç”±å…¥å£ç‚¹                                  â”‚
â”‚  â€¢ ç»„åˆå¤šä¸ªåŠŸèƒ½ç»„ä»¶                            â”‚
â”‚  ä¾‹ï¼šAIAssistantPage.vue, Dashboard.vue       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“ ç»„åˆ
â”Œâ”€ åŠŸèƒ½ç»„ä»¶ (Feature Components) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ å®ç°ç‰¹å®šä¸šåŠ¡åŠŸèƒ½                            â”‚
â”‚  â€¢ åŒ…å«ä¸šåŠ¡é€»è¾‘                                â”‚
â”‚  â€¢ å¯åœ¨å¤šä¸ªé¡µé¢ä½¿ç”¨                            â”‚
â”‚  ä¾‹ï¼šChatContainer.vue, DataTable.vue          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“ ç»„åˆ
â”Œâ”€ ä¸šåŠ¡ç»„ä»¶ (Business Components) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ ä¸šåŠ¡é¢†åŸŸç›¸å…³                                â”‚
â”‚  â€¢ å°è£…ä¸šåŠ¡é€»è¾‘                                â”‚
â”‚  â€¢ å¤ç”¨æ€§è¾ƒå¼º                                  â”‚
â”‚  ä¾‹ï¼šStudentForm.vue, TeacherCard.vue          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“ ç»„åˆ
â”Œâ”€ é€šç”¨ç»„ä»¶ (Common Components) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ æ— ä¸šåŠ¡é€»è¾‘                                  â”‚
â”‚  â€¢ é«˜åº¦å¯å¤ç”¨                                  â”‚
â”‚  â€¢ è·¨é¡¹ç›®ä½¿ç”¨                                  â”‚
â”‚  ä¾‹ï¼šPageWrapper.vue, LoadingState.vue         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“ åŸºäº
â”Œâ”€ åŸºç¡€ç»„ä»¶ (Base Components) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ Element Plusç»„ä»¶                           â”‚
â”‚  â€¢ åŸç”ŸHTMLå…ƒç´                                 â”‚
â”‚  â€¢ ç¬¬ä¸‰æ–¹UIç»„ä»¶                                â”‚
â”‚  ä¾‹ï¼šel-button, el-table, el-form              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¡¹ç›®ç»„ä»¶ç»Ÿè®¡

æ ¹æ®ä»£ç åˆ†æï¼Œé¡¹ç›®åŒ…å« **113ä¸ªç»„ä»¶æ–‡ä»¶**ï¼š

| ç»„ä»¶ç±»å‹ | æ•°é‡ | å æ¯” | ç¤ºä¾‹ |
|---------|------|------|------|
| åŠŸèƒ½é¡µé¢ | 32ä¸ª | 28.3% | `AIAssistantPage.vue`, `Dashboard.vue` |
| ç»„ä»¶åŒ–é¡µé¢ | 67ä¸ª | 59.3% | `ChatContainer.vue`, `DataTable.vue` |
| æ¨¡æ¿é¡µé¢ | 6ä¸ª | 5.3% | `StandardTemplate.vue`, `ExamplePage.vue` |
| ç‰¹æ®Šæ–‡ä»¶ | 8ä¸ª | 7.1% | é…ç½®æ–‡ä»¶ã€å¤‡ä»½æ–‡ä»¶ç­‰ |

## ğŸ¨ ç»„ä»¶è®¾è®¡åŸåˆ™

### 1. å•ä¸€èŒè´£åŸåˆ™

```vue
<!-- âœ… å¥½çš„ä¾‹å­ï¼šä¸“æ³¨äºæ•°æ®å±•ç¤º -->
<template>
  <div class="stat-card">
    <div class="stat-card__title">{{ title }}</div>
    <div class="stat-card__value">{{ value }}</div>
    <div class="stat-card__change" :class="changeClass">
      {{ change }}
    </div>
  </div>
</template>

<script setup lang="ts">
interface Props {
  title: string
  value: string | number
  change?: string
  changeType?: 'increase' | 'decrease' | 'neutral'
}

const props = defineProps<Props>()

const changeClass = computed(() => {
  return `stat-card__change--${props.changeType || 'neutral'}`
})
</script>
```

### 2. å“åº”å¼è®¾è®¡åŸåˆ™

```scss
// ç»„ä»¶å“åº”å¼æ ·å¼
.stat-card {
  padding: 16px;
  border-radius: 8px;
  background: #fff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  
  // ç§»åŠ¨ç«¯é€‚é…
  @media (max-width: 768px) {
    padding: 12px;
    margin-bottom: 12px;
  }
  
  // å¹³æ¿é€‚é…
  @media (min-width: 769px) and (max-width: 1024px) {
    padding: 20px;
  }
  
  // æ¡Œé¢ç«¯é€‚é…
  @media (min-width: 1025px) {
    padding: 24px;
  }
  
  &__title {
    font-size: 14px;
    color: #666;
    margin-bottom: 8px;
    
    @media (max-width: 768px) {
      font-size: 12px;
    }
  }
  
  &__value {
    font-size: 24px;
    font-weight: bold;
    color: #333;
    
    @media (max-width: 768px) {
      font-size: 20px;
    }
  }
}
```

### 3. å¯é…ç½®æ€§åŸåˆ™

```vue
<!-- é«˜åº¦å¯é…ç½®çš„è¡¨æ ¼ç»„ä»¶ -->
<template>
  <div class="data-table">
    <el-table 
      :data="data" 
      :loading="loading"
      :height="height"
      :max-height="maxHeight"
      v-bind="$attrs"
      @selection-change="handleSelectionChange"
      @sort-change="handleSortChange"
    >
      <!-- é€‰æ‹©åˆ— -->
      <el-table-column 
        v-if="selectable" 
        type="selection" 
        width="55"
        :selectable="selectableFunction"
      />
      
      <!-- åºå·åˆ— -->
      <el-table-column 
        v-if="showIndex" 
        type="index" 
        label="åºå·" 
        width="70"
        :index="indexMethod"
      />
      
      <!-- åŠ¨æ€åˆ— -->
      <el-table-column
        v-for="column in columns"
        :key="column.prop"
        :prop="column.prop"
        :label="column.label"
        :width="column.width"
        :min-width="column.minWidth"
        :sortable="column.sortable"
        :formatter="column.formatter"
        :show-overflow-tooltip="column.showTooltip !== false"
      >
        <template #default="{ row, column: col, $index }" v-if="column.slot">
          <slot 
            :name="column.slot" 
            :row="row" 
            :column="col" 
            :index="$index"
            :value="row[column.prop]"
          />
        </template>
      </el-table-column>
      
      <!-- æ“ä½œåˆ— -->
      <el-table-column 
        v-if="showActions" 
        label="æ“ä½œ" 
        :width="actionWidth"
        :fixed="actionFixed"
      >
        <template #default="{ row, $index }">
          <slot name="actions" :row="row" :index="$index">
            <el-button 
              v-for="action in actions" 
              :key="action.key"
              :type="action.type"
              :size="action.size || 'small'"
              :disabled="action.disabled?.(row)"
              @click="action.handler(row, $index)"
            >
              <el-icon v-if="action.icon"><component :is="action.icon" /></el-icon>
              {{ action.label }}
            </el-button>
          </slot>
        </template>
      </el-table-column>
    </el-table>
    
    <!-- åˆ†é¡µ -->
    <div v-if="showPagination" class="data-table__pagination">
      <el-pagination
        v-model:current-page="currentPage"
        v-model:page-size="pageSize"
        :page-sizes="pageSizes"
        :total="total"
        :layout="paginationLayout"
        :small="isMobile"
        @size-change="handleSizeChange"
        @current-change="handleCurrentChange"
      />
    </div>
  </div>
</template>

<script setup lang="ts">
interface TableColumn {
  prop: string
  label: string
  width?: string | number
  minWidth?: string | number
  sortable?: boolean
  formatter?: (row: any, column: any, cellValue: any, index: number) => string
  slot?: string
  showTooltip?: boolean
}

interface TableAction {
  key: string
  label: string
  type?: 'primary' | 'success' | 'warning' | 'danger' | 'info'
  size?: 'large' | 'default' | 'small'
  icon?: Component
  handler: (row: any, index: number) => void
  disabled?: (row: any) => boolean
}

interface Props {
  // æ•°æ®ç›¸å…³
  data: any[]
  loading?: boolean
  columns: TableColumn[]
  
  // è¡¨æ ¼é…ç½®
  height?: string | number
  maxHeight?: string | number
  selectable?: boolean
  selectableFunction?: (row: any, index: number) => boolean
  showIndex?: boolean
  indexMethod?: (index: number) => number
  
  // æ“ä½œåˆ—é…ç½®
  showActions?: boolean
  actions?: TableAction[]
  actionWidth?: string | number
  actionFixed?: 'left' | 'right'
  
  // åˆ†é¡µé…ç½®
  showPagination?: boolean
  total?: number
  pageSize?: number
  pageSizes?: number[]
  paginationLayout?: string
}

const props = withDefaults(defineProps<Props>(), {
  loading: false,
  selectable: false,
  showIndex: true,
  showActions: true,
  actionWidth: 150,
  actionFixed: 'right',
  showPagination: true,
  pageSize: 20,
  pageSizes: () => [10, 20, 50, 100],
  paginationLayout: 'total, sizes, prev, pager, next, jumper'
})

// ç§»åŠ¨ç«¯æ£€æµ‹
const isMobile = computed(() => window.innerWidth <= 768)

// åˆ†é¡µç›¸å…³
const currentPage = ref(1)
const pageSize = ref(props.pageSize)

// äº‹ä»¶å¤„ç†
const emit = defineEmits<{
  'selection-change': [selection: any[]]
  'sort-change': [sortInfo: { column: any; prop: string; order: string }]
  'size-change': [size: number]
  'current-change': [page: number]
}>()

const handleSelectionChange = (selection: any[]) => {
  emit('selection-change', selection)
}

const handleSortChange = (sortInfo: any) => {
  emit('sort-change', sortInfo)
}

const handleSizeChange = (size: number) => {
  pageSize.value = size
  emit('size-change', size)
}

const handleCurrentChange = (page: number) => {
  emit('current-change', page)
}
</script>
```

## ğŸ”§ ç»„ä»¶å¼€å‘è§„èŒƒ

### 1. å‘½åè§„èŒƒ

```typescript
// ç»„ä»¶æ–‡ä»¶å‘½åï¼šPascalCase
StudentEditDialog.vue
AIAssistantPage.vue
DataStatistics.vue

// ç»„ä»¶å†…éƒ¨åç§°ï¼šPascalCase
export default defineComponent({
  name: 'StudentEditDialog'
})

// Propså‘½åï¼šcamelCase
interface Props {
  studentId: string
  isVisible: boolean
  formData: StudentForm
}

// Eventså‘½åï¼škebab-case
emit('update:visible', false)
emit('student-updated', student)
emit('form-submit', formData)

// CSSç±»åï¼škebab-case + BEM
.student-edit-dialog {}
.student-edit-dialog__header {}
.student-edit-dialog__content {}
.student-edit-dialog--loading {}
```

### 2. æ–‡ä»¶ç»“æ„è§„èŒƒ

```
components/
â”œâ”€â”€ common/                    # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ PageWrapper.vue       # é¡µé¢åŒ…è£…å™¨
â”‚   â”œâ”€â”€ LoadingState.vue      # åŠ è½½çŠ¶æ€
â”‚   â”œâ”€â”€ EmptyState.vue        # ç©ºçŠ¶æ€
â”‚   â””â”€â”€ ErrorFallback.vue     # é”™è¯¯è¾¹ç•Œ
â”œâ”€â”€ ai/                       # AIåŠŸèƒ½ç»„ä»¶
â”‚   â”œâ”€â”€ ChatContainer.vue     # èŠå¤©å®¹å™¨
â”‚   â”œâ”€â”€ MessageList.vue       # æ¶ˆæ¯åˆ—è¡¨
â”‚   â”œâ”€â”€ DataTable.vue         # æ™ºèƒ½æ•°æ®è¡¨
â”‚   â””â”€â”€ ReportChart.vue       # æŠ¥è¡¨å›¾è¡¨
â”œâ”€â”€ forms/                    # è¡¨å•ç»„ä»¶
â”‚   â”œâ”€â”€ StudentForm.vue       # å­¦ç”Ÿè¡¨å•
â”‚   â”œâ”€â”€ TeacherForm.vue       # æ•™å¸ˆè¡¨å•
â”‚   â””â”€â”€ BaseForm.vue          # åŸºç¡€è¡¨å•
â”œâ”€â”€ dialogs/                  # å¼¹çª—ç»„ä»¶
â”‚   â”œâ”€â”€ StudentEditDialog.vue # å­¦ç”Ÿç¼–è¾‘å¼¹çª—
â”‚   â”œâ”€â”€ ConfirmDialog.vue     # ç¡®è®¤å¼¹çª—
â”‚   â””â”€â”€ InfoDialog.vue        # ä¿¡æ¯å¼¹çª—
â””â”€â”€ mobile/                   # ç§»åŠ¨ç«¯ä¸“ç”¨ç»„ä»¶
    â”œâ”€â”€ MobileHeader.vue      # ç§»åŠ¨ç«¯å¤´éƒ¨
    â”œâ”€â”€ MobileTabBar.vue      # ç§»åŠ¨ç«¯æ ‡ç­¾æ 
    â””â”€â”€ MobileToast.vue       # ç§»åŠ¨ç«¯æç¤º
```

### 3. TypeScriptç±»å‹å®šä¹‰

```typescript
// types/components.ts
export interface BaseComponent {
  loading?: boolean
  disabled?: boolean
  size?: 'large' | 'default' | 'small'
}

export interface FormComponent extends BaseComponent {
  modelValue: any
  rules?: FormRules
  validateOnRuleChange?: boolean
}

export interface TableComponent extends BaseComponent {
  data: any[]
  columns: TableColumn[]
  pagination?: PaginationConfig
  selection?: SelectionConfig
}

export interface DialogComponent extends BaseComponent {
  visible: boolean
  title?: string
  width?: string | number
  destroyOnClose?: boolean
}

// å…·ä½“ç»„ä»¶ç±»å‹
export interface StudentEditDialogProps extends DialogComponent {
  studentId?: string
  formData: StudentForm
}

export interface StudentEditDialogEmits {
  'update:visible': [visible: boolean]
  'student-updated': [student: Student]
  'form-submit': [data: StudentForm]
}
```

## ğŸ“± ç§»åŠ¨ç«¯ç»„ä»¶å¼€å‘

### 1. ç§»åŠ¨ç«¯é€‚é…ç­–ç•¥

```vue
<!-- MobileAware.vue - ç§»åŠ¨ç«¯æ„ŸçŸ¥ç»„ä»¶ -->
<template>
  <div class="mobile-aware" :class="mobileClass">
    <!-- æ¡Œé¢ç«¯å†…å®¹ -->
    <div v-if="!isMobile" class="desktop-content">
      <slot name="desktop" :is-mobile="false" />
    </div>
    
    <!-- ç§»åŠ¨ç«¯å†…å®¹ -->
    <div v-else class="mobile-content">
      <slot name="mobile" :is-mobile="true" />
    </div>
    
    <!-- é€šç”¨å†…å®¹ -->
    <div class="common-content">
      <slot :is-mobile="isMobile" />
    </div>
  </div>
</template>

<script setup lang="ts">
import { useResizeObserver } from '@/composables/useResizeObserver'

const { isMobile } = useResizeObserver()

const mobileClass = computed(() => ({
  'mobile-aware--mobile': isMobile.value,
  'mobile-aware--desktop': !isMobile.value
}))
</script>

<style lang="scss" scoped>
.mobile-aware {
  &--mobile {
    .desktop-content { display: none; }
    .mobile-content { display: block; }
  }
  
  &--desktop {
    .desktop-content { display: block; }
    .mobile-content { display: none; }
  }
}
</style>
```

### 2. è§¦æ‘¸å‹å¥½ç»„ä»¶

```vue
<!-- TouchFriendlyButton.vue -->
<template>
  <button 
    :class="buttonClass"
    :disabled="disabled || loading"
    @touchstart="handleTouchStart"
    @touchend="handleTouchEnd"
    @click="handleClick"
  >
    <el-icon v-if="loading" class="is-loading">
      <Loading />
    </el-icon>
    <el-icon v-else-if="icon">
      <component :is="icon" />
    </el-icon>
    
    <span v-if="$slots.default" class="button-text">
      <slot />
    </span>
  </button>
</template>

<script setup lang="ts">
import { Loading } from '@element-plus/icons-vue'

interface Props {
  type?: 'primary' | 'success' | 'warning' | 'danger' | 'info'
  size?: 'large' | 'default' | 'small'
  icon?: Component
  loading?: boolean
  disabled?: boolean
  block?: boolean // ç§»åŠ¨ç«¯å…¨å®½
}

const props = withDefaults(defineProps<Props>(), {
  type: 'default',
  size: 'default'
})

const emit = defineEmits<{
  click: [event: MouseEvent]
}>()

// è§¦æ‘¸åé¦ˆçŠ¶æ€
const isTouching = ref(false)

const buttonClass = computed(() => [
  'touch-friendly-button',
  `touch-friendly-button--${props.type}`,
  `touch-friendly-button--${props.size}`,
  {
    'touch-friendly-button--block': props.block,
    'touch-friendly-button--loading': props.loading,
    'touch-friendly-button--touching': isTouching.value
  }
])

const handleTouchStart = () => {
  if (!props.disabled && !props.loading) {
    isTouching.value = true
  }
}

const handleTouchEnd = () => {
  isTouching.value = false
}

const handleClick = (event: MouseEvent) => {
  if (!props.disabled && !props.loading) {
    emit('click', event)
  }
}
</script>

<style lang="scss" scoped>
.touch-friendly-button {
  // åŸºç¡€æ ·å¼
  min-height: 44px; // iOSæ¨èçš„æœ€å°è§¦æ‘¸é¢ç§¯
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  
  // è§¦æ‘¸åé¦ˆ
  &--touching {
    transform: scale(0.98);
    opacity: 0.8;
  }
  
  // ç§»åŠ¨ç«¯å…¨å®½
  &--block {
    width: 100%;
    
    @media (max-width: 768px) {
      margin-bottom: 12px;
    }
  }
  
  // å°ºå¯¸å˜ä½“
  &--large {
    min-height: 48px;
    padding: 16px 24px;
    font-size: 18px;
  }
  
  &--small {
    min-height: 36px;
    padding: 8px 16px;
    font-size: 14px;
  }
  
  // ç±»å‹å˜ä½“
  &--primary {
    background-color: #1890ff;
    color: #fff;
    
    &:hover:not(:disabled) {
      background-color: #40a9ff;
    }
  }
  
  // ç¦ç”¨çŠ¶æ€
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  
  // å›¾æ ‡æ ·å¼
  .el-icon {
    margin-right: 8px;
    
    &.is-loading {
      animation: rotating 2s linear infinite;
    }
  }
  
  .button-text {
    vertical-align: middle;
  }
}

@keyframes rotating {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
</style>
```

### 3. ç§»åŠ¨ç«¯è¡¨å•ç»„ä»¶

```vue
<!-- MobileForm.vue -->
<template>
  <div class="mobile-form">
    <el-form
      ref="formRef"
      :model="formData"
      :rules="formRules"
      :label-position="isMobile ? 'top' : 'right'"
      :label-width="isMobile ? 'auto' : '120px'"
    >
      <el-form-item
        v-for="field in formFields"
        :key="field.prop"
        :prop="field.prop"
        :label="field.label"
        :required="field.required"
      >
        <!-- è¾“å…¥æ¡† -->
        <el-input
          v-if="field.type === 'input'"
          v-model="formData[field.prop]"
          :placeholder="field.placeholder"
          :maxlength="field.maxlength"
          :show-word-limit="field.showWordLimit"
          :clearable="true"
          :size="isMobile ? 'large' : 'default'"
        />
        
        <!-- ä¸‹æ‹‰é€‰æ‹© -->
        <el-select
          v-else-if="field.type === 'select'"
          v-model="formData[field.prop]"
          :placeholder="field.placeholder"
          :clearable="true"
          :size="isMobile ? 'large' : 'default'"
          style="width: 100%"
        >
          <el-option
            v-for="option in field.options"
            :key="option.value"
            :label="option.label"
            :value="option.value"
          />
        </el-select>
        
        <!-- æ—¥æœŸé€‰æ‹© -->
        <el-date-picker
          v-else-if="field.type === 'date'"
          v-model="formData[field.prop]"
          :type="field.dateType || 'date'"
          :placeholder="field.placeholder"
          :format="field.format"
          :value-format="field.valueFormat"
          :size="isMobile ? 'large' : 'default'"
          style="width: 100%"
        />
        
        <!-- æ–‡æœ¬åŸŸ -->
        <el-input
          v-else-if="field.type === 'textarea'"
          v-model="formData[field.prop]"
          type="textarea"
          :placeholder="field.placeholder"
          :rows="field.rows || 4"
          :maxlength="field.maxlength"
          :show-word-limit="field.showWordLimit"
          :resize="field.resize || 'vertical'"
        />
      </el-form-item>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <el-form-item class="mobile-form__actions">
        <el-button
          type="primary"
          :loading="loading"
          :block="isMobile"
          @click="handleSubmit"
        >
          æäº¤
        </el-button>
        <el-button
          v-if="showCancel"
          :block="isMobile"
          @click="handleCancel"
        >
          å–æ¶ˆ
        </el-button>
      </el-form-item>
    </el-form>
  </div>
</template>

<script setup lang="ts">
interface FormField {
  prop: string
  label: string
  type: 'input' | 'select' | 'date' | 'textarea'
  required?: boolean
  placeholder?: string
  maxlength?: number
  showWordLimit?: boolean
  options?: { label: string; value: any }[]
  dateType?: 'date' | 'datetime' | 'year' | 'month'
  format?: string
  valueFormat?: string
  rows?: number
  resize?: 'none' | 'both' | 'horizontal' | 'vertical'
}

interface Props {
  formFields: FormField[]
  formRules?: FormRules
  loading?: boolean
  showCancel?: boolean
}

const props = defineProps<Props>()
const emit = defineEmits<{
  submit: [data: any]
  cancel: []
}>()

// å“åº”å¼æ£€æµ‹
const isMobile = ref(window.innerWidth <= 768)
onMounted(() => {
  window.addEventListener('resize', () => {
    isMobile.value = window.innerWidth <= 768
  })
})

// è¡¨å•æ•°æ®
const formData = reactive<Record<string, any>>({})
const formRef = ref<FormInstance>()

// åˆå§‹åŒ–è¡¨å•æ•°æ®
onMounted(() => {
  props.formFields.forEach(field => {
    formData[field.prop] = ''
  })
})

// æäº¤å¤„ç†
const handleSubmit = async () => {
  if (!formRef.value) return
  
  try {
    await formRef.value.validate()
    emit('submit', { ...formData })
  } catch (error) {
    console.log('è¡¨å•éªŒè¯å¤±è´¥:', error)
  }
}

// å–æ¶ˆå¤„ç†
const handleCancel = () => {
  emit('cancel')
}

// é‡ç½®è¡¨å•
const resetForm = () => {
  formRef.value?.resetFields()
}

// æ¸…é™¤éªŒè¯
const clearValidate = () => {
  formRef.value?.clearValidate()
}

defineExpose({
  resetForm,
  clearValidate,
  formData
})
</script>

<style lang="scss" scoped>
.mobile-form {
  padding: 16px;
  
  @media (max-width: 768px) {
    padding: 12px;
    
    :deep(.el-form-item) {
      margin-bottom: 20px;
      
      .el-form-item__label {
        padding-bottom: 8px;
        font-size: 14px;
        color: #666;
      }
      
      .el-form-item__content {
        .el-input__inner,
        .el-textarea__inner {
          font-size: 16px; // é˜²æ­¢iOSç¼©æ”¾
        }
      }
    }
    
    .mobile-form__actions {
      margin-top: 24px;
      
      .el-button {
        margin-bottom: 12px;
        
        &:last-child {
          margin-bottom: 0;
        }
      }
    }
  }
}
</style>
```

## ğŸ¯ AIç»„ä»¶å¼€å‘

### 1. AIèŠå¤©ç»„ä»¶

```vue
<!-- AIChatInterface.vue -->
<template>
  <div class="ai-chat-interface">
    <!-- æ¶ˆæ¯åˆ—è¡¨ -->
    <div ref="messagesRef" class="ai-chat__messages">
      <div
        v-for="message in messages"
        :key="message.id"
        :class="getMessageClass(message)"
      >
        <div class="message__avatar">
          <el-avatar 
            :src="message.avatar" 
            :size="isMobile ? 32 : 40"
          >
            {{ message.sender.charAt(0) }}
          </el-avatar>
        </div>
        
        <div class="message__content">
          <div class="message__meta">
            <span class="message__sender">{{ message.sender }}</span>
            <span class="message__time">{{ formatTime(message.timestamp) }}</span>
          </div>
          
          <div class="message__text">
            <!-- æ–‡æœ¬æ¶ˆæ¯ -->
            <div v-if="message.type === 'text'" v-html="formatMessage(message.content)"></div>
            
            <!-- è¡¨æ ¼æ¶ˆæ¯ -->
            <DataTable 
              v-else-if="message.type === 'table'"
              :data="message.content.data"
              :columns="message.content.columns"
              :show-pagination="false"
              size="small"
            />
            
            <!-- å›¾è¡¨æ¶ˆæ¯ -->
            <ReportChart
              v-else-if="message.type === 'chart'"
              :chart-data="message.content"
              :height="isMobile ? '200px' : '300px'"
            />
            
            <!-- åŠ è½½çŠ¶æ€ -->
            <div v-else-if="message.type === 'loading'" class="message__loading">
              <el-icon class="is-loading"><Loading /></el-icon>
              <span>AIæ­£åœ¨æ€è€ƒä¸­...</span>
            </div>
          </div>
          
          <!-- æ¶ˆæ¯æ“ä½œ -->
          <div v-if="message.type !== 'loading'" class="message__actions">
            <el-button text size="small" @click="copyMessage(message)">
              <el-icon><CopyDocument /></el-icon>
            </el-button>
            <el-button text size="small" @click="regenerateMessage(message)">
              <el-icon><Refresh /></el-icon>
            </el-button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- è¾“å…¥åŒºåŸŸ -->
    <div class="ai-chat__input">
      <div class="input-container">
        <el-input
          v-model="inputMessage"
          type="textarea"
          :placeholder="isMobile ? 'è¾“å…¥æ¶ˆæ¯...' : 'è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ï¼ŒAIåŠ©æ‰‹å°†ä¸ºæ‚¨è§£ç­”'"
          :rows="isMobile ? 2 : 3"
          :maxlength="2000"
          show-word-limit
          resize="none"
          @keydown.enter.exact="handleSend"
          @keydown.enter.shift.exact.prevent="newLine"
        />
        
        <div class="input-actions">
          <!-- å¿«æ·æ“ä½œ -->
          <div class="quick-actions">
            <el-button 
              text 
              size="small" 
              @click="showQuickQuestions = true"
            >
              <el-icon><ChatDotSquare /></el-icon>
              å¸¸ç”¨é—®é¢˜
            </el-button>
            
            <el-button 
              text 
              size="small" 
              @click="clearHistory"
            >
              <el-icon><Delete /></el-icon>
              æ¸…ç©ºå†å²
            </el-button>
          </div>
          
          <!-- å‘é€æŒ‰é’® -->
          <el-button
            type="primary"
            :loading="sending"
            :disabled="!inputMessage.trim()"
            @click="handleSend"
          >
            <el-icon><Promotion /></el-icon>
            <span v-if="!isMobile">å‘é€</span>
          </el-button>
        </div>
      </div>
    </div>
    
    <!-- å¸¸ç”¨é—®é¢˜å¼¹çª— -->
    <el-dialog
      v-model="showQuickQuestions"
      title="å¸¸ç”¨é—®é¢˜"
      :width="isMobile ? '90%' : '500px'"
    >
      <div class="quick-questions">
        <el-button
          v-for="question in quickQuestions"
          :key="question"
          text
          class="quick-question-btn"
          @click="selectQuickQuestion(question)"
        >
          {{ question }}
        </el-button>
      </div>
    </el-dialog>
  </div>
</template>

<script setup lang="ts">
import { nextTick } from 'vue'
import { ElMessage } from 'element-plus'
import { 
  Loading, 
  CopyDocument, 
  Refresh, 
  ChatDotSquare, 
  Delete, 
  Promotion 
} from '@element-plus/icons-vue'
import DataTable from '@/components/common/DataTable.vue'
import ReportChart from '@/components/ai/ReportChart.vue'
import { sendAIMessage } from '@/api/ai'
import { useClipboard } from '@/composables/useClipboard'

interface ChatMessage {
  id: string
  type: 'text' | 'table' | 'chart' | 'loading'
  content: any
  sender: string
  avatar?: string
  timestamp: Date
  isUser: boolean
}

// å“åº”å¼çŠ¶æ€
const isMobile = ref(window.innerWidth <= 768)
const messages = ref<ChatMessage[]>([])
const inputMessage = ref('')
const sending = ref(false)
const showQuickQuestions = ref(false)
const messagesRef = ref<HTMLElement>()

// å¸¸ç”¨é—®é¢˜
const quickQuestions = [
  'æœ¬æœˆæ‹›ç”Ÿç»Ÿè®¡å¦‚ä½•ï¼Ÿ',
  'æŸ¥çœ‹ä»Šæ—¥è¯¾ç¨‹å®‰æ’',
  'åˆ†æå­¦ç”Ÿå‡ºå‹¤æƒ…å†µ',
  'ç”Ÿæˆè´¢åŠ¡æŠ¥è¡¨',
  'æŸ¥çœ‹æ•™å¸ˆå·¥ä½œé‡'
]

// å‰ªè´´æ¿åŠŸèƒ½
const { copy } = useClipboard()

// æ¶ˆæ¯æ ·å¼ç±»
const getMessageClass = (message: ChatMessage) => [
  'ai-chat__message',
  {
    'ai-chat__message--user': message.isUser,
    'ai-chat__message--ai': !message.isUser,
    'ai-chat__message--mobile': isMobile.value
  }
]

// æ ¼å¼åŒ–æ¶ˆæ¯
const formatMessage = (content: string) => {
  return content.replace(/\n/g, '<br>')
}

// æ ¼å¼åŒ–æ—¶é—´
const formatTime = (timestamp: Date) => {
  return new Intl.DateTimeFormat('zh-CN', {
    hour: '2-digit',
    minute: '2-digit'
  }).format(timestamp)
}

// å‘é€æ¶ˆæ¯
const handleSend = async () => {
  if (!inputMessage.value.trim() || sending.value) return
  
  const userMessage: ChatMessage = {
    id: Date.now().toString(),
    type: 'text',
    content: inputMessage.value.trim(),
    sender: 'æˆ‘',
    timestamp: new Date(),
    isUser: true
  }
  
  messages.value.push(userMessage)
  
  // æ·»åŠ åŠ è½½æ¶ˆæ¯
  const loadingMessage: ChatMessage = {
    id: Date.now() + '_loading',
    type: 'loading',
    content: '',
    sender: 'AIåŠ©æ‰‹',
    timestamp: new Date(),
    isUser: false
  }
  messages.value.push(loadingMessage)
  
  const currentMessage = inputMessage.value
  inputMessage.value = ''
  sending.value = true
  
  await scrollToBottom()
  
  try {
    const response = await sendAIMessage(currentMessage)
    
    // ç§»é™¤åŠ è½½æ¶ˆæ¯
    const loadingIndex = messages.value.findIndex(m => m.id === loadingMessage.id)
    if (loadingIndex !== -1) {
      messages.value.splice(loadingIndex, 1)
    }
    
    // æ·»åŠ AIå›å¤
    const aiMessage: ChatMessage = {
      id: response.id,
      type: response.type || 'text',
      content: response.content,
      sender: 'AIåŠ©æ‰‹',
      avatar: '/ai-avatar.png',
      timestamp: new Date(),
      isUser: false
    }
    
    messages.value.push(aiMessage)
    
  } catch (error) {
    // ç§»é™¤åŠ è½½æ¶ˆæ¯
    const loadingIndex = messages.value.findIndex(m => m.id === loadingMessage.id)
    if (loadingIndex !== -1) {
      messages.value.splice(loadingIndex, 1)
    }
    
    ElMessage.error('AIåŠ©æ‰‹æš‚æ—¶æ— æ³•å“åº”ï¼Œè¯·ç¨åé‡è¯•')
  } finally {
    sending.value = false
    await scrollToBottom()
  }
}

// æ»šåŠ¨åˆ°åº•éƒ¨
const scrollToBottom = async () => {
  await nextTick()
  if (messagesRef.value) {
    messagesRef.value.scrollTop = messagesRef.value.scrollHeight
  }
}

// å¤åˆ¶æ¶ˆæ¯
const copyMessage = async (message: ChatMessage) => {
  try {
    await copy(message.content)
    ElMessage.success('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿')
  } catch (error) {
    ElMessage.error('å¤åˆ¶å¤±è´¥')
  }
}

// é‡æ–°ç”Ÿæˆæ¶ˆæ¯
const regenerateMessage = async (message: ChatMessage) => {
  // æ‰¾åˆ°ç”¨æˆ·çš„åŸå§‹é—®é¢˜
  const messageIndex = messages.value.findIndex(m => m.id === message.id)
  if (messageIndex > 0) {
    const userMessage = messages.value[messageIndex - 1]
    if (userMessage.isUser) {
      inputMessage.value = userMessage.content
      handleSend()
    }
  }
}

// é€‰æ‹©å¸¸ç”¨é—®é¢˜
const selectQuickQuestion = (question: string) => {
  inputMessage.value = question
  showQuickQuestions.value = false
  handleSend()
}

// æ¸…ç©ºå†å²
const clearHistory = () => {
  messages.value = []
  ElMessage.success('èŠå¤©å†å²å·²æ¸…ç©º')
}

// æ¢è¡Œå¤„ç†
const newLine = () => {
  inputMessage.value += '\n'
}

// åˆå§‹åŒ–æ¬¢è¿æ¶ˆæ¯
onMounted(() => {
  const welcomeMessage: ChatMessage = {
    id: 'welcome',
    type: 'text',
    content: 'æ‚¨å¥½ï¼æˆ‘æ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥å¸®æ‚¨æŸ¥è¯¢æ•°æ®ã€ç”ŸæˆæŠ¥è¡¨ã€åˆ†æç»Ÿè®¡ä¿¡æ¯ç­‰ã€‚è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ',
    sender: 'AIåŠ©æ‰‹',
    avatar: '/ai-avatar.png',
    timestamp: new Date(),
    isUser: false
  }
  
  messages.value.push(welcomeMessage)
})
</script>

<style lang="scss" scoped>
.ai-chat-interface {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: #f5f7fa;
  
  .ai-chat__messages {
    flex: 1;
    padding: 16px;
    overflow-y: auto;
    scroll-behavior: smooth;
    
    @media (max-width: 768px) {
      padding: 12px;
    }
    
    .ai-chat__message {
      display: flex;
      margin-bottom: 16px;
      
      &--user {
        justify-content: flex-end;
        
        .message__content {
          background: #1890ff;
          color: white;
          margin-left: 40px;
          
          @media (max-width: 768px) {
            margin-left: 20px;
          }
        }
      }
      
      &--ai {
        justify-content: flex-start;
        
        .message__content {
          background: white;
          margin-right: 40px;
          
          @media (max-width: 768px) {
            margin-right: 20px;
          }
        }
      }
      
      .message__avatar {
        flex-shrink: 0;
        margin: 0 8px;
      }
      
      .message__content {
        max-width: 70%;
        padding: 12px 16px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        
        @media (max-width: 768px) {
          max-width: 85%;
          padding: 10px 12px;
        }
        
        .message__meta {
          display: flex;
          justify-content: space-between;
          margin-bottom: 8px;
          font-size: 12px;
          opacity: 0.7;
        }
        
        .message__text {
          line-height: 1.6;
          word-break: break-word;
        }
        
        .message__loading {
          display: flex;
          align-items: center;
          gap: 8px;
          color: #666;
          
          .el-icon.is-loading {
            animation: rotating 2s linear infinite;
          }
        }
        
        .message__actions {
          display: flex;
          gap: 4px;
          margin-top: 8px;
          opacity: 0;
          transition: opacity 0.2s;
        }
        
        &:hover .message__actions {
          opacity: 1;
        }
      }
    }
  }
  
  .ai-chat__input {
    border-top: 1px solid #e4e7ed;
    background: white;
    padding: 16px;
    
    @media (max-width: 768px) {
      padding: 12px;
    }
    
    .input-container {
      .input-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
        
        .quick-actions {
          display: flex;
          gap: 8px;
          
          @media (max-width: 768px) {
            gap: 4px;
          }
        }
      }
    }
  }
  
  .quick-questions {
    .quick-question-btn {
      display: block;
      width: 100%;
      text-align: left;
      margin-bottom: 8px;
      padding: 12px;
      border: 1px solid #e4e7ed;
      border-radius: 8px;
      
      &:hover {
        border-color: #1890ff;
        background: #f0f9ff;
      }
    }
  }
}

@keyframes rotating {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
</style>
```

## ğŸ¨ æ ·å¼å’Œä¸»é¢˜

### 1. CSSå˜é‡ç³»ç»Ÿ

```scss
// styles/design-tokens.scss
:root {
  // é¢œè‰²ç³»ç»Ÿ
  --color-primary: #1890ff;
  --color-primary-light: #40a9ff;
  --color-primary-dark: #096dd9;
  --color-success: #52c41a;
  --color-warning: #faad14;
  --color-error: #ff4d4f;
  --color-info: #909399;
  
  // æ–‡å­—é¢œè‰²
  --color-text-primary: #303133;
  --color-text-regular: #606266;
  --color-text-secondary: #909399;
  --color-text-placeholder: #c0c4cc;
  
  // èƒŒæ™¯é¢œè‰²
  --color-bg-primary: #ffffff;
  --color-bg-secondary: #f5f7fa;
  --color-bg-tertiary: #fafbfc;
  
  // è¾¹æ¡†é¢œè‰²
  --color-border-base: #dcdfe6;
  --color-border-light: #e4e7ed;
  --color-border-lighter: #ebeef5;
  --color-border-extra-light: #f2f6fc;
  
  // é—´è·ç³»ç»Ÿ
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 12px;
  --spacing-lg: 16px;
  --spacing-xl: 20px;
  --spacing-2xl: 24px;
  --spacing-3xl: 32px;
  
  // åœ†è§’ç³»ç»Ÿ
  --border-radius-sm: 4px;
  --border-radius-base: 6px;
  --border-radius-lg: 8px;
  --border-radius-xl: 12px;
  --border-radius-2xl: 16px;
  --border-radius-round: 50%;
  
  // é˜´å½±ç³»ç»Ÿ
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-base: 0 1px 3px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.15);
  --shadow-xl: 0 8px 24px rgba(0, 0, 0, 0.12);
  
  // å­—ä½“ç³»ç»Ÿ
  --font-size-xs: 12px;
  --font-size-sm: 14px;
  --font-size-base: 16px;
  --font-size-lg: 18px;
  --font-size-xl: 20px;
  --font-size-2xl: 24px;
  --font-size-3xl: 30px;
  
  // Z-indexç³»ç»Ÿ
  --z-index-dropdown: 1000;
  --z-index-sticky: 1020;
  --z-index-fixed: 1030;
  --z-index-modal-backdrop: 1040;
  --z-index-modal: 1050;
  --z-index-popover: 1060;
  --z-index-tooltip: 1070;
  --z-index-toast: 1080;
}

// æš—è‰²ä¸»é¢˜
[data-theme='dark'] {
  --color-bg-primary: #1f1f1f;
  --color-bg-secondary: #2d2d2d;
  --color-bg-tertiary: #3d3d3d;
  --color-text-primary: #ffffff;
  --color-text-regular: #e4e7ed;
  --color-text-secondary: #909399;
  --color-border-base: #4c4d4f;
  --color-border-light: #414243;
  --color-border-lighter: #363637;
}
```

### 2. å“åº”å¼æ–­ç‚¹ç³»ç»Ÿ

```scss
// styles/base/mixins.scss
// æ–­ç‚¹å®šä¹‰
$breakpoints: (
  xs: 0,          // æ‰‹æœºç«–å±
  sm: 576px,      // æ‰‹æœºæ¨ªå±
  md: 768px,      // å¹³æ¿ç«–å±
  lg: 992px,      // å¹³æ¿æ¨ªå± / å°ç¬”è®°æœ¬
  xl: 1200px,     // æ¡Œé¢æ˜¾ç¤ºå™¨
  xxl: 1600px     // å¤§å±æ˜¾ç¤ºå™¨
);

// åª’ä½“æŸ¥è¯¢æ··å…¥
@mixin respond-to($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media (min-width: map-get($breakpoints, $breakpoint)) {
      @content;
    }
  } @else {
    @warn "Unknown breakpoint: #{$breakpoint}";
  }
}

@mixin respond-below($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media (max-width: map-get($breakpoints, $breakpoint) - 1px) {
      @content;
    }
  } @else {
    @warn "Unknown breakpoint: #{$breakpoint}";
  }
}

@mixin respond-between($min-breakpoint, $max-breakpoint) {
  @if map-has-key($breakpoints, $min-breakpoint) and map-has-key($breakpoints, $max-breakpoint) {
    @media (min-width: map-get($breakpoints, $min-breakpoint)) and (max-width: map-get($breakpoints, $max-breakpoint) - 1px) {
      @content;
    }
  } @else {
    @warn "Unknown breakpoints: #{$min-breakpoint} or #{$max-breakpoint}";
  }
}

// å®¹å™¨æ··å…¥
@mixin container($max-width: 1200px) {
  width: 100%;
  max-width: $max-width;
  margin: 0 auto;
  padding: 0 var(--spacing-lg);
  
  @include respond-below(md) {
    padding: 0 var(--spacing-md);
  }
}

// Flexå¸ƒå±€æ··å…¥
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@mixin flex-column {
  display: flex;
  flex-direction: column;
}
```

## ğŸ“‹ ç»„ä»¶æµ‹è¯•

### 1. å•å…ƒæµ‹è¯•ç¤ºä¾‹

```typescript
// tests/components/DataTable.test.ts
import { describe, it, expect, vi } from 'vitest'
import { mount } from '@vue/test-utils'
import { ElTable, ElTableColumn } from 'element-plus'
import DataTable from '@/components/common/DataTable.vue'

describe('DataTable', () => {
  const mockData = [
    { id: 1, name: 'å¼ ä¸‰', age: 25, department: 'å¼€å‘éƒ¨' },
    { id: 2, name: 'æå››', age: 30, department: 'è®¾è®¡éƒ¨' }
  ]
  
  const mockColumns = [
    { prop: 'name', label: 'å§“å' },
    { prop: 'age', label: 'å¹´é¾„' },
    { prop: 'department', label: 'éƒ¨é—¨' }
  ]

  it('renders correctly with basic props', () => {
    const wrapper = mount(DataTable, {
      props: {
        data: mockData,
        columns: mockColumns
      },
      global: {
        components: {
          ElTable,
          ElTableColumn
        }
      }
    })

    expect(wrapper.find('.data-table').exists()).toBe(true)
    expect(wrapper.findComponent(ElTable).exists()).toBe(true)
  })

  it('emits selection-change event', async () => {
    const wrapper = mount(DataTable, {
      props: {
        data: mockData,
        columns: mockColumns,
        selectable: true
      },
      global: {
        components: {
          ElTable,
          ElTableColumn
        }
      }
    })

    const table = wrapper.findComponent(ElTable)
    await table.trigger('selection-change', mockData)

    expect(wrapper.emitted('selection-change')).toBeTruthy()
    expect(wrapper.emitted('selection-change')?.[0]).toEqual([mockData])
  })

  it('handles pagination correctly', async () => {
    const wrapper = mount(DataTable, {
      props: {
        data: mockData,
        columns: mockColumns,
        showPagination: true,
        total: 100
      }
    })

    expect(wrapper.find('.data-table__pagination').exists()).toBe(true)

    // æµ‹è¯•åˆ†é¡µäº‹ä»¶
    await wrapper.vm.handleCurrentChange(2)
    expect(wrapper.emitted('current-change')).toBeTruthy()
    expect(wrapper.emitted('current-change')?.[0]).toEqual([2])
  })

  it('displays loading state', () => {
    const wrapper = mount(DataTable, {
      props: {
        data: [],
        columns: mockColumns,
        loading: true
      }
    })

    const table = wrapper.findComponent(ElTable)
    expect(table.props('loading')).toBe(true)
  })
})
```

### 2. ç«¯åˆ°ç«¯æµ‹è¯•

```typescript
// tests/e2e/ai-chat.spec.ts
import { test, expect } from '@playwright/test'

test.describe('AI Chat Interface', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/ai')
    await page.waitForSelector('.ai-chat-interface')
  })

  test('displays welcome message', async ({ page }) => {
    const welcomeMessage = page.locator('.ai-chat__message--ai').first()
    await expect(welcomeMessage).toContainText('æ‚¨å¥½ï¼æˆ‘æ˜¯AIæ™ºèƒ½åŠ©æ‰‹')
  })

  test('sends and receives messages', async ({ page }) => {
    // è¾“å…¥æµ‹è¯•æ¶ˆæ¯
    await page.fill('textarea[placeholder*="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜"]', 'ä½ å¥½')
    await page.click('button:has-text("å‘é€")')

    // æ£€æŸ¥ç”¨æˆ·æ¶ˆæ¯æ˜¯å¦æ˜¾ç¤º
    const userMessage = page.locator('.ai-chat__message--user').last()
    await expect(userMessage).toContainText('ä½ å¥½')

    // ç­‰å¾…AIå›å¤
    await page.waitForSelector('.ai-chat__message--ai:not(:has(.message__loading))', { 
      timeout: 10000 
    })

    // æ£€æŸ¥AIå›å¤æ˜¯å¦æ˜¾ç¤º
    const aiMessages = page.locator('.ai-chat__message--ai')
    const messageCount = await aiMessages.count()
    expect(messageCount).toBeGreaterThan(1) // åŒ…æ‹¬æ¬¢è¿æ¶ˆæ¯
  })

  test('works on mobile viewport', async ({ page }) => {
    await page.setViewportSize({ width: 375, height: 667 })

    // æ£€æŸ¥ç§»åŠ¨ç«¯é€‚é…
    const chatInterface = page.locator('.ai-chat-interface')
    await expect(chatInterface).toBeVisible()

    // æ£€æŸ¥è¾“å…¥æ¡†é€‚é…
    const textarea = page.locator('textarea')
    const rows = await textarea.getAttribute('rows')
    expect(rows).toBe('2') // ç§»åŠ¨ç«¯åº”è¯¥æ˜¯2è¡Œ

    // æ£€æŸ¥æŒ‰é’®é€‚é…
    const sendButton = page.locator('button:has-text("å‘é€")')
    await expect(sendButton).toBeVisible()
  })

  test('displays quick questions', async ({ page }) => {
    await page.click('button:has-text("å¸¸ç”¨é—®é¢˜")')
    
    const dialog = page.locator('.el-dialog')
    await expect(dialog).toBeVisible()

    // æ£€æŸ¥å¸¸ç”¨é—®é¢˜æŒ‰é’®
    const questionButtons = page.locator('.quick-question-btn')
    const count = await questionButtons.count()
    expect(count).toBeGreaterThan(0)

    // ç‚¹å‡»ä¸€ä¸ªé—®é¢˜
    await questionButtons.first().click()
    
    // æ£€æŸ¥é—®é¢˜æ˜¯å¦å¡«å…¥è¾“å…¥æ¡†
    const textarea = page.locator('textarea')
    const value = await textarea.inputValue()
    expect(value.length).toBeGreaterThan(0)
  })

  test('copies message content', async ({ page }) => {
    // æ¨¡æ‹Ÿé¼ æ ‡æ‚¬æµ®æ˜¾ç¤ºæ“ä½œæŒ‰é’®
    const aiMessage = page.locator('.ai-chat__message--ai').first()
    await aiMessage.hover()

    // ç‚¹å‡»å¤åˆ¶æŒ‰é’®
    const copyButton = aiMessage.locator('button:has(.el-icon)')
    await copyButton.first().click()

    // æ£€æŸ¥æˆåŠŸæç¤º
    const successMessage = page.locator('.el-message--success')
    await expect(successMessage).toContainText('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿')
  })
})
```

## ğŸ¯ ç»„ä»¶æ€§èƒ½ä¼˜åŒ–

### 1. æ‡’åŠ è½½ç»„ä»¶

```typescript
// å¼‚æ­¥ç»„ä»¶åŠ è½½
const HeavyChart = defineAsyncComponent({
  loader: () => import('@/components/charts/HeavyChart.vue'),
  loadingComponent: LoadingSpinner,
  errorComponent: ErrorFallback,
  delay: 200,
  timeout: 3000
})

// æ¡ä»¶æ¸²æŸ“ä¼˜åŒ–
const ConditionalComponent = defineAsyncComponent(() => {
  return new Promise((resolve) => {
    // æ ¹æ®æ¡ä»¶åŠ¨æ€å¯¼å…¥
    if (someCondition) {
      resolve(import('@/components/FeatureA.vue'))
    } else {
      resolve(import('@/components/FeatureB.vue'))
    }
  })
})
```

### 2. è™šæ‹Ÿæ»šåŠ¨

```vue
<!-- VirtualList.vue -->
<template>
  <div 
    ref="containerRef" 
    class="virtual-list" 
    :style="{ height: containerHeight + 'px' }"
    @scroll="handleScroll"
  >
    <div 
      class="virtual-list__phantom" 
      :style="{ height: totalHeight + 'px' }"
    ></div>
    
    <div 
      class="virtual-list__content"
      :style="{ transform: `translateY(${startOffset}px)` }"
    >
      <div
        v-for="item in visibleData"
        :key="item[keyField]"
        class="virtual-list__item"
        :style="{ height: itemHeight + 'px' }"
      >
        <slot :item="item" :index="item.index" />
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
interface Props {
  data: any[]
  itemHeight: number
  containerHeight: number
  keyField?: string
  buffer?: number
}

const props = withDefaults(defineProps<Props>(), {
  keyField: 'id',
  buffer: 5
})

const containerRef = ref<HTMLElement>()
const scrollTop = ref(0)

// è®¡ç®—å±æ€§
const totalHeight = computed(() => props.data.length * props.itemHeight)
const visibleCount = computed(() => Math.ceil(props.containerHeight / props.itemHeight))
const startIndex = computed(() => Math.max(0, Math.floor(scrollTop.value / props.itemHeight) - props.buffer))
const endIndex = computed(() => Math.min(props.data.length, startIndex.value + visibleCount.value + props.buffer * 2))
const startOffset = computed(() => startIndex.value * props.itemHeight)

const visibleData = computed(() => {
  return props.data.slice(startIndex.value, endIndex.value).map((item, index) => ({
    ...item,
    index: startIndex.value + index
  }))
})

// æ»šåŠ¨å¤„ç†
const handleScroll = (event: Event) => {
  const target = event.target as HTMLElement
  scrollTop.value = target.scrollTop
}
</script>
```

### 3. ç»„ä»¶ç¼“å­˜

```vue
<!-- CachedComponent.vue -->
<template>
  <div class="cached-component">
    <keep-alive :max="maxCacheCount">
      <component 
        :is="currentComponent" 
        :key="componentKey"
        v-bind="componentProps"
        @update="handleComponentUpdate"
      />
    </keep-alive>
  </div>
</template>

<script setup lang="ts">
interface Props {
  componentName: string
  componentProps?: Record<string, any>
  cacheKey?: string
  maxCacheCount?: number
}

const props = withDefaults(defineProps<Props>(), {
  maxCacheCount: 10
})

const currentComponent = computed(() => {
  // åŠ¨æ€å¯¼å…¥ç»„ä»¶
  return defineAsyncComponent(() => 
    import(`@/components/${props.componentName}.vue`)
  )
})

const componentKey = computed(() => {
  return props.cacheKey || props.componentName
})

const handleComponentUpdate = (data: any) => {
  // å¤„ç†ç»„ä»¶æ›´æ–°
  console.log('Component updated:', data)
}
</script>
```

---

## ğŸ“ æ€»ç»“

æœ¬æŒ‡å—æ¶µç›–äº†å¹¼å„¿å›­ç®¡ç†ç³»ç»Ÿç»„ä»¶å¼€å‘çš„å„ä¸ªæ–¹é¢ï¼š

### âœ… æ ¸å¿ƒè¦ç‚¹
1. **ç»„ä»¶åˆ†å±‚æ¶æ„** - æ¸…æ™°çš„å±‚æ¬¡ç»“æ„ï¼ŒèŒè´£æ˜ç¡®
2. **å“åº”å¼è®¾è®¡** - ç§»åŠ¨ä¼˜å…ˆï¼Œé€‚é…å„ç§å±å¹•
3. **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
4. **æ€§èƒ½ä¼˜åŒ–** - æ‡’åŠ è½½ã€è™šæ‹Ÿæ»šåŠ¨ã€ç¼“å­˜ç­–ç•¥
5. **æµ‹è¯•è¦†ç›–** - å•å…ƒæµ‹è¯•å’Œ E2E æµ‹è¯•

### ğŸ¯ æœ€ä½³å®è·µ
1. **éµå¾ªè®¾è®¡åŸåˆ™** - å•ä¸€èŒè´£ã€å¯é…ç½®ã€å¯å¤ç”¨
2. **ç»Ÿä¸€ä»£ç è§„èŒƒ** - å‘½åã€ç»“æ„ã€æ ·å¼è§„èŒƒ
3. **ç§»åŠ¨ç«¯å‹å¥½** - è§¦æ‘¸ä¼˜åŒ–ã€å“åº”å¼å¸ƒå±€
4. **AIåŠŸèƒ½é›†æˆ** - æ™ºèƒ½åŒ–äº¤äº’ä½“éªŒ
5. **æŒç»­æµ‹è¯•** - ä¿è¯ä»£ç è´¨é‡å’ŒåŠŸèƒ½ç¨³å®š

**ä¸‹ä¸€æ­¥**: æŸ¥çœ‹ [APIé›†æˆè¯´æ˜](./05-APIé›†æˆè¯´æ˜.md) äº†è§£å¦‚ä½•ä¸åç«¯APIè¿›è¡Œé›†æˆã€‚

*æ–‡æ¡£ç‰ˆæœ¬: v1.0.0*  
*æ›´æ–°æ—¶é—´: 2025-08-10*  
*åŸºäºå®é™…ç»„ä»¶ä»£ç åˆ†ææ•´ç†*