# 考勤功能使用指南

**版本**: v1.0  
**更新日期**: 2025-01-09  
**状态**: ✅ 开发完成

---

## 📋 快速开始

### 访问路径

#### 园长/管理员
- **考勤中心**: http://localhost:5173/centers/attendance
- **权限**: `ATTENDANCE_CENTER_VIEW`

#### 教师
- **考勤管理**: http://localhost:5173/teacher-center/attendance
- **权限**: `teacher` 角色

---

## 🎯 功能概览

### 教师端功能

1. **班级选择**
   - 自动加载教师负责的班级
   - 支持多班级切换

2. **考勤录入**
   - 6种考勤状态：出勤、缺勤、迟到、早退、病假、事假
   - 签到/签退时间录入
   - 体温和健康状态记录
   - 备注和请假原因

3. **批量操作**
   - 一键批量签到
   - 批量保存考勤记录

4. **统计展示**
   - 实时统计：总人数、出勤、缺勤、出勤率
   - 可视化卡片展示

5. **导出功能**
   - 导出本班考勤报表（Excel/PDF）

---

### 园长端功能

1. **全园概览**
   - 8个统计指标
   - 日期选择
   - 实时数据更新

2. **统计分析**
   - 多时间维度：日/周/月/季/年
   - ECharts图表展示
   - 详细数据表格

3. **班级统计**
   - 按班级统计数据
   - 出勤率进度条展示

4. **异常分析**
   - 连续缺勤学生监测
   - 频繁迟到学生监测
   - 频繁早退学生监测

5. **健康监测**
   - 体温异常记录
   - 病假统计

6. **记录管理**
   - 查询所有考勤记录
   - 修改任意考勤记录
   - 删除考勤记录
   - 分页展示

7. **导入导出**
   - 导出全园考勤报表
   - 批量导入考勤数据

---

## 🔐 权限说明

### 教师权限

| 操作 | 权限 | 说明 |
|------|------|------|
| 查看考勤管理 | `TEACHER_ATTENDANCE_VIEW` | 可以查看考勤管理页面 |
| 录入考勤 | `TEACHER_ATTENDANCE_RECORD` | 可以录入和修改考勤记录 |
| 导出报表 | `TEACHER_ATTENDANCE_EXPORT` | 可以导出本班考勤报表 |

**限制**:
- 只能查看和管理自己负责的班级
- 只能修改当天的考勤记录
- 不能删除考勤记录

---

### 园长/管理员权限

| 操作 | 权限 | 说明 |
|------|------|------|
| 查看考勤中心 | `ATTENDANCE_CENTER_VIEW` | 可以查看考勤中心页面 |
| 管理考勤记录 | `ATTENDANCE_CENTER_MANAGE` | 可以管理所有考勤记录 |
| 导出报表 | `ATTENDANCE_CENTER_EXPORT` | 可以导出考勤报表 |
| 导入数据 | `ATTENDANCE_CENTER_IMPORT` | 可以批量导入考勤数据 |

**权限**:
- 可以查看全园所有考勤数据
- 可以修改任意时间的考勤记录
- 可以删除考勤记录
- 可以重置考勤记录

---

## 📖 使用教程

### 教师端使用流程

#### 1. 进入考勤管理页面
- 登录系统
- 点击侧边栏"考勤管理"
- 或访问 `/teacher-center/attendance`

#### 2. 选择班级和日期
- 从下拉框选择班级（默认第一个）
- 日期默认为今天（不可修改）

#### 3. 录入考勤
- 为每个学生选择考勤状态
- 填写签到时间（必填）
- 填写签退时间（可选）
- 填写体温（可选）
- 选择健康状态（可选）
- 填写备注（可选）

#### 4. 批量签到
- 点击"批量签到"按钮
- 确认操作
- 系统自动为所有未签到的学生标记为出勤

#### 5. 保存考勤
- 点击"保存考勤"按钮
- 系统验证数据
- 保存成功后显示提示

#### 6. 导出报表
- 点击"导出报表"按钮
- 选择导出格式（Excel/PDF）
- 下载报表文件

---

### 园长端使用流程

#### 1. 进入考勤中心
- 登录系统
- 点击侧边栏"考勤中心"
- 或访问 `/centers/attendance`

#### 2. 查看全园概览
- 查看当天的统计数据
- 选择日期查看历史数据

#### 3. 统计分析
- 切换到"统计分析"Tab
- 选择时间维度（日/周/月/季/年）
- 选择日期范围
- 查看图表和数据表格

#### 4. 班级统计
- 切换到"班级统计"Tab
- 选择日期范围
- 查看各班级的统计数据

#### 5. 异常分析
- 切换到"异常分析"Tab
- 查看连续缺勤学生
- 查看频繁迟到学生
- 查看频繁早退学生

#### 6. 健康监测
- 切换到"健康监测"Tab
- 查看体温异常记录
- 查看病假统计

#### 7. 记录管理
- 切换到"记录管理"Tab
- 筛选和查询记录
- 编辑或删除记录

#### 8. 导出报表
- 点击"导出报表"按钮
- 选择日期范围
- 选择导出格式
- 下载报表文件

---

## 🔧 API文档

### 教师考勤API

**基础路径**: `/api/teacher/attendance`

详细API文档请参考：[教师考勤API文档](./API文档-教师端.md)

---

### 园长考勤中心API

**基础路径**: `/api/attendance-center`

详细API文档请参考：[园长考勤中心API文档](./API文档-园长端.md)

---

## 🐛 常见问题

### Q1: 为什么教师不能修改昨天的考勤记录？

**A**: 这是权限设计的一部分。教师只能修改当天的考勤记录，以确保数据的准确性和可追溯性。如需修改历史记录，请联系园长或管理员。

---

### Q2: 批量签到会覆盖已有的考勤记录吗？

**A**: 不会。批量签到只会为**未签到**的学生标记为出勤，已有考勤记录的学生不会被覆盖。

---

### Q3: 导出的报表包含哪些数据？

**A**: 
- 教师端：导出本班在选定日期范围内的所有考勤记录
- 园长端：导出全园在选定日期范围内的所有考勤记录

报表包含：学生姓名、班级、日期、考勤状态、签到/签退时间、体温、健康状态、备注等。

---

### Q4: 如何查看某个学生的考勤历史？

**A**: 
- 教师端：在考勤记录列表中，使用筛选功能选择学生
- 园长端：在"记录管理"Tab中，使用筛选功能选择学生

---

### Q5: 异常考勤分析的标准是什么？

**A**: 
- 连续缺勤：连续3天及以上缺勤
- 频繁迟到：一周内迟到3次及以上
- 频繁早退：一周内早退3次及以上

---

## 📞 技术支持

如有问题或建议，请联系：

- **开发团队**: AI Assistant
- **技术文档**: [考勤功能完整总结](../开发日志/考勤功能完整总结-2025-01-09.md)
- **设计方案**: [考勤功能完整设计方案](../设计/考勤功能完整设计方案-2025-01-09.md)

---

## 📝 更新日志

### v1.0 (2025-01-09)
- ✅ 初始版本发布
- ✅ 教师考勤管理功能
- ✅ 园长考勤中心功能
- ✅ 多维度统计分析
- ✅ 异常考勤监测
- ✅ 健康监测功能

---

**文档版本**: v1.0  
**最后更新**: 2025-01-09

