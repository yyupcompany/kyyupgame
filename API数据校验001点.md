# å›­é•¿è§’è‰² API æ•°æ®ä¸€è‡´æ€§æ£€æµ‹æŠ¥å‘Š

## æ£€æµ‹æ—¶é—´
2026/1/21 11:37:19

## æ£€æµ‹èŒƒå›´
- **è§’è‰²**: å›­é•¿ (principal)
- **æµ‹è¯•è´¦å·**: principal / 123456
- **æµ‹è¯•ç¯å¢ƒ**: http://localhost:3000
- **å‰ç«¯åœ°å€**: http://localhost:5173

## æ‰§è¡Œæ‘˜è¦
### æ£€æµ‹ç»Ÿè®¡
- **æ€»æµ‹è¯•æ•°**: 35
- **æˆåŠŸ**: 12 (34.3%)
- **å¤±è´¥**: 23 (65.7%)
  - 404 Not Found: 15
  - 403 Forbidden: 8
- **å¹³å‡å“åº”æ—¶é—´**: 67ms
- **æ€»æµ‹è¯•æ—¶é—´**: 6309ms

### æ•´ä½“è¯„ä¼°
- **ç³»ç»ŸçŠ¶æ€**: âŒ éœ€è¦æ”¹è¿›
- **APIå¯ç”¨æ€§**: 34.3%
- **å»ºè®®**: å¤§é‡APIéœ€è¦ä¿®å¤

## è¯¦ç»†æ£€æµ‹ç»“æœ

### PCç«¯å›­é•¿é¡µé¢

#### 1. Dashboard ä»ªè¡¨æ¿

**APIç«¯ç‚¹**:
- GET `/dashboard/stats` - âœ… 269ms
  - æ•°æ®å­—æ®µ: userCount, kindergartenCount, studentCount, enrollmentCount, activityCount, teacherCount, classCount
  - æ•°æ®ç»“æ„: {"type":"object","keys":["userCount","kindergartenCount","studentCount","enrollmentCount","activityCount"],"totalKeys":7}
- GET `/dashboard/todos?page=1&pageSize=5` - âœ… 204ms
  - æ•°æ®å­—æ®µ: items, total, page, pageSize, totalPages
  - æ•°æ®ç»“æ„: {"type":"object","keys":["items","total","page","pageSize","totalPages"],"totalKeys":5,"itemsCount":0}
- GET `/dashboard/graduation-stats` - âœ… 283ms
  - æ•°æ®å­—æ®µ: label, year, count, month, totalGraduated, byClass, trend
  - æ•°æ®ç»“æ„: {"type":"object","keys":["label","year","count","month","totalGraduated"],"totalKeys":7}
- GET `/dashboard/pre-enrollment-stats` - âœ… 245ms
  - æ•°æ®å­—æ®µ: totalPreEnrollment, pending, confirmed, cancelled, conversionRate, bySource
  - æ•°æ®ç»“æ„: {"type":"object","keys":["totalPreEnrollment","pending","confirmed","cancelled","conversionRate"],"totalKeys":6}
- GET `/decision-support/dashboard` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404
- GET `/principal/dashboard` - âœ… 238ms
  - æ•°æ®å­—æ®µ: totalStudents, totalTeachers, totalClasses, activeActivities, statistics
  - æ•°æ®ç»“æ„: {"type":"object","keys":["totalStudents","totalTeachers","totalClasses","activeActivities","statistics"],"totalKeys":5}
- GET `/centers/principal-center/dashboard` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404

#### 2. CustomerPool å®¢æˆ·æ± 

**APIç«¯ç‚¹**:
- GET `/customer-pool?page=1&pageSize=20` - âŒ [403]
  - é”™è¯¯: Request failed with status code 403
- GET `/principal/customer-pool?page=1&pageSize=20` - âŒ [403]
  - é”™è¯¯: Request failed with status code 403
- GET `/customer-pool/stats` - âŒ [403]
  - é”™è¯¯: Request failed with status code 403
- GET `/principal/customer-pool-stats` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404

#### 3. ParentPermission å®¶é•¿æƒé™

**APIç«¯ç‚¹**:
- GET `/parent-permissions?page=1&pageSize=20` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404
- GET `/parent-permissions/stats` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404

#### 4. Performance ç»©æ•ˆç®¡ç†

**APIç«¯ç‚¹**:
- GET `/performance-rules?page=1&pageSize=20` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404
- GET `/performance-rules/stats` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404
- GET `/principal/performance` - âŒ [403]
  - é”™è¯¯: Request failed with status code 403

#### 5. PosterGenerator æµ·æŠ¥ç”Ÿæˆå™¨

**APIç«¯ç‚¹**:
- GET `/poster-templates?page=1&pageSize=20` - âœ… 145ms
  - æ•°æ®å­—æ®µ: templates, pagination
- GET `/poster-generations?page=1&pageSize=20` - âŒ [403]
  - é”™è¯¯: Request failed with status code 403

#### 6. å†³ç­–æ”¯æŒç³»ç»Ÿ

**APIç«¯ç‚¹**:
- GET `/decision-support/dashboard` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404
- GET `/decision-support/analytics` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404

### ç§»åŠ¨ç«¯å›­é•¿ä¸­å¿ƒ

#### ç§»åŠ¨ç«¯APIæµ‹è¯•

**APIç«¯ç‚¹**:
- GET `/mobile/centers/principal-center` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404
- GET `/centers/principal-center/dashboard` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404
- GET `/mobile/centers/task-center` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404
- GET `/mobile/centers/teaching-center` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404
- GET `/mobile/centers/enrollment-center` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404
- GET `/mobile/centers/system-center` - âŒ [404]
  - é”™è¯¯: Request failed with status code 404

## é—®é¢˜æ±‡æ€»

### ä¸¥é‡é—®é¢˜ï¼ˆAPIå¤±è´¥ï¼‰

#### 404 Not Found (è·¯ç”±ä¸å­˜åœ¨)
1. **GET /parent-permissions?page=1&pageSize=20**
   - æè¿°: å®¶é•¿æƒé™åˆ—è¡¨
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

2. **GET /parent-permissions/stats**
   - æè¿°: å®¶é•¿æƒé™ç»Ÿè®¡
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

3. **GET /performance-rules?page=1&pageSize=20**
   - æè¿°: ç»©æ•ˆè§„åˆ™åˆ—è¡¨
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

4. **GET /performance-rules/stats**
   - æè¿°: ç»©æ•ˆç»Ÿè®¡
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

5. **GET /decision-support/dashboard**
   - æè¿°: å†³ç­–æ”¯æŒä»ªè¡¨æ¿
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

6. **GET /decision-support/analytics**
   - æè¿°: å†³ç­–æ”¯æŒåˆ†æ
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

7. **GET /marketing/analytics**
   - æè¿°: è¥é”€åˆ†ææ•°æ®
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

8. **GET /principal/customer-pool-stats**
   - æè¿°: å›­é•¿å®¢æˆ·æ± ç»Ÿè®¡
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

9. **GET /mobile/centers/principal-center**
   - æè¿°: ç§»åŠ¨ç«¯å›­é•¿ä¸­å¿ƒ
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

10. **GET /centers/principal-center/dashboard**
   - æè¿°: å›­é•¿ä¸­å¿ƒä»ªè¡¨æ¿
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

11. **GET /mobile/centers/task-center**
   - æè¿°: ç§»åŠ¨ç«¯ä»»åŠ¡ä¸­å¿ƒ
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

12. **GET /mobile/centers/teaching-center**
   - æè¿°: ç§»åŠ¨ç«¯æ•™å­¦ä¸­å¿ƒ
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

13. **GET /teaching-center/overview**
   - æè¿°: æ•™å­¦ä¸­å¿ƒæ¦‚è§ˆ
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

14. **GET /mobile/centers/enrollment-center**
   - æè¿°: ç§»åŠ¨ç«¯æ‹›ç”Ÿä¸­å¿ƒ
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

15. **GET /mobile/centers/system-center**
   - æè¿°: ç§»åŠ¨ç«¯ç³»ç»Ÿä¸­å¿ƒ
   - å»ºè®®: æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®è®¤è¯¥APIæ˜¯å¦å·²å®ç°

#### 403 Forbidden (æƒé™ä¸è¶³)
1. **GET /customer-pool?page=1&pageSize=20**
   - æè¿°: å®¢æˆ·æ± åˆ—è¡¨
   - å»ºè®®: æ£€æŸ¥principalè§’è‰²çš„æƒé™é…ç½®

2. **GET /principal/customer-pool?page=1&pageSize=20**
   - æè¿°: å®¢æˆ·æ± åˆ—è¡¨(å›­é•¿è·¯å¾„)
   - å»ºè®®: æ£€æŸ¥principalè§’è‰²çš„æƒé™é…ç½®

3. **GET /customer-pool/stats**
   - æè¿°: å®¢æˆ·æ± ç»Ÿè®¡
   - å»ºè®®: æ£€æŸ¥principalè§’è‰²çš„æƒé™é…ç½®

4. **GET /poster-generations?page=1&pageSize=20**
   - æè¿°: æµ·æŠ¥ç”Ÿæˆè®°å½•
   - å»ºè®®: æ£€æŸ¥principalè§’è‰²çš„æƒé™é…ç½®

5. **GET /activities?page=1&pageSize=20**
   - æè¿°: æ´»åŠ¨åˆ—è¡¨
   - å»ºè®®: æ£€æŸ¥principalè§’è‰²çš„æƒé™é…ç½®

6. **GET /activities/statistics**
   - æè¿°: æ´»åŠ¨ç»Ÿè®¡
   - å»ºè®®: æ£€æŸ¥principalè§’è‰²çš„æƒé™é…ç½®

7. **GET /principal/performance**
   - æè¿°: å›­é•¿ç»©æ•ˆ
   - å»ºè®®: æ£€æŸ¥principalè§’è‰²çš„æƒé™é…ç½®

8. **GET /enrollment-applications?page=1&pageSize=20**
   - æè¿°: æ‹›ç”Ÿç”³è¯·åˆ—è¡¨
   - å»ºè®®: æ£€æŸ¥principalè§’è‰²çš„æƒé™é…ç½®

### è­¦å‘Šï¼ˆæ€§èƒ½é—®é¢˜ï¼‰
æ— æ€§èƒ½é—®é¢˜

## æ•°æ®ä¸€è‡´æ€§åˆ†æ

### å·²æ£€æµ‹çš„æ•°æ®å­—æ®µ
- æ€»è®¡æ£€æµ‹åˆ° **46** ä¸ªä¸åŒçš„æ•°æ®å­—æ®µ
- ä¸»è¦å­—æ®µç±»å‹: userCount, kindergartenCount, studentCount, enrollmentCount, activityCount, teacherCount, classCount, items, total, page, pageSize, totalPages, label, year, count...

### æ•°æ®å®Œæ•´æ€§æ£€æŸ¥
æˆåŠŸçš„APIå‡è¿”å›äº†æœ‰æ•ˆçš„æ•°æ®ç»“æ„ï¼š

- **/todos?page=1&pageSize=20**
  - æ•°æ®é¡¹å­—æ®µ: id, title, description, content, status, priority, due_date, completed_date, user_id, assigned_to, tags, related_id, related_type, notify, notify_time, created_at, updated_at, deleted_at, creator_id, assignee_id, kindergarten_id, completed_at, notify_at, is_notification_enabled, metadata, creator_username, creator_real_name, assignee_username, assignee_real_name, user, assignee
- **/schedules?page=1&pageSize=20**
  - æ•°æ®é¡¹å­—æ®µ: id, title, description, startTime, endTime, location, userId, createdAt, updatedAt, deletedAt, user
- **/system-configs?config_group=system**
  - æ•°æ®é¡¹å­—æ®µ: id, groupKey, configKey, configValue, description, isSystem, created_at, updated_at
- **/notifications?page=1&pageSize=20**
  - æ•°æ®é¡¹å­—æ®µ: id, user_id, title, content, notification_type, is_read, read_time, link_url, sender_id, is_important, expire_time, created_at, updated_at, type, status, source_id, source_type, read_at, cancelled_at, cancelled_by, cancel_reason, total_count, read_count, send_at, deleted_at

## æ ¡éªŒç»“è®º

### æ•´ä½“è¯„ä¼°
- **æ•°æ®ä¸€è‡´æ€§**: âŒ éœ€è¦æ”¹è¿›
- **APIå¯ç”¨æ€§**: 34.3%
- **æ€§èƒ½è¡¨ç°**: âœ… ä¼˜ç§€

### ä¿®å¤ä¼˜å…ˆçº§

#### é«˜ä¼˜å…ˆçº§ï¼ˆP0ï¼‰- ä¸¥é‡é˜»ç¢åŠŸèƒ½ä½¿ç”¨
1. **ä¿®å¤404é”™è¯¯çš„è·¯ç”±** (15ä¸ª)
   - è¿™äº›APIè·¯ç”±å°šæœªå®ç°æˆ–è·¯å¾„é…ç½®é”™è¯¯
   - å½±å“: å›­é•¿æ— æ³•æ­£å¸¸è®¿é—®è¿™äº›åŠŸèƒ½æ¨¡å—
2. **ä¿®å¤403æƒé™é”™è¯¯** (8ä¸ª)
   - principalè§’è‰²ç¼ºå°‘å¿…è¦çš„æƒé™
   - å½±å“: å›­é•¿æ— æƒè®¿é—®æŸäº›åŠŸèƒ½

#### ä¸­ä¼˜å…ˆçº§ï¼ˆP1ï¼‰- ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

#### ä½ä¼˜å…ˆçº§ï¼ˆP2ï¼‰- ä»£ç è´¨é‡æ”¹è¿›
1. æ·»åŠ APIæ–‡æ¡£
2. å®Œå–„é”™è¯¯å¤„ç†
3. æ·»åŠ å•å…ƒæµ‹è¯•

### å»ºè®®
1. ğŸ”§ ç«‹å³ä¿®å¤å¤±è´¥çš„APIç«¯ç‚¹ï¼ˆä¼˜å…ˆP0çº§åˆ«ï¼‰
2. ğŸ” æ£€æŸ¥åç«¯è·¯ç”±é…ç½®ï¼Œç¡®ä¿æ‰€æœ‰è·¯ç”±æ­£ç¡®æ³¨å†Œ
3. ğŸ‘¥ å®¡æŸ¥principalè§’è‰²æƒé™é…ç½®
4. ğŸ“ æŸ¥çœ‹åç«¯æ—¥å¿—å®šä½å…·ä½“é—®é¢˜
5. ğŸ§ª æ·»åŠ APIæµ‹è¯•ç”¨ä¾‹é˜²æ­¢å›å½’

## é™„å½•

### æµ‹è¯•ç¯å¢ƒä¿¡æ¯
- **Node.jsç‰ˆæœ¬**: v22.19.0
- **æµ‹è¯•æ—¶é—´**: 2026-01-21T03:37:19.711Z
- **æµ‹è¯•å·¥å…·**: axios
- **è®¤è¯æ–¹å¼**: JWT Bearer Token

### ç›¸å…³æ–‡æ¡£
- [APIæ–‡æ¡£](http://localhost:3000/api-docs)
- [è·¯ç”±é…ç½®](/server/src/routes/)
- [æƒé™é…ç½®](/server/src/middlewares/auth.middleware.ts)

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2026/1/21 11:37:19
**æµ‹è¯•æ‰§è¡Œè€…**: Claude AI - APIæ•°æ®ä¸€è‡´æ€§éªŒè¯ç³»ç»Ÿ
**æŠ¥å‘Šç‰ˆæœ¬**: v1.0.0
