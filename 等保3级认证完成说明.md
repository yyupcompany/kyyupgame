# ç­‰ä¿3çº§è®¤è¯å®Œæˆè¯´æ˜

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®å®Œæˆäº†ç­‰ä¿ä¸‰çº§è®¤è¯åˆè§„æ€§è¯„ä¼°è®¾è®¡å¼€å‘å·¥ä½œï¼ŒåŒ…å«ä¸¤ä¸ªæ ¸å¿ƒç³»ç»Ÿï¼š
- **adminyyup**: ç»Ÿä¸€è®¤è¯ + ç§Ÿæˆ·ç®¡ç†ç³»ç»Ÿ
- **k.yyup.com**: ç§Ÿæˆ·ä¸šåŠ¡ç³»ç»Ÿ

## ç¯å¢ƒå˜é‡é…ç½®è¯´æ˜

### adminyyup é¡¹ç›®
**æ–‡ä»¶ä½ç½®**: `adminyyup/admin.yyup.cc/server/.env`

å…³é”®ç¯å¢ƒå˜é‡:
```bash
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=admin_tenant_management

# JWTé…ç½®
JWT_SECRET=your_jwt_secret
JWT_EXPIRES_IN=7d

# æ•°æ®åŠ å¯†å¯†é’¥ï¼ˆç­‰ä¿ä¸‰çº§è¦æ±‚ï¼‰
DATA_ENCRYPTION_KEY=your_32_character_encryption_key

# KMSå¯†é’¥ç®¡ç†æœåŠ¡ï¼ˆé˜¿é‡Œäº‘ï¼‰
KMS_ACCESS_KEY_ID=your_kms_access_key
KMS_ACCESS_KEY_SECRET=your_kms_secret
KMS_REGION_ID=cn-hangzhou

# MFAåŒå› ç´ è®¤è¯
MFA_ENABLED=true
MFA_ISSUER=YYUP Admin
```

### k.yyup.com é¡¹ç›®
**æ–‡ä»¶ä½ç½®**: 
- å®¢æˆ·ç«¯: `k.yyup.com/client/.env`
- æœåŠ¡ç«¯: `k.yyup.com/server/.env`

å…³é”®ç¯å¢ƒå˜é‡å‚è€ƒ: `k.yyup.com/.env.example`

## å®‰å…¨æµ‹è¯•ç”¨ä¾‹è¯´æ˜

### adminyyup å®‰å…¨æµ‹è¯•
**ç›®å½•ä½ç½®**: `adminyyup/admin.yyup.cc/server/tests/security/`

| æµ‹è¯•æ–‡ä»¶ | åŠŸèƒ½æè¿° |
|---------|---------|
| `basicSecurity.test.ts` | åŸºç¡€å®‰å…¨æµ‹è¯•ï¼ˆå¯†ç å¼ºåº¦ã€ç™»å½•é˜²æŠ¤ã€ä¼šè¯ç®¡ç†ï¼‰ |
| `staticAnalysis.test.ts` | é™æ€ä»£ç å®‰å…¨åˆ†æï¼ˆæ•æ„Ÿä¿¡æ¯æ£€æµ‹ã€ä»£ç æ³¨å…¥æ£€æµ‹ï¼‰ |
| `apiSecurity.test.ts` | APIå®‰å…¨æµ‹è¯•ï¼ˆè®¤è¯æˆæƒã€è¾“å…¥éªŒè¯ï¼‰ |
| `configSecurity.test.ts` | é…ç½®å®‰å…¨æµ‹è¯•ï¼ˆç¯å¢ƒå˜é‡ã€å¯†é’¥ç®¡ç†ï¼‰ |
| `dynamicSecurity.test.ts` | åŠ¨æ€å®‰å…¨æµ‹è¯•ï¼ˆè¿è¡Œæ—¶å®‰å…¨æ£€æŸ¥ï¼‰ |
| `networkSecurity.test.ts` | ç½‘ç»œå®‰å…¨æµ‹è¯•ï¼ˆHTTPSã€CORSã€è¯·æ±‚éªŒè¯ï¼‰ |
| `runSecurityTests.ts` | å®‰å…¨æµ‹è¯•è¿è¡Œå™¨ |

è¿è¡Œæµ‹è¯•:
```bash
cd adminyyup/admin.yyup.cc/server
npm run test:security
```

### k.yyup.com å®‰å…¨æµ‹è¯•
**ç›®å½•ä½ç½®**: `k.yyup.com/client/src/tests/mobile/security/`

| æµ‹è¯•æ–‡ä»¶ | åŠŸèƒ½æè¿° |
|---------|---------|
| `sql-injection.test.ts` | SQLæ³¨å…¥é˜²æŠ¤æµ‹è¯• |
| `csrf-protection.test.ts` | CSRFè·¨ç«™è¯·æ±‚ä¼ªé€ é˜²æŠ¤æµ‹è¯• |
| `xss-protection.test.ts` | XSSè·¨ç«™è„šæœ¬æ”»å‡»é˜²æŠ¤æµ‹è¯• |
| `TC-031-XSS-protection.test.ts` | XSSé˜²æŠ¤å®Œæ•´æµ‹è¯•ç”¨ä¾‹ |
| `TC-032-CSRF-token-validation.test.ts` | CSRFä»¤ç‰ŒéªŒè¯æµ‹è¯• |
| `TC-033-SQL-injection-protection.test.ts` | SQLæ³¨å…¥é˜²æŠ¤å®Œæ•´æµ‹è¯• |
| `TC-034-sensitive-data-encryption.test.ts` | æ•æ„Ÿæ•°æ®åŠ å¯†æµ‹è¯• |
| `TC-035-privilege-escalation-protection.test.ts` | æƒé™æå‡é˜²æŠ¤æµ‹è¯• |

è¿è¡Œæµ‹è¯•:
```bash
cd k.yyup.com/server
npm run security:mobile
```

### ç»Ÿä¸€è®¤è¯APIæµ‹è¯•
**æ–‡ä»¶ä½ç½®**: `test-unified-tenant-api.js`

æµ‹è¯•å†…å®¹:
- å¥åº·æ£€æŸ¥å’ŒAPIä¿¡æ¯
- ç»Ÿä¸€è®¤è¯ç™»å½•ï¼ˆå®‰å…¨éªŒè¯ï¼‰
- ç”¨æˆ·ä¿¡æ¯è·å–
- ç§Ÿæˆ·åˆ—è¡¨è·å–
- æƒé™æ§åˆ¶ä¿æŠ¤
- KMSå’ŒMFAæœåŠ¡çŠ¶æ€

è¿è¡Œæµ‹è¯•:
```bash
node test-unified-tenant-api.js
```

## ç­‰ä¿ä¸‰çº§åˆè§„è¦ç‚¹

### 1. èº«ä»½é‰´åˆ«
- âœ… å¤šå› ç´ è®¤è¯ï¼ˆMFA/TOTPï¼‰
- âœ… å¯†ç å¤æ‚åº¦è¦æ±‚
- âœ… ç™»å½•å¤±è´¥é”å®šæœºåˆ¶
- âœ… ä¼šè¯è¶…æ—¶ç®¡ç†

### 2. è®¿é—®æ§åˆ¶
- âœ… RBACè§’è‰²æƒé™æ§åˆ¶
- âœ… ç§Ÿæˆ·æ•°æ®éš”ç¦»
- âœ… APIæƒé™éªŒè¯

### 3. å®‰å…¨å®¡è®¡
- âœ… æ“ä½œæ—¥å¿—è®°å½•
- âœ… ç™»å½•æ—¥å¿—è®°å½•
- âœ… æ•æ„Ÿæ“ä½œå®¡è®¡

### 4. æ•°æ®å®‰å…¨
- âœ… æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- âœ… ä¼ è¾“åŠ å¯†ï¼ˆHTTPSï¼‰
- âœ… KMSå¯†é’¥ç®¡ç†

### 5. å…¥ä¾µé˜²èŒƒ
- âœ… SQLæ³¨å…¥é˜²æŠ¤
- âœ… XSSæ”»å‡»é˜²æŠ¤
- âœ… CSRFé˜²æŠ¤

## è¯¦ç»†è®¾è®¡æ–‡æ¡£

å®Œæ•´çš„ç­‰ä¿ä¸‰çº§è®¤è¯åˆè§„æ€§è¯„ä¼°è®¾è®¡æ–‡æ¡£ä½äº:
`.qoder/quests/security-assessment-3rd-level.md`

## æµ‹è¯•æŠ¥å‘Šæ‘˜è¦

ç»Ÿä¸€è®¤è¯APIæµ‹è¯•ç»“æœ:
```
âœ… é€šè¿‡: 29
âŒ å¤±è´¥: 0
ğŸ“Š é€šè¿‡ç‡: 100.0%
```

---
**å®Œæˆæ—¶é—´**: 2026-01-06
**ç‰ˆæœ¬**: v1.0.0
**é‡Œç¨‹ç¢‘**: ç­‰ä¿3çº§è®¤è¯å®Œæˆ
